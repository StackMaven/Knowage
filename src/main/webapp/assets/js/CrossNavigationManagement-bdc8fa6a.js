import{_ as v,d as f,X as $,s as w,r as o,o as m,c as C,a as i,f as a,w as c,g as k,t as B,h as N,A as b,V as T}from"./index-1e676509.js";import{K as y}from"./KnListBox-94855720.js";import{c as _}from"./CrossNavigationManagementDescriptor-5a786290.js";import"./menu.esm-6bee86d0.js";const F=f({name:"navigation-management",components:{KnFabButton:$,KnListBox:y},data(){return{navigations:[],loading:!1,touched:!1,crossNavigationDescriptor:_}},setup(){return{store:w()}},created(){this.loadAll()},methods:{async loadAll(){this.loading=!0,await this.$http.get("/knowage/restful-services/1.0/crossNavigation/listNavigation/").then(e=>this.navigations=e.data).finally(()=>this.loading=!1)},selected(e,t){e.item&&e.item.id&&(t=e.item.id),this.showForm(t)},deleteTempateConfirm(e){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteTitle"),icon:"pi pi-exclamation-triangle",accept:async()=>await this.deleteTemplate(e.item.id)})},async deleteTemplate(e){this.loading=!0,await this.$http.post("/knowage/restful-services/1.0/crossNavigation/remove","{'id':"+e+"}").then(async()=>{this.store.setInfo({title:this.$t("common.toast.deleteTitle"),msg:this.$t("common.toast.deleteSuccess")}),await this.loadAll(),e==this.$route.params.id&&this.$router.push("/cross-navigation-management")}).catch(t=>this.store.setError({title:this.$t("common.error.generic"),msg:t.message})),this.loading=!1},showForm(e){const t=e!==-1?"/cross-navigation-management/"+e:"/cross-navigation-management/new-navigation";this.touched?this.$confirm.require({message:this.$t("common.toast.unsavedChangesMessage"),header:this.$t("common.toast.unsavedChangesHeader"),icon:"pi pi-exclamation-triangle",accept:()=>{this.touched=!1,this.$router.push(t)}}):this.$router.push(t)},closeForm(){this.touched?this.$confirm.require({message:this.$t("common.toast.unsavedChangesMessage"),header:this.$t("common.toast.unsavedChangesHeader"),icon:"pi pi-exclamation-triangle",accept:()=>{this.touched=!1,this.handleClose()}}):this.handleClose()},handleClose(){this.$router.replace("/cross-navigation-management")},async reload(e,t){var n;if(await this.loadAll(),this.touched=!1,e==="insert"){let r=(n=this.navigations.find(l=>l.name===t))==null?void 0:n.id;this.$router.push("/cross-navigation-management/"+r)}}}}),K={class:"kn-page"},M={class:"kn-page-content p-grid p-m-0"},A={class:"p-col-4 p-sm-4 p-md-3 p-p-0 kn-page"},S={class:"p-col-8 p-sm-8 p-md-9 p-p-0 p-m-0 kn-router-view"};function V(e,t,n,r,l,D){const d=o("KnFabButton"),h=o("Toolbar"),p=o("ProgressBar"),g=o("KnListBox"),u=o("router-view");return m(),C("div",K,[i("div",M,[i("div",A,[a(h,{class:"kn-toolbar kn-toolbar--primary"},{start:c(()=>[k(B(e.$t("managers.crossNavigationManagement.title")),1)]),end:c(()=>[a(d,{icon:"fas fa-plus",onClick:t[0]||(t[0]=s=>e.showForm(-1)),"data-test":"new-button"})]),_:1}),e.loading?(m(),N(p,{key:0,mode:"indeterminate",class:"kn-progress-bar","data-test":"progress-bar"})):b("",!0),a(g,{options:e.navigations,settings:e.crossNavigationDescriptor.knListSettings,onClick:t[1]||(t[1]=s=>e.selected(s,e.item)),onDelete:t[2]||(t[2]=T(s=>e.deleteTempateConfirm(s,e.item),["stop"]))},null,8,["options","settings"])]),i("div",S,[a(u,{onClose:e.closeForm,onTouched:t[3]||(t[3]=s=>e.touched=!0),onSaved:e.reload},null,8,["onClose","onSaved"])])])])}var P=v(F,[["render",V]]);export{P as default};
//# sourceMappingURL=CrossNavigationManagement-bdc8fa6a.js.map
