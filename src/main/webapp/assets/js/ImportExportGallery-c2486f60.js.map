{"version":3,"file":"ImportExportGallery-c2486f60.js","sources":["../../../../modules/importExport/gallery/ImportExportGallery.vue"],"sourcesContent":["<template>\r\n    <span>\r\n        <OverlayPanel ref=\"op\" class=\"imageOverlayPanel\">\r\n            <img :src=\"currentImage\" />\r\n        </OverlayPanel>\r\n    </span>\r\n    <DataTable\r\n        ref=\"dt\"\r\n        :value=\"templates\"\r\n        v-model:selection=\"selectedGalleryItems\"\r\n        v-model:filters=\"filters\"\r\n        class=\"p-datatable-sm kn-table\"\r\n        dataKey=\"id\"\r\n        :paginator=\"true\"\r\n        :rows=\"10\"\r\n        paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n        :rowsPerPageOptions=\"[10, 15, 20]\"\r\n        responsiveLayout=\"stack\"\r\n        breakpoint=\"960px\"\r\n        :currentPageReportTemplate=\"$t('common.table.footer.paginated', { first: '{first}', last: '{last}', totalRecords: '{totalRecords}' })\"\r\n        :globalFilterFields=\"['name', 'type', 'tags']\"\r\n    >\r\n        <template #header>\r\n            <div class=\"table-header\">\r\n                <span class=\"p-input-icon-left\">\r\n                    <i class=\"pi pi-search\" />\r\n                    <InputText class=\"kn-material-input\" type=\"text\" v-model=\"filters['global'].value\" :placeholder=\"$t('common.search')\" badge=\"0\" />\r\n                </span>\r\n            </div>\r\n        </template>\r\n        <template #empty>\r\n            {{ $t('common.info.noDataFound') }}\r\n        </template>\r\n        <template #loading>\r\n            {{ $t('common.info.dataLoading') }}\r\n        </template>\r\n\r\n        <Column selectionMode=\"multiple\" :exportable=\"false\" :style=\"importExportDescriptor.export.gallery.column.selectionMode.style\"></Column>\r\n        <Column field=\"name\" :header=\"$t(importExportDescriptor.export.gallery.column.name.header)\" :sortable=\"true\" :style=\"importExportDescriptor.export.gallery.column.name.style\"></Column>\r\n        <Column field=\"type\" :header=\"$t(importExportDescriptor.export.gallery.column.type.header)\" :sortable=\"true\" :style=\"importExportDescriptor.export.gallery.column.type.style\">\r\n            <template #body=\"{ data }\">\r\n                <Tag :style=\"importExportDescriptor.iconTypesMap[data.type].style\"> {{ data.type.toUpperCase() }} </Tag>\r\n            </template>\r\n        </Column>\r\n\r\n        <Column field=\"tags\" :header=\"$t(importExportDescriptor.export.gallery.column.tags.header)\" :sortable=\"true\" :style=\"importExportDescriptor.export.gallery.column.tags.style\">\r\n            <template #body=\"{ data }\">\r\n                <span class=\"p-float-label kn-material-input\">\r\n                    <Tag class=\"importExportTags p-mr-1\" v-for=\"(tag, index) in data.tags\" v-bind:key=\"index\" rounded :value=\"tag\"> </Tag>\r\n                </span>\r\n            </template>\r\n        </Column>\r\n        <Column field=\"image\" :header=\"$t(importExportDescriptor.export.gallery.column.image.header)\" :style=\"importExportDescriptor.export.gallery.column.image.style\">\r\n            <template #body=\"{ data }\">\r\n                <span @click=\"togglePreview($event, data.id)\">\r\n                    <i class=\"fas fa-image\" v-if=\"data.image && data.image.length > 0\" />\r\n                </span>\r\n            </template>\r\n        </Column>\r\n    </DataTable>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport { AxiosResponse } from 'axios'\r\nimport Column from 'primevue/column'\r\nimport DataTable from 'primevue/datatable'\r\nimport { FilterMatchMode, FilterOperator } from 'primevue/api'\r\nimport InputText from 'primevue/inputtext'\r\nimport OverlayPanel from 'primevue/overlaypanel'\r\n\r\nimport Tag from 'primevue/tag'\r\nimport importExportDescriptor from '../ImportExportDescriptor.json'\r\nimport { IGalleryTemplate } from '@/modules/managers/galleryManagement/GalleryManagement'\r\n\r\nexport default defineComponent({\r\n    name: 'import-export-gallery',\r\n    components: { Column, DataTable, InputText, OverlayPanel, Tag },\r\n    props: { selectedItems: Object },\r\n    data() {\r\n        return {\r\n            currentImage: '',\r\n            filters: {},\r\n            importExportDescriptor: importExportDescriptor,\r\n            product: {},\r\n            selectedGalleryItems: [],\r\n            templates: [] as Array<IGalleryTemplate>,\r\n            FUNCTIONALITY: 'gallery'\r\n        }\r\n    },\r\n    created() {\r\n        this.filters = {\r\n            global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n            name: { operator: FilterOperator.OR, constraints: [{ value: null, matchMode: FilterMatchMode.STARTS_WITH }] },\r\n            type: { operator: FilterOperator.OR, constraints: [{ value: null, matchMode: FilterMatchMode.STARTS_WITH }] },\r\n            tags: { operator: FilterOperator.OR, constraints: [{ value: null, matchMode: FilterMatchMode.CONTAINS }] }\r\n        }\r\n        this.loadAllTemplates()\r\n    },\r\n    emits: ['onItemSelected', 'update:loading'],\r\n    methods: {\r\n        loadAllTemplates(): void {\r\n            this.$emit('update:loading', true)\r\n            this.axios\r\n                .get(import.meta.env.VITE_API_PATH + '1.0/widgetgallery')\r\n                .then((response: AxiosResponse<any>) => {\r\n                    this.templates = response.data\r\n                    if (this.selectedItems) {\r\n                        this.selectedGalleryItems = this.selectedItems[this.FUNCTIONALITY].filter((element) => {\r\n                            return this.templates.filter((el) => el.id === element.id).length == 1\r\n                        })\r\n                    }\r\n                })\r\n                .catch((error) => console.error(error))\r\n                .finally(() => {\r\n                    this.$emit('update:loading', false)\r\n                })\r\n        },\r\n        togglePreview(event, id) {\r\n            this.currentImage = ''\r\n\r\n            this.$http.get(import.meta.env.VITE_API_PATH + '1.0/widgetgallery/image/' + id).then(\r\n                (response: AxiosResponse<any>) => {\r\n                    console.log(response)\r\n                    this.currentImage = response.data\r\n                },\r\n                (error) => console.error(error)\r\n            )\r\n            // eslint-disable-next-line\r\n            // @ts-ignore\r\n            this.$refs.op.toggle(event)\r\n        }\r\n    },\r\n    watch: {\r\n        selectedGalleryItems(newSelectedGalleryItems, oldSelectedGalleryItems) {\r\n            if (oldSelectedGalleryItems != newSelectedGalleryItems) {\r\n                this.$emit('onItemSelected', { items: this.selectedGalleryItems, functionality: this.FUNCTIONALITY })\r\n            }\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.imageOverlayPanel {\r\n    position: absolute !important;\r\n    top: 0px !important;\r\n    left: 0px !important;\r\n}\r\n\r\n.importExportTags {\r\n    background-color: var(--kn-color-default);\r\n}\r\n\r\n.p-paginator p-component p-paginator-bottom {\r\n    height: 50px;\r\n}\r\n</style>\r\n"],"names":["Column","DataTable","InputText","OverlayPanel","Tag","_createElementVNode","_openBlock","_createElementBlock","_Fragment","_createVNode","_withCtx","_normalizeStyle","_renderList","_createBlock","_createCommentVNode"],"mappings":"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"}