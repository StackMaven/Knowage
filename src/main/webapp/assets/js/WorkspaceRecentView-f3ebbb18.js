import{_ as S,d as T,n as V,l as L,q as W,s as R,ae as I,r as s,y as B,o as n,c as f,f as o,w as r,g as c,t as u,h as l,A as m,D,a as M,z as E,V as N,B as y,C as q}from"./index-1e676509.js";import{D as F,W as z}from"./WorkspaceCard-6d9360d0.js";import{m as O}from"./WorkspaceDescriptor-d4693b02.js";import"./sidebar.esm-2131cfd1.js";import"./contextmenu.esm-4301c9fe.js";const j=T({components:{DataTable:V,Column:L,DetailSidebar:F,WorkspaceCard:z,Message:W},emits:["showMenu","toggleDisplayView","execute"],props:{toggleCardDisplay:{type:Boolean}},data(){return{mainDescriptor:O,loading:!1,showDetailSidebar:!1,recentDocumentsList:[],filteredDocuments:[],selectedDocument:{},searchWord:""}},setup(){return{store:R()}},created(){this.getRecentDocuments()},methods:{getRecentDocuments(){return this.loading=!0,this.$http.get("/knowage/restful-services/2.0/recents").then(e=>{this.recentDocumentsList=[...e.data],this.filteredDocuments=[...this.recentDocumentsList]}).finally(()=>this.loading=!1)},formatDate(e){return I(e,{dateStyle:"short",timeStyle:"short"})},executeRecent(e){this.$emit("execute",e)},toggleDisplayView(){this.$emit("toggleDisplayView")},showSidebar(e){this.selectedDocument=e,this.showDetailSidebar=!0},searchItems(){setTimeout(()=>{this.searchWord.trim().length?this.filteredDocuments=this.recentDocumentsList.filter(e=>{var a,p;return((a=e.documentType)==null?void 0:a.toLowerCase().includes(this.searchWord.toLowerCase()))||((p=e.documentName)==null?void 0:p.toLowerCase().includes(this.searchWord.toLowerCase()))}):this.filteredDocuments=[...this.recentDocumentsList]},250)}}}),A={class:"kn-overflow"},K=c(" \u2002 "),U={key:1,class:"p-grid p-m-2","data-test":"card-container"};function G(e,a,p,H,J,Q){const i=s("Button"),b=s("Toolbar"),g=s("InputText"),d=s("Column"),k=s("DataTable"),w=s("Message"),C=s("WorkspaceCard"),v=s("DetailSidebar"),$=B("tooltip");return n(),f(y,null,[o(b,{class:"kn-toolbar kn-toolbar--secondary"},{start:r(()=>[o(i,{id:"showSidenavIcon",icon:"fas fa-bars",class:"p-button-text p-button-rounded p-button-plain",onClick:a[0]||(a[0]=t=>e.$emit("showMenu"))}),c(" "+u(e.$t("workspace.menuLabels.recentDocuments")),1)]),end:r(()=>[e.toggleCardDisplay?(n(),l(i,{key:0,icon:"fas fa-list",class:"p-button-text p-button-rounded p-button-plain",onClick:e.toggleDisplayView},null,8,["onClick"])):m("",!0),e.toggleCardDisplay?m("",!0):(n(),l(i,{key:1,icon:"fas fa-th-large",class:"p-button-text p-button-rounded p-button-plain",onClick:e.toggleDisplayView},null,8,["onClick"]))]),_:1}),o(g,{class:"kn-material-input p-m-2",style:D(e.mainDescriptor.style.filterInput),modelValue:e.searchWord,"onUpdate:modelValue":a[1]||(a[1]=t=>e.searchWord=t),type:"text",placeholder:e.$t("common.search"),onInput:e.searchItems,"data-test":"search-input"},null,8,["style","modelValue","placeholder","onInput"]),M("div",A,[e.toggleCardDisplay?m("",!0):(n(),l(k,{key:0,class:"p-datatable-sm kn-table p-mx-2",value:e.filteredDocuments,loading:e.loading,dataKey:"objId",responsiveLayout:"stack",breakpoint:"600px","data-test":"recent-table"},{empty:r(()=>[c(u(e.$t("common.info.noDataFound")),1)]),default:r(()=>[o(d,{field:"documentType",header:e.$t("importExport.gallery.column.type"),sortable:!0},null,8,["header"]),o(d,{field:"documentName",header:e.$t("importExport.gallery.column.name"),sortable:!0},null,8,["header"]),o(d,{field:"requestTime",header:e.$t("managers.functionalitiesManagement.execution"),sortable:!0},{body:r(({data:t})=>[c(u(e.formatDate(t.requestTime)),1)]),_:1},8,["header"]),o(d,{style:D(e.mainDescriptor.style.iconColumn)},{header:r(()=>[K]),body:r(t=>[E(o(i,{icon:"fas fa-info-circle",class:"p-button-link",onClick:N(h=>e.showSidebar(t.data),["stop"]),"data-test":"info-button-"+t.data.documentName},null,8,["onClick","data-test"]),[[$,e.$t("workspace.myModels.showInfo"),void 0,{left:!0}]]),o(i,{icon:"fas fa-play-circle",class:"p-button-link",onClick:h=>e.executeRecent(t.data)},null,8,["onClick"])]),_:1},8,["style"])]),_:1},8,["value","loading"])),e.toggleCardDisplay?(n(),f("div",U,[e.filteredDocuments.length===0?(n(),l(w,{key:0,class:"kn-flex p-m-2",severity:"info",closable:!1,style:D(e.mainDescriptor.style.message)},{default:r(()=>[c(u(e.$t("common.info.noDataFound")),1)]),_:1},8,["style"])):(n(!0),f(y,{key:1},q(e.filteredDocuments,(t,h)=>(n(),l(C,{key:h,viewType:"recent",document:t,onExecuteRecent:e.executeRecent,onOpenSidebar:e.showSidebar},null,8,["document","onExecuteRecent","onOpenSidebar"]))),128))])):m("",!0)]),o(v,{visible:e.showDetailSidebar,viewType:"recent",document:e.selectedDocument,onExecuteRecent:e.executeRecent,onClose:a[2]||(a[2]=t=>e.showDetailSidebar=!1),"data-test":"detail-sidebar"},null,8,["visible","document","onExecuteRecent"])],64)}var x=S(j,[["render",G]]);export{x as default};
//# sourceMappingURL=WorkspaceRecentView-f3ebbb18.js.map
