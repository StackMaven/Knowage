{"version":3,"file":"BusinessModelCatalogue-a1260007.js","sources":["../../../../modules/managers/businessModelCatalogue/BusinessModelCatalogue.vue"],"sourcesContent":["<template>\r\n    <div class=\"kn-page\">\r\n        <div class=\"kn-page-content p-grid p-m-0\">\r\n            <div class=\"p-col-4 p-sm-4 p-md-3 p-p-0 kn-page\">\r\n                <Toolbar class=\"kn-toolbar kn-toolbar--primary\">\r\n                    <template #start>\r\n                        {{ $t('managers.businessModelManager.title') }}\r\n                    </template>\r\n                    <template #end>\r\n                        <FabButton icon=\"fas fa-plus\" @click=\"showForm\" data-test=\"new-button\" />\r\n                    </template>\r\n                </Toolbar>\r\n                <ProgressBar mode=\"indeterminate\" class=\"kn-progress-bar\" v-if=\"loading\" data-test=\"progress-bar\" />\r\n                <KnListBox :options=\"businessModelList\" :settings=\"businessModelCatalogueDescriptor.knListSettings\" @click=\"showForm\" @delete.stop=\"deleteBusinessModelConfirm\" />\r\n            </div>\r\n\r\n            <div class=\"p-col-8 p-sm-8 p-md-9 p-p-0 p-m-0 kn-page\">\r\n                <KnHint :title=\"'managers.businessModelManager.title'\" :hint=\"'managers.businessModelManager.hint'\" v-if=\"showHint\" data-test=\"bm-hint\"></KnHint>\r\n                <router-view @touched=\"touched = true\" @closed=\"onClose\" @inserted=\"pageReload\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport { iBusinessModel } from './BusinessModelCatalogue'\r\nimport { AxiosResponse } from 'axios'\r\nimport businessModelCatalogueDescriptor from './BusinessModelCatalogueDescriptor.json'\r\nimport FabButton from '@/components/UI/KnFabButton.vue'\r\nimport KnListBox from '@/components/UI/KnListBox/KnListBox.vue'\r\nimport KnHint from '@/components/UI/KnHint.vue'\r\nimport mainStore from '../../../App.store'\r\n\r\nexport default defineComponent({\r\n    name: 'business-model-catalogue',\r\n    components: {\r\n        FabButton,\r\n        KnListBox,\r\n        KnHint\r\n    },\r\n    data() {\r\n        return {\r\n            businessModelCatalogueDescriptor,\r\n            businessModelList: [] as iBusinessModel[],\r\n            showHint: true,\r\n            touched: false,\r\n            loading: false\r\n        }\r\n    },\r\n    setup() {\r\n        const store = mainStore()\r\n        return { store }\r\n    },\r\n    async created() {\r\n        if (this.$route.path !== '/business-model-catalogue') {\r\n            this.showHint = false\r\n        }\r\n        await this.loadAllCatalogues()\r\n    },\r\n    methods: {\r\n        async loadAllCatalogues() {\r\n            this.loading = true\r\n            await this.$http\r\n                .get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + '2.0/businessmodels')\r\n                .then((response: AxiosResponse<any>) => (this.businessModelList = response.data))\r\n                .finally(() => (this.loading = false))\r\n        },\r\n        showForm(event: any) {\r\n            this.showHint = false\r\n            const path = event.item ? `/business-model-catalogue/${event.item.id}` : '/business-model-catalogue/new-business-model'\r\n            if (!this.touched) {\r\n                this.$router.push(path)\r\n            } else {\r\n                this.$confirm.require({\r\n                    message: this.$t('common.toast.unsavedChangesMessage'),\r\n                    header: this.$t('common.toast.unsavedChangesHeader'),\r\n                    icon: 'pi pi-exclamation-triangle',\r\n                    accept: () => {\r\n                        this.touched = false\r\n                        this.$router.push(path)\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        deleteBusinessModelConfirm(event: any) {\r\n            this.$confirm.require({\r\n                message: this.$t('common.toast.deleteMessage'),\r\n                header: this.$t('common.toast.deleteTitle'),\r\n                icon: 'pi pi-exclamation-triangle',\r\n                accept: () => {\r\n                    this.touched = false\r\n                    this.deleteBusinessModel(event.item.id)\r\n                }\r\n            })\r\n        },\r\n        async deleteBusinessModel(businessModelId: number) {\r\n            await this.$http.delete(import.meta.env.VITE_RESTFUL_SERVICES_PATH + '2.0/businessmodels/' + businessModelId).then(() => {\r\n                this.store.setInfo({\r\n                    title: this.$t('common.toast.deleteTitle'),\r\n                    msg: this.$t('common.toast.deleteSuccess')\r\n                })\r\n                this.$router.replace('/business-model-catalogue')\r\n                this.loadAllCatalogues()\r\n            })\r\n        },\r\n        pageReload() {\r\n            this.touched = false\r\n            this.loadAllCatalogues()\r\n        },\r\n        onClose() {\r\n            this.touched = false\r\n            this.showHint = true\r\n        }\r\n    }\r\n})\r\n</script>\r\n"],"names":["FabButton","mainStore","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_withCtx","_createBlock","_createCommentVNode","_withModifiers"],"mappings":"ylBAkCA,KAAK,GAAa,EAAa,CAC3B,KAAM,2BACN,WAAY,CAAA,UACRA,EACA,YACA,QACJ,EACA,MAAO,CACI,MAAA,CACH,mCACA,kBAAmB,CAAC,EACpB,SAAU,GACV,QAAS,GACT,QAAS,EAAA,CAEjB,EACA,OAAQ,CAEJ,MAAO,CAAA,MADOC,GACC,CACnB,EACA,KAAM,UAAU,CACR,AAAA,KAAK,OAAO,OAAS,6BACrB,MAAK,SAAW,IAEpB,KAAM,MAAK,mBACf,EACA,QAAS,CACL,KAAM,oBAAoB,CACtB,KAAK,QAAU,GACT,KAAA,MAAK,MACN,IAAI,8CAAiE,EACrE,KAAK,AAAC,GAAkC,KAAK,kBAAoB,EAAS,IAAK,EAC/E,QAAQ,IAAO,KAAK,QAAU,EAAM,CAC7C,EACA,SAAS,EAAY,CACjB,KAAK,SAAW,GAChB,KAAM,GAAO,EAAM,KAAO,6BAA6B,EAAM,KAAK,KAAO,+CACrE,AAAC,KAAK,QAGN,KAAK,SAAS,QAAQ,CAClB,QAAS,KAAK,GAAG,oCAAoC,EACrD,OAAQ,KAAK,GAAG,mCAAmC,EACnD,KAAM,6BACN,OAAQ,IAAM,CACV,KAAK,QAAU,GACV,KAAA,QAAQ,KAAK,CAAI,CAC1B,CAAA,CACH,EAVI,KAAA,QAAQ,KAAK,CAAI,CAY9B,EACA,2BAA2B,EAAY,CACnC,KAAK,SAAS,QAAQ,CAClB,QAAS,KAAK,GAAG,4BAA4B,EAC7C,OAAQ,KAAK,GAAG,0BAA0B,EAC1C,KAAM,6BACN,OAAQ,IAAM,CACV,KAAK,QAAU,GACV,KAAA,oBAAoB,EAAM,KAAK,EAAE,CAC1C,CAAA,CACH,CACL,EACA,KAAM,qBAAoB,EAAyB,CACzC,KAAA,MAAK,MAAM,OAAO,gDAAqE,CAAe,EAAE,KAAK,IAAM,CACrH,KAAK,MAAM,QAAQ,CACf,MAAO,KAAK,GAAG,0BAA0B,EACzC,IAAK,KAAK,GAAG,4BAA4B,CAAA,CAC5C,EACI,KAAA,QAAQ,QAAQ,2BAA2B,EAChD,KAAK,kBAAkB,CAAA,CAC1B,CACL,EACA,YAAa,CACT,KAAK,QAAU,GACf,KAAK,kBAAkB,CAC3B,EACA,SAAU,CACN,KAAK,QAAU,GACf,KAAK,SAAW,EACpB,CACJ,CACJ,CAAC,KAjHY,MAAM,cACF,MAAM,mCAaN,MAAM,sOAdfC,GAkBM,EAAAC,EAAA,MAAA,EAAA,CAAAC,EAjBF,MAWM,EAAA,CAAAA,EAHQ,MAPD,EAAA,CAAAC,EACW,EACmC,CAAA,MAAA,gCAAA,EAAA,CAAA,MAAAC,EAAA,IAAA,oDAExC,CAAA,EAAA,IACPA,EAAyE,IAAA,CAAAD,EAAzD,EAAa,CAAE,KAAA,cAAiB,QAAU,EAAA,SAAA,YAAA,uCAGF,CAAA,EAAA,EAAA,QAAAH,KAAAK,EAAA,EAAA,CAAnD,IAAI,EAAiB,KAAK,gBAAkC,MAAA,kBAAA,YAAA,kBACzEC,EAAkK,GAAA,EAAA,EAAAH,EAA7I,EAAiB,CAAG,QAAQ,EAAE,kBAAkD,SAAO,EAAQ,iCAAA,eAAG,QAAM,EAAA,SAAA,SAAAI,EAAA,EAAA,2BAAA,CAAA,MAAA,CAAA,sDAGjI,CAAA,EACsHL,EAAA,MAAA,EAAA,CAAA,EAAA,SAAAF,KAAAK,EAAA,EAAA,CAAzG,IAAK,EAA0C,MAAM,sCAAsD,KAAA,qCAAA,YAAA,qCACpHC,EAAkF,GAAA,EAAA,EAA7DH,EAAA,EAAA,CAAmB,UAAQ,EAAO,IAAA,GAAA,GAAA,AAAA,GAAA,EAAA,QAAA,IAAG,SAAQ,EAAE,QAAA,WAAA,EAAA"}