import{u as h,c as x,K as z}from"./KnValidatonMessages-ebe48c72.js";import{d as w,i as y,_ as M,r as n,y as _,o as g,h as A,w as d,f as o,g as f,t as r,z as L,a as t,G as m,s as N,c as P,A as T,al as S}from"./index-1e676509.js";import{s as V}from"./textarea.esm-32051d54.js";const I="managers.workspaceManagement.dataPreparation.dataset.hint",U={configuration:[{fieldName:"name",validators:[{key:"required"},{key:"maximumCharacters",validator:{params:{max:100},type:"maxLength"}},{key:"regex",validator:{type:"extendedAlphanumericRegex"}}]},{fieldName:"description",validators:[{key:"maximumCharacters",validator:{params:{max:500},type:"maxLength"}},{key:"regex",validator:{type:"extendedAlphanumericRegex"}}]}]};var B={hint:I,validations:U};const O=w({name:"edit-prepared-dataset-dialog",components:{Dialog:y,Textarea:V},props:{visible:Boolean,dataset:Object},emits:["save","cancel"],data(){return{newDataset:{},v$:h(),validationDescriptor:B}},validations(){return{newDataset:x("newDataset",this.validationDescriptor.validations.configuration)}},updated(){this.dataset&&(this.newDataset.label=this.dataset.label,this.newDataset.name=this.dataset.name,this.newDataset.description=this.dataset.description)},methods:{apply(){this.$emit("save",this.newDataset),this.clearForm()},cancel(){this.$emit("cancel"),this.clearForm()},clearForm(){this.newDataset={}}},computed:{saveButtonDisabled(){return this.v$.$invalid}}}),j={class:"p-grid p-m-0"},R={class:"p-col-12"},X={class:"p-d-flex"},Q={class:"p-float-label kn-flex p-mr-2"},K={class:"kn-material-input-label",for:"label"},J={class:"p-float-label"},Y={class:"kn-material-input-label",for:"label"};function F(e,a,i,C,D,$){const v=n("Toolbar"),c=n("InputText"),s=n("KnValidationMessages"),b=n("Textarea"),k=n("Button"),l=n("Dialog"),E=_("t");return g(),A(l,{class:"p-fluid kn-dialog--toolbar--primary dataPreparationSaveDialog",visible:e.visible,modal:!0,closable:!1},{header:d(()=>[o(v,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-0 p-col-12"},{start:d(()=>[f(r(e.$t("workspace.myData.editPreparedDataset")),1)]),_:1})]),footer:d(()=>[o(k,{class:"kn-button kn-button--secondary",label:e.$t("common.cancel"),onClick:e.cancel},null,8,["label","onClick"]),L(o(k,{class:"kn-button kn-button--primary",onClick:e.apply,disabled:e.saveButtonDisabled},null,8,["onClick","disabled"]),[[E,"common.apply"]])]),default:d(()=>[t("div",j,[t("div",R,[t("div",X,[t("span",Q,[o(c,{class:m(["kn-material-input",{"p-invalid":e.v$.newDataset.name.$invalid}]),type:"text",modelValue:e.v$.newDataset.name.$model,"onUpdate:modelValue":a[0]||(a[0]=u=>e.v$.newDataset.name.$model=u),modelModifiers:{trim:!0},maxLength:"100"},null,8,["modelValue","class"]),t("label",K,r(e.$t("managers.workspaceManagement.dataPreparation.dataset.name")),1),o(s,{vComp:e.v$.newDataset.name,additionalTranslateParams:{fieldName:e.$t("managers.configurationManagement.headers.name")}},null,8,["vComp","additionalTranslateParams"])])]),t("span",J,[o(b,{class:m(["kn-material-input p-mb-1",{"p-invalid":e.v$.newDataset.description.$invalid}]),type:"text",modelValue:e.v$.newDataset.description.$model,"onUpdate:modelValue":a[1]||(a[1]=u=>e.v$.newDataset.description.$model=u),modelModifiers:{trim:!0},rows:"3",maxLength:"10000"},null,8,["modelValue","class"]),t("label",Y,r(e.$t("managers.workspaceManagement.dataPreparation.dataset.description")),1),o(s,{vComp:e.v$.newDataset.description,additionalTranslateParams:{fieldName:e.$t("managers.configurationManagement.headers.description")}},null,8,["vComp","additionalTranslateParams"])])])])]),_:1},8,["visible"])}var ye=M(O,[["render",F]]);const H="160",q={style:{width:"60vw"}},G="50",W="50",Z={dataset:[{fieldName:"label",validators:[{key:"required"},{key:"regex",validator:{type:"extendedAlphanumericRegex"}}]},{fieldName:"name",validators:[{key:"required"},{key:"regex",validator:{type:"extendedAlphanumericRegex"}}]}]};var p={descriptionMaxLength:H,dialog:q,labelMaxLength:G,nameMaxLength:W,validations:Z};const ee=w({name:"workspace-repository-move-dialog",components:{Dialog:y,KnValidationMessages:z},props:{visible:{type:Boolean},propDataset:{type:Object}},emits:["close","clone"],data(){return{v$:h(),workspaceDataCloneDialogDescriptor:p,dataset:{}}},validations(){return{dataset:x("dataset",p.validations.dataset)}},watch:{propDataset(){this.loadDataset()}},computed:{labelHelp(){var e,a;return((a=(e=this.dataset.label)==null?void 0:e.length)!=null?a:"0")+" / "+p.labelMaxLength},nameHelp(){var e,a;return((a=(e=this.dataset.name)==null?void 0:e.length)!=null?a:"0")+" / "+p.nameMaxLength},descriptionHelp(){var e,a;return((a=(e=this.dataset.description)==null?void 0:e.length)!=null?a:"0")+" / "+p.descriptionMaxLength},buttonDisabled(){return this.v$.$invalid}},setup(){return{store:N()}},created(){this.loadDataset()},methods:{loadDataset(){this.propDataset&&(this.dataset={...this.propDataset,id:"",dsVersions:[],usedByNDocs:0,name:"CLONE_"+this.propDataset.name,label:"CLONE_"+this.propDataset.label,description:this.propDataset.description?"CLONED "+this.propDataset.description:"",scopeCd:"USER"},this.dataset.owner=this.store.$state.user.userId,this.dataset.catTypeId&&delete this.dataset.catTypeId)},closeDialog(){this.loadDataset(),this.v$.$reset(),this.$emit("close")},cloneDataset(){this.$emit("clone",this.dataset),this.loadDataset(),this.v$.$reset()}}}),ae={key:0},te={class:"p-m-4"},oe={class:"p-float-label"},re={for:"label",class:"kn-material-input-label"},ne={class:"p-d-flex p-flex-row p-jc-end"},ie={class:"input-help p-m-0"},de={class:"p-m-4"},le={class:"p-float-label"},ce={for:"name",class:"kn-material-input-label"},se={class:"p-d-flex p-flex-row p-jc-end"},pe={class:"input-help p-m-0"},be={class:"p-m-4"},ke={class:"p-float-label p-mb-2"},fe={for:"description",class:"kn-material-input-label"},me={class:"p-d-flex p-flex-row p-jc-end"},ve={class:"input-help p-m-0"},ue={class:"p-d-flex p-flex-row p-jc-end"};function ge(e,a,i,C,D,$){const v=n("Toolbar"),c=n("InputText"),s=n("KnValidationMessages"),b=n("Button"),k=n("Dialog");return g(),A(k,{class:"p-fluid kn-dialog--toolbar--primary",contentStyle:e.workspaceDataCloneDialogDescriptor.dialog.style,visible:e.visible,modal:!0,closable:!1},{header:d(()=>[o(v,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-0 p-col-12"},{start:d(()=>[f(r(e.$t("workspace.myData.clonedDatasetWizard")),1)]),_:1})]),footer:d(()=>[t("div",ue,[o(b,{class:"kn-button kn-button--primary",onClick:e.closeDialog},{default:d(()=>[f(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"]),o(b,{class:"kn-button kn-button--primary",onClick:e.cloneDataset,disabled:e.buttonDisabled},{default:d(()=>[f(r(e.$t("common.save")),1)]),_:1},8,["onClick","disabled"])])]),default:d(()=>[e.dataset?(g(),P("form",ae,[t("div",te,[t("span",oe,[o(c,{id:"label",class:m(["kn-material-input",{"p-invalid":e.v$.dataset.label.$invalid&&e.v$.dataset.label.$dirty}]),maxLength:e.workspaceDataCloneDialogDescriptor.labelMaxLength,modelValue:e.v$.dataset.label.$model,"onUpdate:modelValue":a[0]||(a[0]=l=>e.v$.dataset.label.$model=l),modelModifiers:{trim:!0},onBlur:a[1]||(a[1]=l=>e.v$.dataset.label.$touch())},null,8,["maxLength","modelValue","class"]),t("label",re,r(e.$t("common.label"))+" * ",1)]),t("div",ne,[o(s,{vComp:e.v$.dataset.label,additionalTranslateParams:{fieldName:e.$t("common.label")}},null,8,["vComp","additionalTranslateParams"]),t("p",ie,r(e.labelHelp),1)])]),t("div",de,[t("span",le,[o(c,{id:"name",class:m(["kn-material-input",{"p-invalid":e.v$.dataset.name.$invalid&&e.v$.dataset.name.$dirty}]),maxLength:e.workspaceDataCloneDialogDescriptor.nameMaxLength,modelValue:e.v$.dataset.name.$model,"onUpdate:modelValue":a[2]||(a[2]=l=>e.v$.dataset.name.$model=l),modelModifiers:{trim:!0},onBlur:a[3]||(a[3]=l=>e.v$.dataset.name.$touch())},null,8,["maxLength","modelValue","class"]),t("label",ce,r(e.$t("common.name"))+" * ",1)]),t("div",se,[o(s,{vComp:e.v$.dataset.name,additionalTranslateParams:{fieldName:e.$t("common.name")}},null,8,["vComp","additionalTranslateParams"]),t("p",pe,r(e.nameHelp),1)])]),t("div",be,[t("span",ke,[o(c,{id:"description",class:"kn-material-input",maxLength:e.workspaceDataCloneDialogDescriptor.descriptionMaxLength,modelValue:e.dataset.description,"onUpdate:modelValue":a[4]||(a[4]=l=>e.dataset.description=l),modelModifiers:{trim:!0}},null,8,["maxLength","modelValue"]),t("label",fe,r(e.$t("common.description")),1)]),t("div",me,[t("p",ve,r(e.descriptionHelp),1)])])])):T("",!0)]),_:1},8,["contentStyle","visible"])}var Me=M(ee,[["render",ge],["__scopeId","data-v-3dcef310"]]);const Ae=S("workspaceStore",{state(){return{dataPreparation:{loadedAvros:[],loadingAvros:[],avroDatasets:[]}}},actions:{addToLoadedAvros(e){let a=e.toString();this.dataPreparation.loadedAvros.indexOf(a)==-1&&this.dataPreparation.loadedAvros.push(a)},addToAvroDatasets(e){let a=e.toString();this.dataPreparation.avroDatasets.indexOf(a)==-1&&this.dataPreparation.avroDatasets.push(a)},addToLoadingAvros(e){let a=e.toString();this.dataPreparation.loadingAvros.indexOf(a)==-1&&this.dataPreparation.loadingAvros.push(a)},removeFromLoadedAvros(e){let a=e.toString(),i=this.dataPreparation.loadedAvros.indexOf(a);i>=0&&this.dataPreparation.loadedAvros.splice(i,1)},removeFromLoadingAvros(e){let a=e.toString(),i=this.dataPreparation.loadingAvros.indexOf(a);i>=0&&this.dataPreparation.loadingAvros.splice(i,1)},setAvroDatasets(e){this.dataPreparation.avroDatasets=e},setLoadedAvros(e){this.dataPreparation.loadedAvros=e}},getters:{isAvroLoaded(e){return a=>e.dataPreparation.loadedAvros.indexOf(a.toString())>=0},isAvroLoading(e){return a=>e.dataPreparation.loadingAvros.indexOf(a.toString())>=0},isAvroReady(e){return a=>!!(a&&e.dataPreparation.avroDatasets.indexOf(a.toString())>=0||(a&&e.dataPreparation.avroDatasets.indexOf(a.toString()))>=0)}}});export{ye as E,Me as W,Ae as w};
//# sourceMappingURL=Workspace.store-75fa566b.js.map
