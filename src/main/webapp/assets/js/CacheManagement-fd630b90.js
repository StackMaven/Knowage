import{d as C,ad as T,l as _,n as I,s as M,_ as A,r as i,o as c,h as g,w as d,f as n,g as k,t as r,c as y,C as D,D as E,B as S,a5 as z,aE as L,a as e,A as x,aS as N}from"./index-1e676509.js";const O=[{field:"name",header:"managers.cacheManagement.name",style:{width:"30%"}},{field:"signature",header:"managers.cacheManagement.signature",style:{width:"30%"}},{field:"table",header:"managers.cacheManagement.table",style:{width:"20%"}},{field:"dimension",header:"managers.cacheManagement.dimension",style:{width:"140px"}}],P={iconColumn:{style:{"text-align":"end"}}};var B={columns:O,table:P};const F=C({name:"dataset-table-card",components:{Card:T,Column:_,DataTable:I},props:{datasetMetadataList:{type:Array,required:!0},loading:{type:Boolean}},emits:["deleted"],data(){return{datasetTableCardDescriptor:B,datasets:[]}},computed:{cleanAllDisabled(){return this.datasets.length===0}},watch:{datasetMetadataList(){this.loadDatasets()}},setup(){return{store:M()}},created(){this.loadDatasets()},methods:{loadDatasets(){this.datasets=this.datasetMetadataList},cleanAllConfirm(){this.$confirm.require({message:this.$t("managers.cacheManagement.cleanAllMessage"),header:this.$t("common.toast.deleteTitle"),icon:"pi pi-exclamation-triangle",accept:()=>this.cleanAll()})},async cleanAll(){await this.$http.delete("/knowage/restful-services/1.0/cacheee").then(()=>this.emitDeleteSuccess())},deleteDatasetConfirm(a){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteTitle"),icon:"pi pi-exclamation-triangle",accept:()=>this.deleteDataset(a)})},async deleteDataset(a){await this.$http.put("/knowage/restful-services/1.0/cacheee/deleteItems",{namesArray:[a]}).then(()=>this.emitDeleteSuccess())},emitDeleteSuccess(){this.store.setInfo({title:this.$t("common.toast.deleteTitle"),msg:this.$t("common.toast.deleteSuccess")}),this.$emit("deleted")}}});function V(a,t,p,f,s,w){const b=i("Button"),m=i("Toolbar"),u=i("Column"),l=i("DataTable"),h=i("Card");return c(),g(h,{class:"p-m-2"},{header:d(()=>[n(m,{class:"kn-toolbar kn-toolbar--primary"},{start:d(()=>[k(r(a.$t("managers.cacheManagement.addRemoveDataset")),1)]),end:d(()=>[n(b,{class:"kn-button p-button-text p-button-rounded",disabled:a.cleanAllDisabled,onClick:a.cleanAllConfirm,"data-test":"clean-all-button"},{default:d(()=>[k(r(a.$t("managers.cacheManagement.cleanAll")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),content:d(()=>[n(l,{value:a.datasets,loading:a.loading,class:"p-datatable-sm kn-table",dataKey:"signature",responsiveLayout:"stack",breakpoint:"960px","data-test":"dataset-table"},{empty:d(()=>[k(r(a.$t("managers.cacheManagement.metadataUnavailable")),1)]),loading:d(()=>[k(r(a.$t("common.info.dataLoading")),1)]),default:d(()=>[(c(!0),y(S,null,D(a.datasetTableCardDescriptor.columns,v=>(c(),g(u,{field:v.field,header:a.$t(v.header),key:v.field,style:E(v.style),class:"kn-truncated"},null,8,["field","header","style"]))),128)),n(u,{style:E(a.datasetTableCardDescriptor.table.iconColumn.style)},{body:d(v=>[n(b,{icon:"pi pi-trash",class:"p-button-link",onClick:o=>a.deleteDatasetConfirm(v.data.signature),"data-test":"delete-button"},null,8,["onClick"])]),_:1},8,["style"])]),_:1},8,["value","loading"])]),_:1})}var U=A(F,[["render",V],["__scopeId","data-v-10f7af12"]]);const R=[{label:"managers.cacheManagement.none",value:"NONE"},{label:"managers.cacheManagement.every_10_mins",value:"EVERY_10_MINS"},{label:"managers.cacheManagement.every_15_mins",value:"EVERY_15_MINS"},{label:"managers.cacheManagement.every_20_mins",value:"EVERY_20_MINS"},{label:"managers.cacheManagement.every_30_mins",value:"EVERY_30_MINS"},{label:"managers.cacheManagement.hourly",value:"HOURLY"},{label:"managers.cacheManagement.daily",value:"DAILY"},{label:"managers.cacheManagement.weekly",value:"WEEKLY"},{label:"managers.cacheManagement.monthly",value:"MONTHLY"},{label:"managers.cacheManagement.yearly",value:"YEARLY"}];var G={schedulingTypes:R};const H=C({name:"general-settings-card",components:{Dropdown:z,InputNumber:L},props:{item:{type:Object,required:!0},datasources:{type:Array,required:!0},selectedDatasource:{value:[Object,null],required:!0}},emits:["inserted"],data(){return{generalSettingsCardDescriptor:G,settings:{},datasource:{},datasourceOptions:[]}},watch:{item(){this.loadSettings()},datasources(){this.loadDatasources()},selectedDatasource(){this.loadDatasource()}},setup(){return{store:M()}},created(){this.loadSettings(),this.loadDatasources(),this.loadDatasource()},methods:{loadSettings(){this.settings={...this.item}},loadDatasources(){this.datasourceOptions=this.datasources},loadDatasource(){this.datasource={...this.selectedDatasource}},async save(){await this.removeCache(),await this.saveDatasource(),await this.saveConfigurationOptions(),this.store.setInfo({title:this.$t("common.toast.success"),msg:this.$t("common.toast.updateTitle")}),this.$emit("inserted")},async saveConfigurationOptions(){const a=[{label:"SPAGOBI.CACHE.NAMEPREFIX",value:this.settings.prefixForCacheTablesName},{label:"SPAGOBI.CACHE.SPACE_AVAILABLE",value:this.settings.spaceAvailable*1048576},{label:"SPAGOBI.CACHE.LIMIT_FOR_CLEAN",value:this.settings.limitForClean},{label:"SPAGOBI.CACHE.SCHEDULING_FULL_CLEAN",value:this.settings.schedulingFullClean.value,id:this.settings.schedulingFullClean.value},{label:"SPAGOBI.CACHE.LIMIT_FOR_STORE",value:this.settings.cacheLimitForStore},{label:"SPAGOBI.CACHE.DS_LAST_ACCESS_TTL",value:this.settings.lastAccessTtl},{label:"SPAGOBI.CACHE.CREATE_AND_PERSIST_TABLE.TIMEOUT",value:this.settings.createAndPersistTimeout},{label:"SPAGOBI.WORKMANAGER.SQLDBCACHE.TIMEOUT",value:this.settings.sqldbCacheTimeout},{label:"SPAGOBI.CACHE.HAZELCAST.TIMEOUT",value:this.settings.hazelcastTimeout},{label:"SPAGOBI.CACHE.HAZELCAST.LEASETIME",value:this.settings.hazelcastLeaseTime}];await this.$http.put("/knowage/restful-services/2.0/configs/conf",{configurations:a}).then().catch(t=>{console.log(t)})},async saveDatasource(){await this.$http.put("/knowage/restful-services/2.0/datasources",{...this.datasource,writeDefault:!0})},async removeCache(){await this.$http.get("/knowage/restful-services/1.0/cacheee/remove")},onInputNumberChange(a,t){this.settings[a]=t},discardChanges(){this.loadSettings(),this.loadDatasource()},formatCacheDimension(a){return isNaN(a)?0:a<1024?a.toFixed(2)+" MB":(a/=1024,a<1024?"~"+a.toFixed(2)+" GB":(a/=1024,"~"+a.toFixed(2)+" TB"))}}}),q={class:"p-fluid p-m-2"},Y={class:"p-fluid p-formgrid p-grid"},j={class:"p-col-6"},X={id:"prefix-input-container",class:"p-field"},Q={class:"p-float-label field-container"},J={for:"prefixForCacheTablesName",class:"kn-material-input-label"},K={class:"p-field"},Z={for:"limitForClean",class:"kn-material-input-label small-label"},W={class:"p-field"},aa={for:"schedulingFullClean",class:"kn-material-input-label small-label"},ta={key:0},ea={class:"p-field"},oa={for:"lastAccessTtl",class:"kn-material-input-label small-label"},ra={class:"p-field"},na={for:"createAndPersistTimeout",class:"kn-material-input-label small-label"},da={class:"p-col-6"},ia={class:"p-field"},la={for:"spaceAvailable",class:"kn-material-input-label small-label"},sa={id:"spaceAvailable-hint"},ca={class:"p-field"},pa={for:"cacheLimitForStore",class:"kn-material-input-label small-label"},ba={class:"p-field"},fa={for:"datasource",class:"kn-material-input-label small-label"},ka={key:0},ua={class:"p-field"},va={for:"sqldbCacheTimeout",class:"kn-material-input-label small-label"},ma={class:"p-field"},ga={for:"hazelcastTimeout",class:"kn-material-input-label small-label"},ha={class:"p-field"},wa={for:"hazelcastLeaseTime",class:"kn-material-input-label small-label"};function xa(a,t,p,f,s,w){const b=i("Button"),m=i("Toolbar"),u=i("InputText"),l=i("InputNumber"),h=i("Dropdown"),v=i("Card");return c(),g(v,{class:"p-m-2"},{header:d(()=>[n(m,{class:"kn-toolbar kn-toolbar--primary p-toolbar-group-right"},{start:d(()=>[k(r(a.$t("managers.cacheManagement.generalSettings")),1)]),end:d(()=>[n(b,{class:"kn-button p-button-text p-button-rounded",onClick:a.save,"data-test":"save-button"},{default:d(()=>[k(r(a.$t("common.save")),1)]),_:1},8,["onClick"]),n(b,{class:"kn-button p-button-text p-button-rounded",onClick:a.discardChanges,"data-test":"reset-button"},{default:d(()=>[k(r(a.$t("managers.cacheManagement.discard")),1)]),_:1},8,["onClick"])]),_:1})]),content:d(()=>[e("form",q,[e("div",Y,[e("div",j,[e("div",X,[e("span",Q,[n(u,{id:"prefixForCacheTablesName",class:"kn-material-input",type:"text",modelValue:a.settings.prefixForCacheTablesName,"onUpdate:modelValue":t[0]||(t[0]=o=>a.settings.prefixForCacheTablesName=o),modelModifiers:{trim:!0},"data-test":"prefix-input"},null,8,["modelValue"]),e("label",J,r(a.$t("managers.cacheManagement.prefixForCacheTablesName")),1)])]),e("div",K,[e("span",null,[e("label",Z,r(a.$t("managers.cacheManagement.maximumPercentOfCacheCleaningQuota")),1),n(l,{id:"limitForClean",inputClass:"kn-material-input",modelValue:a.settings.limitForClean,"onUpdate:modelValue":t[1]||(t[1]=o=>a.settings.limitForClean=o),min:0,max:100,useGrouping:!1,onInput:t[2]||(t[2]=o=>a.onInputNumberChange("limitForClean",o.value)),"data-test":"clean-limit-input"},null,8,["modelValue"])])]),e("div",W,[e("span",null,[e("label",aa,r(a.$t("managers.cacheManagement.frequencyOfCleaningDaemon")),1),n(h,{id:"schedulingFullClean",class:"kn-material-input",modelValue:a.settings.schedulingFullClean,"onUpdate:modelValue":t[3]||(t[3]=o=>a.settings.schedulingFullClean=o),options:a.generalSettingsCardDescriptor.schedulingTypes},{value:d(o=>[o.value?(c(),y("div",ta,[e("span",null,r(o.value.value),1)])):x("",!0)]),option:d(o=>[e("div",null,[e("span",null,r(a.$t(o.option.label)),1)])]),_:1},8,["modelValue","options"])])]),e("div",ea,[e("span",null,[e("label",oa,r(a.$t("managers.cacheManagement.ttlForCachedDataset")),1),n(l,{id:"lastAccessTtl",inputClass:"kn-material-input",modelValue:a.settings.lastAccessTtl,"onUpdate:modelValue":t[4]||(t[4]=o=>a.settings.lastAccessTtl=o),useGrouping:!1,onInput:t[5]||(t[5]=o=>a.onInputNumberChange("lastAccessTtl",o.value)),"data-test":"last-access-ttl-input"},null,8,["modelValue"])])]),e("div",ra,[e("span",null,[e("label",na,r(a.$t("managers.cacheManagement.timeToCreateTempTable")),1),n(l,{id:"createAndPersistTimeout",inputClass:"kn-material-input",modelValue:a.settings.createAndPersistTimeout,"onUpdate:modelValue":t[6]||(t[6]=o=>a.settings.createAndPersistTimeout=o),useGrouping:!1,onInput:t[7]||(t[7]=o=>a.onInputNumberChange("createAndPersistTimeout",o.value)),"data-test":"timeout-input"},null,8,["modelValue"])])])]),e("div",da,[e("div",ia,[e("span",null,[e("label",la,r(a.$t("managers.cacheManagement.totalBytesAvailableForCache")),1),n(l,{id:"spaceAvailable",inputClass:"kn-material-input",modelValue:a.settings.spaceAvailable,"onUpdate:modelValue":t[8]||(t[8]=o=>a.settings.spaceAvailable=o),min:0,useGrouping:!1,onInput:t[9]||(t[9]=o=>a.onInputNumberChange("spaceAvailable",o.value)),"data-test":"space-available-input"},null,8,["modelValue"]),e("small",sa,r(a.formatCacheDimension(a.settings.spaceAvailable)),1)])]),e("div",ca,[e("span",null,[e("label",pa,r(a.$t("managers.cacheManagement.cacheDimensionSingleDataset")),1),n(l,{id:"cacheLimitForStore",inputClass:"kn-material-input",modelValue:a.settings.cacheLimitForStore,"onUpdate:modelValue":t[10]||(t[10]=o=>a.settings.cacheLimitForStore=o),min:0,max:100,useGrouping:!1,onInput:t[11]||(t[11]=o=>a.onInputNumberChange("cacheLimitForStore",o.value)),"data-test":"cache-limit-input"},null,8,["modelValue"])])]),e("div",ba,[e("span",null,[e("label",fa,r(a.$t("managers.cacheManagement.targetDatasource")),1),n(h,{id:"datasource",class:"kn-material-input",modelValue:a.datasource,"onUpdate:modelValue":t[12]||(t[12]=o=>a.datasource=o),options:a.datasourceOptions},{value:d(o=>[o.value?(c(),y("div",ka,[e("span",null,r(o.value.label),1)])):x("",!0)]),option:d(o=>[e("div",null,[e("span",null,r(o.option.label),1)])]),_:1},8,["modelValue","options"])])]),e("div",ua,[e("span",null,[e("label",va,r(a.$t("managers.cacheManagement.timeToLock")),1),n(l,{id:"sqldbCacheTimeout",inputClass:"kn-material-input",modelValue:a.settings.sqldbCacheTimeout,"onUpdate:modelValue":t[13]||(t[13]=o=>a.settings.sqldbCacheTimeout=o),useGrouping:!1,onInput:t[14]||(t[14]=o=>a.onInputNumberChange("sqldbCacheTimeout",o.value)),"data-test":"sqldb-timeout-input"},null,8,["modelValue"])])]),e("div",ma,[e("span",null,[e("label",ga,r(a.$t("managers.cacheManagement.hazelcastTimeToLock")),1),n(l,{id:"hazelcastTimeout",inputClass:"kn-material-input",modelValue:a.settings.hazelcastTimeout,"onUpdate:modelValue":t[15]||(t[15]=o=>a.settings.hazelcastTimeout=o),useGrouping:!1,onInput:t[16]||(t[16]=o=>a.onInputNumberChange("hazelcastTimeout",o.value)),"data-test":"hazelcast-timeout-input"},null,8,["modelValue"])])]),e("div",ha,[e("span",null,[e("label",wa,r(a.$t("managers.cacheManagement.hazelcastTimeToReleaseLock")),1),n(l,{id:"hazelcastLeaseTime",inputClass:"kn-material-input",modelValue:a.settings.hazelcastLeaseTime,"onUpdate:modelValue":t[17]||(t[17]=o=>a.settings.hazelcastLeaseTime=o),useGrouping:!1,onInput:t[18]||(t[18]=o=>a.onInputNumberChange("hazelcastLeaseTime",o.value)),"data-test":"hazelcast-lease-time-input"},null,8,["modelValue"])])])])])])]),_:1})}var ya=A(H,[["render",xa],["__scopeId","data-v-009d9716"]]),$={name:"Chart",emits:["select","loaded"],props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150}},chart:null,watch:{data:{handler(){this.reinit()},deep:!0},type(){this.reinit()},options(){this.reinit()}},mounted(){this.initChart()},beforeUnmount(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart(){N(()=>import("./auto.esm-0afac146.js"),[]).then(a=>{this.chart&&(this.chart.destroy(),this.chart=null),a&&a.default&&(this.chart=new a.default(this.$refs.canvas,{type:this.type,data:this.data,options:this.options,plugins:this.plugins})),this.$emit("loaded",this.chart)})},getCanvas(){return this.$canvas},getChart(){return this.chart},getBase64Image(){return this.chart.toBase64Image()},refresh(){this.chart&&this.chart.update()},reinit(){this.initChart()},onCanvasClick(a){if(this.chart){const t=this.chart.getElementsAtEventForMode(a,"nearest",{intersect:!0},!1),p=this.chart.getElementsAtEventForMode(a,"dataset",{intersect:!0},!1);t&&t[0]&&p&&this.$emit("select",{originalEvent:a,element:t[0],dataset:p})}},generateLegend(){if(this.chart)return this.chart.generateLegend()}}};const Ca={class:"p-chart"},Aa=["width","height"];function Ma(a,t,p,f,s,w){return c(),y("div",Ca,[e("canvas",{ref:"canvas",width:p.width,height:p.height,onClick:t[0]||(t[0]=b=>w.onCanvasClick(b))},null,8,Aa)])}function Ea(a,t){t===void 0&&(t={});var p=t.insertAt;if(!(!a||typeof document=="undefined")){var f=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",p==="top"&&f.firstChild?f.insertBefore(s,f.firstChild):f.appendChild(s),s.styleSheet?s.styleSheet.cssText=a:s.appendChild(document.createTextNode(a))}}var Ta=`
.p-chart {
    position: relative;
}
`;Ea(Ta);$.render=Ma;const $a=C({name:"runtime-information-card",components:{Card:T,Chart:$},props:{item:{type:Object,required:!0},chartData:{type:Object,required:!0}},emits:["refresh"],data(){return{cache:{},cacheData:this.loadChart()}},watch:{item(){this.loadCache()},chartData(){this.loadChart()}},computed:{totalMemory(){return(this.cache.totalMemory/1048576).toFixed(2)+" MB"},availableMemory(){return(this.cache.availableMemory/1048576).toFixed(2)+" MB"}},created(){this.loadCache()},methods:{loadCache(){this.cache={...this.item}},loadChart(){this.cacheData={labels:[this.$t("managers.cacheManagement.availableMemory"),this.$t("managers.cacheManagement.usedMemory")],datasets:[{backgroundColor:["#43749e","#bbd6ed"],data:this.chartData}]}},refresh(){this.$emit("refresh")}}}),_a={class:"p-d-flex p-flex-column"},Ia={class:"kn-flex"},Da={class:"kn-flex p-d-flex p-flex-row p-justify-center"},Sa={style:{position:"relative",height:"20rem",width:"20rem"}};function za(a,t,p,f,s,w){const b=i("Button"),m=i("Toolbar"),u=i("Chart"),l=i("Card");return c(),g(l,{class:"p-m-2"},{header:d(()=>[n(m,{class:"kn-toolbar kn-toolbar--primary"},{start:d(()=>[k(r(a.$t("managers.cacheManagement.runtimeInformationTitle")),1)]),end:d(()=>[n(b,{icon:"pi pi-refresh",class:"p-button-text p-button-rounded p-button-plain",onClick:a.refresh},null,8,["onClick"])]),_:1})]),content:d(()=>[e("div",_a,[e("div",Ia,[e("p",null,r(a.$t("managers.cacheManagement.cacheEnabled"))+": "+r(a.cache.cleaningEnabled),1),e("p",null,r(a.$t("managers.cacheManagement.totalMemory"))+": "+r(a.totalMemory),1),e("p",null,r(a.$t("managers.cacheManagement.availableMemory"))+": "+r(a.availableMemory),1),e("p",null,r(a.$t("managers.cacheManagement.numberOfCachedObjects"))+": "+r(a.cache.cachedObjectsCount),1),e("p",null,r(a.$t("managers.cacheManagement.availableMemoryPercentage"))+": "+r(a.cache.availableMemoryPercentage)+"%",1)]),e("div",Da,[e("div",Sa,[n(u,{type:"pie",data:a.cacheData,"data-test":"chart"},null,8,["data"])])])])]),_:1})}var La=A($a,[["render",za]]);const Na=C({name:"cache-management",components:{DatasetTableCard:U,GeneralSettingsCard:ya,RuntimeInformationCard:La},data(){return{cache:{},loading:!1,datasetMetadataLoading:!0,settingsPendingCount:10,chartData:[],datasetMetadataList:[],settings:{},selectedDatasource:null,datasources:[]}},computed:{showProgressBar(){return this.loading||this.settingsPendingCount!=0}},setup(){return{store:M()}},async created(){this.loadPage()},methods:{loadCache(){this.$http.get("/knowage/restful-services/1.0/cacheee").then(a=>{this.cache=a.data,this.chartData=[this.cache.availableMemoryPercentage,100-this.cache.availableMemoryPercentage]})},loadSettings(){this.settings={},this.settingsPendingCount=10,this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.CACHE.NAMEPREFIX").then(a=>this.settings.prefixForCacheTablesName=a.data.valueCheck).finally(()=>this.settingsPendingCount--),this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.CACHE.LIMIT_FOR_CLEAN").then(a=>this.settings.limitForClean=+a.data.valueCheck).finally(()=>this.settingsPendingCount--),this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.CACHE.SCHEDULING_FULL_CLEAN").then(a=>this.settings.schedulingFullClean={label:a.data.valueCheck,value:a.data.valueCheck}).finally(()=>this.settingsPendingCount--),this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.CACHE.DS_LAST_ACCESS_TTL").then(a=>this.settings.lastAccessTtl=+a.data.valueCheck).finally(()=>this.settingsPendingCount--),this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.CACHE.CREATE_AND_PERSIST_TABLE.TIMEOUT").then(a=>this.settings.createAndPersistTimeout=+a.data.valueCheck).finally(()=>this.settingsPendingCount--),this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.CACHE.SPACE_AVAILABLE").then(a=>this.settings.spaceAvailable=+a.data.valueCheck/1048576).finally(()=>this.settingsPendingCount--),this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.CACHE.LIMIT_FOR_STORE").then(a=>this.settings.cacheLimitForStore=+a.data.valueCheck).finally(()=>this.settingsPendingCount--),this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.WORKMANAGER.SQLDBCACHE.TIMEOUT").then(a=>this.settings.sqldbCacheTimeout=+a.data.valueCheck).finally(()=>this.settingsPendingCount--),this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.CACHE.HAZELCAST.TIMEOUT").then(a=>this.settings.hazelcastTimeout=+a.data.valueCheck).finally(()=>this.settingsPendingCount--),this.$http.get("/knowage/restful-services/2.0/configs/label/SPAGOBI.CACHE.HAZELCAST.LEASETIME").then(a=>this.settings.hazelcastLeaseTime=+a.data.valueCheck).finally(()=>this.settingsPendingCount--)},async loadDataSources(){this.loading=!0,await this.$http.get("/knowage/restful-services/2.0/datasources/?type=cache").then(a=>{this.datasources=[],a.data.map(t=>{t.readOnly===!1&&this.datasources.push(t),t.writeDefault===!0&&(this.selectedDatasource=t)})}).finally(()=>this.loading=!1),this.selectedDatasource===null&&this.store.setError({title:this.$t("managers.cacheManagement.noDefaultDatasetTitle"),msg:this.$t("managers.cacheManagement.noDefaultDataset")})},loadDatasetsMetadata(){this.datasetMetadataLoading=!0,this.$http.get("/knowage/restful-services/1.0/cacheee/meta").then(a=>this.datasetMetadataList=a.data).finally(()=>this.datasetMetadataLoading=!1)},async loadPage(){await this.loadDataSources(),this.loadCache(),this.loadSettings(),this.loadDatasetsMetadata()},pageReload(){this.loadPage()},onRefresh(){this.loadCache(),this.loadDatasetsMetadata()}}}),Oa={class:"cache-management kn-page"},Pa={class:"p-d-flex p-flex-wrap kn-page-content"},Ba={class:"p-col-4 p-sm-12 p-md-4 p-p-0"},Fa={class:"p-col-8 p-sm-12 p-md-8 p-p-0"},Va={class:"p-col-12 p-sm-12 p-p-0"};function Ua(a,t,p,f,s,w){const b=i("Toolbar"),m=i("ProgressBar"),u=i("RuntimeInformationCard"),l=i("GeneralSettingsCard"),h=i("DatasetTableCard");return c(),y("div",Oa,[n(b,{class:"kn-toolbar kn-toolbar--primary"},{start:d(()=>[k(r(a.$t("managers.cacheManagement.title")),1)]),_:1}),a.showProgressBar?(c(),g(m,{key:0,mode:"indeterminate",class:"kn-progress-bar","data-test":"progress-bar"})):x("",!0),e("div",Pa,[e("div",Ba,[a.selectedDatasource?(c(),g(u,{key:0,item:a.cache,chartData:a.chartData,onRefresh:a.onRefresh},null,8,["item","chartData","onRefresh"])):x("",!0)]),e("div",Fa,[a.settingsPendingCount==0?(c(),g(l,{key:0,item:a.settings,datasources:a.datasources,selectedDatasource:a.selectedDatasource,onInserted:a.pageReload},null,8,["item","datasources","selectedDatasource","onInserted"])):x("",!0)]),e("div",Va,[n(h,{datasetMetadataList:a.datasetMetadataList,loading:a.datasetMetadataLoading,onDeleted:a.loadDatasetsMetadata},null,8,["datasetMetadataList","loading","onDeleted"])])])])}var Ga=A(Na,[["render",Ua]]);export{Ga as default};
//# sourceMappingURL=CacheManagement-fd630b90.js.map
