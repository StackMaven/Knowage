import{f as h}from"./filterHelper-a723991a.js";import{d as f,n as E,l as z,_ as v,r as t,y as D,o as i,h as k,w as n,g as d,t as c,f as a,a as u,c as g,C as T,z as S,B as U,aj as R,A as $}from"./index-1e676509.js";const B={uppercase:{"text-transform":"uppercase"}};var w={style:B};const L=f({name:"behavioural-model-lineage",components:{DataTable:E,Column:z},props:{tableData:{type:Array,required:!0},headerTitle:String,dataType:String,loading:Boolean},data(){return{descriptor:w,filterFields:["name","label"],columns:[{field:"name",header:"common.label"},{field:"label",header:"common.name"}],filters:{global:[h]},selectedRow:{}}},created(){},methods:{}}),N={id:"search-container",class:"p-input-icon-left p-m-2"},I=u("i",{class:"pi pi-search"},null,-1),X={class:"kn-truncated"};function Q(o,e,x,y,M,A){const s=t("Toolbar"),b=t("InputText"),p=t("Column"),l=t("DataTable"),C=D("tooltip");return i(),k(l,{class:"p-datatable-sm kn-table bml-table kn-flex",value:o.tableData,selection:o.selectedRow,"onUpdate:selection":e[1]||(e[1]=r=>o.selectedRow=r),selectionMode:"single",dataKey:"id",responsiveLayout:"scroll",filters:o.filters,"onUpdate:filters":e[2]||(e[2]=r=>o.filters=r),globalFilterFields:o.filterFields,paginator:!0,rows:25,loading:o.loading,paginatorTemplate:"PrevPageLink PageLinks NextPageLink",stripedRows:"",metaKeySelection:!1,onRowSelect:e[3]||(e[3]=r=>o.$emit("rowSelected",r,o.dataType)),onRowUnselect:e[4]||(e[4]=r=>o.$emit("rowUnselected",r,o.dataType))},{empty:n(()=>[d(c(o.$t("common.info.noDataFound")),1)]),header:n(()=>[a(s,{class:"kn-toolbar kn-toolbar--secondary"},{start:n(()=>[d(c(o.headerTitle),1)]),_:1}),u("span",N,[I,a(b,{class:"kn-material-input",modelValue:o.filters.global.value,"onUpdate:modelValue":e[0]||(e[0]=r=>o.filters.global.value=r),type:"text",placeholder:o.$t("common.search"),"data-test":"filterInput"},null,8,["modelValue","placeholder"])])]),default:n(()=>[(i(!0),g(U,null,T(o.columns,r=>(i(),k(p,{field:r.field,header:o.$t(r.header),key:r.field,sortable:!0,headerStyle:o.descriptor.style.uppercase},{body:n(m=>[S((i(),g("span",X,[d(c(m.data[r.field]),1)])),[[C,m.data[r.field],void 0,{top:!0}]])]),_:2},1032,["field","header","headerStyle"]))),128))]),_:1},8,["value","selection","filters","globalFilterFields","loading"])}var _=v(L,[["render",Q]]);const F=f({name:"behavioural-model-lineage",components:{ProgressSpinner:R,BMLTable:_},data(){return{descriptor:w,loading:!1,filterFields:["name","label"],filters:{global:[h]},allLovs:[],selectedLov:{},allDrivers:[],allDocuments:[]}},created(){this.loadAllData()},methods:{async loadAllData(){this.loading=!0,await Promise.all([this.loadAllLovs(),this.loadAllDrivers(),this.loadAllDocuments()]).then(()=>this.loading=!1)},async loadAllLovs(){await this.$http.get("/knowage/restful-services/2.0/lovs/get/all/").then(o=>{this.allLovs=o.data})},async loadAllDrivers(){await this.$http.get("/knowage/restful-services/2.0/analyticalDrivers").then(o=>{this.allDrivers=o.data})},async loadAllDocuments(){await this.$http.get("/knowage/restful-services/2.0/documents").then(o=>{this.allDocuments=o.data})},onRowSelect(o,e){switch(e){case"lovs":this.filterByLovs(o.data);break;case"analyticalDrivers":this.filterByDrivers(o.data);break;case"documents":this.filterByDocuments(o.data);break}},onRowUnselect(){this.loadAllData()},async filterByLovs(o){this.loading=!0,await this.$http.get(`/knowage/restful-services/2.0/lovs/${o.id}/analyticalDrivers/`).then(e=>this.allDrivers=e.data),await this.$http.get(`/knowage/restful-services/2.0/lovs/${o.id}/documents/`).then(e=>this.allDocuments=e.data),this.loading=!1},async filterByDrivers(o){this.loading=!0,await this.$http.get(`/knowage/restful-services/2.0/analyticalDrivers/${o.id}/lovs/`).then(e=>this.allLovs=e.data),await this.$http.get(`/knowage/restful-services/2.0/analyticalDrivers/${o.id}/documents/`).then(e=>this.allDocuments=e.data),this.loading=!1},async filterByDocuments(o){this.loading=!0,await this.$http.get(`/knowage/restful-services/1.0/documents/${o.label}/lovs/`).then(e=>this.allLovs=e.data),await this.$http.get(`/knowage/restful-services/1.0/documents/${o.label}/analyticalDrivers/`).then(e=>this.allDrivers=e.data),this.loading=!1}}}),V={class:"kn-page"},j={id:"table-container",class:"p-d-flex p-flex-row bml-table-container"};function P(o,e,x,y,M,A){const s=t("ProgressSpinner"),b=t("Button"),p=t("Toolbar"),l=t("BMLTable");return i(),g("div",V,[o.loading?(i(),k(s,{key:0,class:"kn-progress-spinner"})):$("",!0),a(p,{class:"kn-toolbar kn-toolbar--primary"},{start:n(()=>[d(c(o.$t("managers.bml.title")),1)]),end:n(()=>[a(b,{icon:"fa-solid fa-arrows-rotate",class:"p-button-text p-button-rounded p-button-plain",onClick:o.loadAllData},null,8,["onClick"])]),_:1}),u("div",j,[a(l,{tableData:o.allLovs,headerTitle:o.$t("managers.bml.lovsTitle"),loading:o.loading,dataType:"lovs",onRowSelected:o.onRowSelect,onRowUnselected:o.onRowUnselect},null,8,["tableData","headerTitle","loading","onRowSelected","onRowUnselected"]),a(l,{tableData:o.allDrivers,headerTitle:o.$t("managers.bml.drivers"),loading:o.loading,dataType:"analyticalDrivers",onRowSelected:o.onRowSelect,onRowUnselected:o.onRowUnselect},null,8,["tableData","headerTitle","loading","onRowSelected","onRowUnselected"]),a(l,{tableData:o.allDocuments,headerTitle:o.$t("managers.datasetManagement.documents"),loading:o.loading,dataType:"documents",onRowSelected:o.onRowSelect,onRowUnselected:o.onRowUnselect},null,8,["tableData","headerTitle","loading","onRowSelected","onRowUnselected"])])])}var Y=v(F,[["render",P]]);export{Y as default};
//# sourceMappingURL=BehaviouralModelLineage-fb58d56b.js.map
