import{_ as h,d as u,X as g,s as v,r as s,o as l,c as b,a as n,f as o,w as r,g as L,t as $,h as k,A as C}from"./index-1e676509.js";import{K as y}from"./KnListBox-94855720.js";import"./menu.esm-6bee86d0.js";const w=["itypeCd","label","name"],_={DATASET:"fas fa-database",FIX_LOV:"fas fa-list",JAVA_CLASS:"fab fa-java",QUERY:"fas fa-table",SCRIPT:"fab fa-js-square"},S={avatar:{property:"itypeCd",values:{DATASET:{icon:"fas fa-database",style:{"background-color":"#4caf50",color:"white"}},FIX_LOV:{icon:"fas fa-list",style:{"background-color":"#4caf50",color:"white"}},JAVA_CLASS:{icon:"fab fa-java",style:{"background-color":"#4caf50",color:"white"}},QUERY:{icon:"fas fa-table",style:{"background-color":"#c2185b",color:"white"}},SCRIPT:{icon:"fab fa-js-square",style:{"background-color":"#ffc107",color:"white"}}}},buttons:[{emits:"delete",icon:"fas fa-trash-alt",label:"common.delete"}],defaultSortField:"label",filterFields:["label","name","itypeCd"],interaction:{parameterLabel:"id",parameterValue:"id",path:"edit-lov",type:"router"},sortFields:["label","name","itypeCd"]};var T={filterFields:w,iconTypesMap:_,knListSettings:S};const B=u({name:"lovs-management",components:{FabButton:g,KnListBox:y},data(){return{lovsManagementDescriptor:T,lovsList:[],loading:!1,touched:!1}},setup(){return{store:v()}},async created(){await this.loadLovs()},methods:{async loadLovs(){this.touched=!1,this.loading=!0,await this.$http.get("/knowage/restful-services/2.0/lovs/get/all").then(e=>{this.lovsList=e.data,this.lovsList.sort((t,i)=>t.label.toUpperCase()>i.label.toUpperCase()?1:-1)}).finally(()=>this.loading=!1)},showForm(e){const t=e.id?`/lovs-management/${e.id}`:"/lovs-management/new-lov";this.touched?this.$confirm.require({message:this.$t("common.toast.unsavedChangesMessage"),header:this.$t("common.toast.unsavedChangesHeader"),icon:"pi pi-exclamation-triangle",accept:()=>{this.touched=!1,this.$router.push(t)}}):this.$router.push(t)},deleteLovConfirm(e){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteTitle"),icon:"pi pi-exclamation-triangle",accept:()=>{this.touched=!1,this.deleteLov(e.item.id)}})},async deleteLov(e){await this.$http.delete(`/knowage/restful-services/2.0/lovs/delete/${e}`).then(()=>{this.store.setInfo({title:this.$t("common.toast.deleteTitle"),msg:this.$t("common.toast.deleteSuccess")}),this.$router.push("/lovs-management"),this.loadLovs()}).catch(t=>{this.store.setError({title:"Server error",msg:t.message})})}}}),F={class:"kn-page"},A={class:"kn-page-content p-grid p-m-0"},V={class:"kn-list--column p-col-4 p-sm-4 p-md-3 p-p-0"},M={class:"p-col-8 p-sm-8 p-md-9 p-p-0 p-m-0 kn-page"};function D(e,t,i,E,I,K){const c=s("FabButton"),d=s("Toolbar"),m=s("ProgressBar"),p=s("KnListBox"),f=s("router-view");return l(),b("div",F,[n("div",A,[n("div",V,[o(d,{class:"kn-toolbar kn-toolbar--primary"},{start:r(()=>[L($(e.$t("managers.lovsManagement.title")),1)]),end:r(()=>[o(c,{icon:"fas fa-plus",onClick:e.showForm,"data-test":"new-button"},null,8,["onClick"])]),_:1}),e.loading?(l(),k(m,{key:0,mode:"indeterminate",class:"kn-progress-bar","data-test":"progress-bar"})):C("",!0),o(p,{options:e.lovsList,settings:e.lovsManagementDescriptor.knListSettings,onDelete:t[0]||(t[0]=a=>e.deleteLovConfirm(a)),"data-test":"lovs-list"},null,8,["options","settings"])]),n("div",M,[o(f,{lovs:e.lovsList,onTouched:t[1]||(t[1]=a=>e.touched=!0),onClosed:t[2]||(t[2]=a=>e.touched=!1),onCreated:e.loadLovs},null,8,["lovs","onCreated"])])])])}var P=h(B,[["render",D]]);export{P as default};
//# sourceMappingURL=LovsManagement-a64774be.js.map
