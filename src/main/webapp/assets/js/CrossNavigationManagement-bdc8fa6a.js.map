{"version":3,"file":"CrossNavigationManagement-bdc8fa6a.js","sources":["../../../../modules/managers/crossNavigationManagement/CrossNavigationManagement.vue"],"sourcesContent":["<template>\r\n    <div class=\"kn-page\">\r\n        <div class=\"kn-page-content p-grid p-m-0\">\r\n            <div class=\"p-col-4 p-sm-4 p-md-3 p-p-0 kn-page\">\r\n                <Toolbar class=\"kn-toolbar kn-toolbar--primary\">\r\n                    <template #start>\r\n                        {{ $t('managers.crossNavigationManagement.title') }}\r\n                    </template>\r\n                    <template #end>\r\n                        <KnFabButton icon=\"fas fa-plus\" @click=\"showForm(-1)\" data-test=\"new-button\" />\r\n                    </template>\r\n                </Toolbar>\r\n                <ProgressBar mode=\"indeterminate\" class=\"kn-progress-bar\" v-if=\"loading\" data-test=\"progress-bar\" />\r\n                <KnListBox :options=\"navigations\" :settings=\"crossNavigationDescriptor.knListSettings\" @click=\"selected($event, item)\" @delete.stop=\"deleteTempateConfirm($event, item)\"></KnListBox>\r\n            </div>\r\n            <div class=\"p-col-8 p-sm-8 p-md-9 p-p-0 p-m-0 kn-router-view\">\r\n                <router-view @close=\"closeForm\" @touched=\"touched = true\" @saved=\"reload\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport { iNavigation } from './CrossNavigationManagement'\r\nimport { AxiosResponse } from 'axios'\r\nimport KnFabButton from '@/components/UI/KnFabButton.vue'\r\nimport KnListBox from '@/components/UI/KnListBox/KnListBox.vue'\r\nimport crossNavigationDescriptor from './CrossNavigationManagementDescriptor.json'\r\nimport mainStore from '../../../App.store'\r\n\r\nexport default defineComponent({\r\n    name: 'navigation-management',\r\n    components: { KnFabButton, KnListBox },\r\n    data() {\r\n        return {\r\n            navigations: [] as iNavigation[],\r\n            loading: false,\r\n            touched: false,\r\n            crossNavigationDescriptor\r\n        }\r\n    },\r\n    setup() {\r\n        const store = mainStore()\r\n        return { store }\r\n    },\r\n    created() {\r\n        this.loadAll()\r\n    },\r\n    methods: {\r\n        async loadAll() {\r\n            this.loading = true\r\n            await this.$http\r\n                .get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + '1.0/crossNavigation/listNavigation/')\r\n                .then((response: AxiosResponse<any>) => (this.navigations = response.data))\r\n                .finally(() => (this.loading = false))\r\n        },\r\n        selected(e, itemId) {\r\n            if (e.item && e.item.id) itemId = e.item.id\r\n            this.showForm(itemId)\r\n        },\r\n        deleteTempateConfirm(event: any): void {\r\n            this.$confirm.require({\r\n                message: this.$t('common.toast.deleteMessage'),\r\n                header: this.$t('common.toast.deleteTitle'),\r\n                icon: 'pi pi-exclamation-triangle',\r\n                accept: async () => await this.deleteTemplate(event.item.id)\r\n            })\r\n        },\r\n        async deleteTemplate(itemId: string) {\r\n            this.loading = true\r\n            await this.$http\r\n                .post(import.meta.env.VITE_RESTFUL_SERVICES_PATH + '1.0/crossNavigation/remove', \"{'id':\" + itemId + '}')\r\n                .then(async () => {\r\n                    this.store.setInfo({ title: this.$t('common.toast.deleteTitle'), msg: this.$t('common.toast.deleteSuccess') })\r\n                    await this.loadAll()\r\n                    if (itemId == this.$route.params.id) this.$router.push('/cross-navigation-management')\r\n                })\r\n                .catch((error) =>\r\n                    this.store.setError({\r\n                        title: this.$t('common.error.generic'),\r\n                        msg: error.message\r\n                    })\r\n                )\r\n            this.loading = false\r\n        },\r\n        showForm(id: number) {\r\n            const path = id !== -1 ? '/cross-navigation-management/' + id : '/cross-navigation-management/new-navigation'\r\n            if (!this.touched) {\r\n                this.$router.push(path)\r\n            } else {\r\n                this.$confirm.require({\r\n                    message: this.$t('common.toast.unsavedChangesMessage'),\r\n                    header: this.$t('common.toast.unsavedChangesHeader'),\r\n                    icon: 'pi pi-exclamation-triangle',\r\n                    accept: () => {\r\n                        this.touched = false\r\n                        this.$router.push(path)\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        closeForm() {\r\n            if (!this.touched) {\r\n                this.handleClose()\r\n            } else {\r\n                this.$confirm.require({\r\n                    message: this.$t('common.toast.unsavedChangesMessage'),\r\n                    header: this.$t('common.toast.unsavedChangesHeader'),\r\n                    icon: 'pi pi-exclamation-triangle',\r\n                    accept: () => {\r\n                        this.touched = false\r\n                        this.handleClose()\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        handleClose() {\r\n            this.$router.replace('/cross-navigation-management')\r\n        },\r\n        async reload(operation, name) {\r\n            await this.loadAll()\r\n            this.touched = false\r\n            if (operation === 'insert') {\r\n                let id = this.navigations.find((nav) => nav.name === name)?.id\r\n                this.$router.push('/cross-navigation-management/' + id)\r\n            }\r\n        }\r\n    }\r\n})\r\n</script>\r\n"],"names":["mainStore","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_withCtx","_createBlock","_createCommentVNode","_withModifiers"],"mappings":"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"}