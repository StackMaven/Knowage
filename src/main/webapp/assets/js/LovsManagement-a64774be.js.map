{"version":3,"file":"LovsManagement-a64774be.js","sources":["../../../../modules/managers/lovsManagement/LovsManagement.vue"],"sourcesContent":["<template>\r\n    <div class=\"kn-page\">\r\n        <div class=\"kn-page-content p-grid p-m-0\">\r\n            <div class=\"kn-list--column p-col-4 p-sm-4 p-md-3 p-p-0\">\r\n                <Toolbar class=\"kn-toolbar kn-toolbar--primary\">\r\n                    <template #start>\r\n                        {{ $t('managers.lovsManagement.title') }}\r\n                    </template>\r\n                    <template #end>\r\n                        <FabButton icon=\"fas fa-plus\" @click=\"showForm\" data-test=\"new-button\" />\r\n                    </template>\r\n                </Toolbar>\r\n                <ProgressBar mode=\"indeterminate\" class=\"kn-progress-bar\" v-if=\"loading\" data-test=\"progress-bar\" />\r\n                <KnListBox :options=\"lovsList\" :settings=\"lovsManagementDescriptor.knListSettings\" @delete=\"deleteLovConfirm($event)\" data-test=\"lovs-list\"></KnListBox>\r\n            </div>\r\n\r\n            <div class=\"p-col-8 p-sm-8 p-md-9 p-p-0 p-m-0 kn-page\">\r\n                <router-view :lovs=\"lovsList\" @touched=\"touched = true\" @closed=\"touched = false\" @created=\"loadLovs\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport { iLov } from './LovsManagement'\r\nimport { AxiosResponse } from 'axios'\r\nimport FabButton from '@/components/UI/KnFabButton.vue'\r\nimport KnListBox from '@/components/UI/KnListBox/KnListBox.vue'\r\nimport lovsManagementDescriptor from './LovsManagementDescriptor.json'\r\nimport mainStore from '../../../App.store'\r\n\r\nexport default defineComponent({\r\n    name: 'lovs-management',\r\n    components: { FabButton, KnListBox },\r\n    data() {\r\n        return {\r\n            lovsManagementDescriptor,\r\n            lovsList: [] as iLov[],\r\n            loading: false,\r\n            touched: false\r\n        }\r\n    },\r\n    setup() {\r\n        const store = mainStore()\r\n        return { store }\r\n    },\r\n    async created() {\r\n        await this.loadLovs()\r\n    },\r\n    methods: {\r\n        async loadLovs() {\r\n            this.touched = false\r\n            this.loading = true\r\n            await this.$http\r\n                .get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + '2.0/lovs/get/all')\r\n                .then((response: AxiosResponse<any>) => {\r\n                    this.lovsList = response.data\r\n                    this.lovsList.sort((a: iLov, b: iLov) => (a.label.toUpperCase() > b.label.toUpperCase() ? 1 : -1))\r\n                })\r\n                .finally(() => (this.loading = false))\r\n        },\r\n        showForm(event: any) {\r\n            const path = event.id ? `/lovs-management/${event.id}` : '/lovs-management/new-lov'\r\n            if (!this.touched) {\r\n                this.$router.push(path)\r\n            } else {\r\n                this.$confirm.require({\r\n                    message: this.$t('common.toast.unsavedChangesMessage'),\r\n                    header: this.$t('common.toast.unsavedChangesHeader'),\r\n                    icon: 'pi pi-exclamation-triangle',\r\n                    accept: () => {\r\n                        this.touched = false\r\n                        this.$router.push(path)\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        deleteLovConfirm(event) {\r\n            this.$confirm.require({\r\n                message: this.$t('common.toast.deleteMessage'),\r\n                header: this.$t('common.toast.deleteTitle'),\r\n                icon: 'pi pi-exclamation-triangle',\r\n                accept: () => {\r\n                    this.touched = false\r\n                    this.deleteLov(event.item.id)\r\n                }\r\n            })\r\n        },\r\n        async deleteLov(lovId: number) {\r\n            await this.$http\r\n                .delete(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `2.0/lovs/delete/${lovId}`)\r\n                .then(() => {\r\n                    this.store.setInfo({\r\n                        title: this.$t('common.toast.deleteTitle'),\r\n                        msg: this.$t('common.toast.deleteSuccess')\r\n                    })\r\n                    this.$router.push('/lovs-management')\r\n                    this.loadLovs()\r\n                })\r\n                .catch((error) => {\r\n                    this.store.setError({\r\n                        title: 'Server error',\r\n                        msg: error.message\r\n                    })\r\n                })\r\n        }\r\n    }\r\n})\r\n</script>\r\n"],"names":["FabButton","mainStore","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_withCtx","_createBlock","_createCommentVNode"],"mappings":"2mCAgCA,KAAK,GAAa,EAAa,CAC3B,KAAM,kBACN,WAAY,CAAA,UAAEA,EAAW,WAAU,EACnC,MAAO,CACI,MAAA,CACH,2BACA,SAAU,CAAC,EACX,QAAS,GACT,QAAS,EAAA,CAEjB,EACA,OAAQ,CAEJ,MAAO,CAAA,MADOC,GACC,CACnB,EACA,KAAM,UAAU,CACZ,KAAM,MAAK,UACf,EACA,QAAS,CACL,KAAM,WAAW,CACb,KAAK,QAAU,GACf,KAAK,QAAU,GACT,KAAA,MAAK,MACN,IAAI,4CAA+D,EACnE,KAAK,AAAC,GAAiC,CACpC,KAAK,SAAW,EAAS,KACzB,KAAK,SAAS,KAAK,CAAC,EAAS,IAAa,EAAE,MAAM,YAAY,EAAI,EAAE,MAAM,YAAY,EAAI,EAAI,EAAG,CACpG,CAAA,EACA,QAAQ,IAAO,KAAK,QAAU,EAAM,CAC7C,EACA,SAAS,EAAY,CACjB,KAAM,GAAO,EAAM,GAAK,oBAAoB,EAAM,KAAO,2BACrD,AAAC,KAAK,QAGN,KAAK,SAAS,QAAQ,CAClB,QAAS,KAAK,GAAG,oCAAoC,EACrD,OAAQ,KAAK,GAAG,mCAAmC,EACnD,KAAM,6BACN,OAAQ,IAAM,CACV,KAAK,QAAU,GACV,KAAA,QAAQ,KAAK,CAAI,CAC1B,CAAA,CACH,EAVI,KAAA,QAAQ,KAAK,CAAI,CAY9B,EACA,iBAAiB,EAAO,CACpB,KAAK,SAAS,QAAQ,CAClB,QAAS,KAAK,GAAG,4BAA4B,EAC7C,OAAQ,KAAK,GAAG,0BAA0B,EAC1C,KAAM,6BACN,OAAQ,IAAM,CACV,KAAK,QAAU,GACV,KAAA,UAAU,EAAM,KAAK,EAAE,CAChC,CAAA,CACH,CACL,EACA,KAAM,WAAU,EAAe,CACrB,KAAA,MAAK,MACN,OAAO,6CAAgE,GAAO,EAC9E,KAAK,IAAM,CACR,KAAK,MAAM,QAAQ,CACf,MAAO,KAAK,GAAG,0BAA0B,EACzC,IAAK,KAAK,GAAG,4BAA4B,CAAA,CAC5C,EACI,KAAA,QAAQ,KAAK,kBAAkB,EACpC,KAAK,SAAS,CAAA,CACjB,EACA,MAAM,AAAC,GAAU,CACd,KAAK,MAAM,SAAS,CAChB,MAAO,eACP,IAAK,EAAM,OAAA,CACd,CAAA,CACJ,CACT,CACJ,CACJ,CAAC,KA1GY,MAAM,cACF,MAAM,gCAaN,EAAA,CAAA,MAAM,gOAdfC,GAiBM,EAAAC,EAAA,MAAA,EAAA,CAAAC,EAhBF,MAWM,EAAA,CAAAA,EAHQ,MAPD,EAAA,CAAAC,EACW,EAC6B,CAAA,MAAA,gCAAA,EAAA,CAAA,MAAAC,EAAA,IAAA,8CAElC,CAAA,EAAA,IACPA,EAAyE,IAAA,CAAAD,EAAzD,EAAa,CAAE,KAAA,cAAiB,QAAU,EAAA,SAAA,YAAA,uCAGF,CAAA,EAAA,EAAA,QAAAH,KAAAK,EAAA,EAAA,CAAnD,IAAI,EAAiB,KAAK,gBAAkC,MAAA,kBAAA,YAAA,kBACzEC,EAAwJ,GAAA,EAAA,EAAAH,EAAnI,EAAQ,CAAG,QAAQ,EAAE,SAA0C,SAAM,EAAA,yBAAA,eAA4B,WAAU,IAAW,GAAA,GAAA,AAAA,GAAA,EAAA,iBAAA,CAAA,GAAA,YAAA,2CAG/I,CAAA,EAC4GD,EAAA,MAAA,EAAA,CAAAC,EAApF,EAAQ,CAAG,KAAO,EAAA,SAAmB,UAAM,eAAE,EAAO,QAAA,IAAW,SAAO,EAAE,IAAQ,GAAA,GAAA,AAAA,GAAA,EAAA,QAAA,IAAA,UAAA,EAAA"}