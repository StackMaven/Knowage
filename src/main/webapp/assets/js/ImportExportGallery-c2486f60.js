import{_ as M,d as A,l as C,n as E,O as I,F as s,x as f,r as c,o as p,c as k,a as d,f as e,w as r,g as v,t as m,D as i,B as u,C as z,h as T,A as N,p as D,b as O}from"./index-1e676509.js";import{s as P}from"./overlaypanel.esm-944aa237.js";import{s as S,i as _}from"./tag.esm-b36a6db8.js";const $=A({name:"import-export-gallery",components:{Column:C,DataTable:E,InputText:I,OverlayPanel:P,Tag:S},props:{selectedItems:Object},data(){return{currentImage:"",filters:{},importExportDescriptor:_,product:{},selectedGalleryItems:[],templates:[],FUNCTIONALITY:"gallery"}},created(){this.filters={global:{value:null,matchMode:s.CONTAINS},name:{operator:f.OR,constraints:[{value:null,matchMode:s.STARTS_WITH}]},type:{operator:f.OR,constraints:[{value:null,matchMode:s.STARTS_WITH}]},tags:{operator:f.OR,constraints:[{value:null,matchMode:s.CONTAINS}]}},this.loadAllTemplates()},emits:["onItemSelected","update:loading"],methods:{loadAllTemplates(){this.$emit("update:loading",!0),this.axios.get("/knowage-api/api/1.0/widgetgallery").then(a=>{this.templates=a.data,this.selectedItems&&(this.selectedGalleryItems=this.selectedItems[this.FUNCTIONALITY].filter(o=>this.templates.filter(n=>n.id===o.id).length==1))}).catch(a=>console.error(a)).finally(()=>{this.$emit("update:loading",!1)})},togglePreview(a,o){this.currentImage="",this.$http.get("/knowage-api/api/1.0/widgetgallery/image/"+o).then(n=>{console.log(n),this.currentImage=n.data},n=>console.error(n)),this.$refs.op.toggle(a)}},watch:{selectedGalleryItems(a,o){o!=a&&this.$emit("onItemSelected",{items:this.selectedGalleryItems,functionality:this.FUNCTIONALITY})}}}),U=a=>(D("data-v-8ad226fc"),a=a(),O(),a),L=["src"],R={class:"table-header"},F={class:"p-input-icon-left"},G=U(()=>d("i",{class:"pi pi-search"},null,-1)),B={class:"p-float-label kn-material-input"},V=["onClick"],X={key:0,class:"fas fa-image"};function Y(a,o,n,Q,j,J){const h=c("OverlayPanel"),x=c("InputText"),l=c("Column"),g=c("Tag"),w=c("DataTable");return p(),k(u,null,[d("span",null,[e(h,{ref:"op",class:"imageOverlayPanel"},{default:r(()=>[d("img",{src:a.currentImage},null,8,L)]),_:1},512)]),e(w,{ref:"dt",value:a.templates,selection:a.selectedGalleryItems,"onUpdate:selection":o[1]||(o[1]=t=>a.selectedGalleryItems=t),filters:a.filters,"onUpdate:filters":o[2]||(o[2]=t=>a.filters=t),class:"p-datatable-sm kn-table",dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[10,15,20],responsiveLayout:"stack",breakpoint:"960px",currentPageReportTemplate:a.$t("common.table.footer.paginated",{first:"{first}",last:"{last}",totalRecords:"{totalRecords}"}),globalFilterFields:["name","type","tags"]},{header:r(()=>[d("div",R,[d("span",F,[G,e(x,{class:"kn-material-input",type:"text",modelValue:a.filters.global.value,"onUpdate:modelValue":o[0]||(o[0]=t=>a.filters.global.value=t),placeholder:a.$t("common.search"),badge:"0"},null,8,["modelValue","placeholder"])])])]),empty:r(()=>[v(m(a.$t("common.info.noDataFound")),1)]),loading:r(()=>[v(m(a.$t("common.info.dataLoading")),1)]),default:r(()=>[e(l,{selectionMode:"multiple",exportable:!1,style:i(a.importExportDescriptor.export.gallery.column.selectionMode.style)},null,8,["style"]),e(l,{field:"name",header:a.$t(a.importExportDescriptor.export.gallery.column.name.header),sortable:!0,style:i(a.importExportDescriptor.export.gallery.column.name.style)},null,8,["header","style"]),e(l,{field:"type",header:a.$t(a.importExportDescriptor.export.gallery.column.type.header),sortable:!0,style:i(a.importExportDescriptor.export.gallery.column.type.style)},{body:r(({data:t})=>[e(g,{style:i(a.importExportDescriptor.iconTypesMap[t.type].style)},{default:r(()=>[v(m(t.type.toUpperCase()),1)]),_:2},1032,["style"])]),_:1},8,["header","style"]),e(l,{field:"tags",header:a.$t(a.importExportDescriptor.export.gallery.column.tags.header),sortable:!0,style:i(a.importExportDescriptor.export.gallery.column.tags.style)},{body:r(({data:t})=>[d("span",B,[(p(!0),k(u,null,z(t.tags,(b,y)=>(p(),T(g,{class:"importExportTags p-mr-1",key:y,rounded:"",value:b},null,8,["value"]))),128))])]),_:1},8,["header","style"]),e(l,{field:"image",header:a.$t(a.importExportDescriptor.export.gallery.column.image.header),style:i(a.importExportDescriptor.export.gallery.column.image.style)},{body:r(({data:t})=>[d("span",{onClick:b=>a.togglePreview(b,t.id)},[t.image&&t.image.length>0?(p(),k("i",X)):N("",!0)],8,V)]),_:1},8,["header","style"])]),_:1},8,["value","selection","filters","currentPageReportTemplate"])],64)}var Z=M($,[["render",Y],["__scopeId","data-v-8ad226fc"]]);export{Z as default};
//# sourceMappingURL=ImportExportGallery-c2486f60.js.map
