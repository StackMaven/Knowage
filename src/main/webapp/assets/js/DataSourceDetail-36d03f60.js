import{K as A,u as P,c as T}from"./KnValidatonMessages-ebe48c72.js";import{d as $}from"./DataSourceDescriptor-f31a2fca.js";import{d as I,ad as E,at as x,_ as B,r as f,y as z,o as s,h as D,w as h,f as n,g as k,t as r,a as o,D as i,z as p,G as b,c,a5 as W,q as L,s as q,A as u,B as Q,p as K,b as X}from"./index-1e676509.js";import{s as F}from"./checkbox.esm-fa6c8259.js";import{s as Y}from"./radiobutton.esm-c3e6fa9b.js";const G={datasource:[{fieldName:"label",validators:[{key:"required"}]},{fieldName:"dialectName",validators:[{key:"required"}]},{fieldName:"schemaAttribute",validators:[{key:"regex",validator:{type:"extendedAlphanumericRegex"}}]},{fieldName:"jndi",validators:[{key:"required",validator:{type:"jndi-name-required"}}]},{fieldName:"urlConnection",validators:[{key:"required",validator:{type:"jdbc-data-required"}}]},{fieldName:"driver",validators:[{key:"required",validator:{type:"jdbc-data-required"}}]}],jdbcPoolConfiguration:[{fieldName:"maxTotal",validators:[{key:"required"}]},{fieldName:"maxWait",validators:[{key:"required"}]},{fieldName:"abandonedTimeout",validators:[{key:"required"}]},{fieldName:"timeBetweenEvictionRuns",validators:[{key:"required"}]},{fieldName:"minEvictableIdleTimeMillis",validators:[{key:"required"}]}]};var V={validations:G};const Z=I({name:"detail-tab",components:{Card:E,KnValidationMessages:A,Checkbox:F},props:{advancedOptions:{type:Object,requried:!1},isReadOnly:Boolean},directives:{tooltip:x},emits:["fieldChanged"],data(){return{v$:P(),dataSourceDetailValidationDescriptor:V,dataSourceDescriptor:$,jdbcPoolConfiguration:{},readOnly:!1}},validations(){return{jdbcPoolConfiguration:T("jdbcPoolConfiguration",V.validations.jdbcPoolConfiguration)}},async created(){this.advancedOptions&&(this.jdbcPoolConfiguration={...this.advancedOptions}),this.readOnly=this.isReadOnly},watch:{advancedOptions(){this.v$.$reset(),this.jdbcPoolConfiguration={...this.advancedOptions}},isReadOnly(){this.readOnly=this.isReadOnly}},methods:{onFieldChange(a,e){this.$emit("fieldChanged",{fieldName:a,value:e})}}}),H={class:"p-fluid p-m-3"},_={class:"p-formgrid p-grid"},aa={class:"p-float-label"},ea={for:"maxTotal",class:"kn-material-input-label"},oa={class:"p-float-label"},ta={for:"maxWait",class:"kn-material-input-label"},na={class:"p-float-label"},da={for:"maxWait",class:"kn-material-input-label"},ra={class:"p-float-label"},ia={for:"abandonedTimeout",class:"kn-material-input-label"},la={class:"p-float-label"},sa={for:"timeBetweenEvictionRuns",class:"kn-material-input-label"},fa={class:"p-float-label"},ca={for:"minEvictableIdleTimeMillis",class:"kn-material-input-label"},pa={class:"p-formgrid p-grid"},ua={class:"p-float-label"},ba={for:"validationQuery",class:"kn-material-input-label"},ma={class:"p-float-label"},va={for:"validationQueryTimeout",class:"kn-material-input-label"},ka={class:"p-field-checkbox"},ga={for:"removeAbandonedOnBorrow"},ha={class:"p-field-checkbox"},ya={for:"removeAbandonedOnMaintenance"},wa={class:"p-field-checkbox"},$a={for:"logAbandoned"},Ca={class:"p-field-checkbox"},Ma={for:"testOnReturn"},Oa={class:"p-field-checkbox"},ja={for:"testWhileIdle"};function Sa(a,e,g,O,j,U){const C=f("Toolbar"),m=f("InputText"),y=f("KnValidationMessages"),w=f("Checkbox"),v=f("Card"),l=z("tooltip");return s(),D(v,{style:i(a.dataSourceDescriptor.card.style)},{header:h(()=>[n(C,{class:"kn-toolbar kn-toolbar--secondary"},{start:h(()=>[k(r(a.$t("managers.dataSourceManagement.form.advancedOptions.title")),1)]),_:1})]),content:h(()=>[o("form",H,[o("div",_,[o("div",{class:"p-field p-col-12 p-md-6 p-lg-4 p-xl-3",style:i(a.dataSourceDescriptor.pField.style)},[o("span",aa,[p(n(m,{id:"maxTotal",class:b(["kn-material-input",{"p-invalid":a.v$.jdbcPoolConfiguration.maxTotal.$invalid&&a.v$.jdbcPoolConfiguration.maxTotal.$dirty}]),type:"number",maxLength:"20",modelValue:a.v$.jdbcPoolConfiguration.maxTotal.$model,"onUpdate:modelValue":e[0]||(e[0]=t=>a.v$.jdbcPoolConfiguration.maxTotal.$model=t),modelModifiers:{trim:!0},onBlur:e[1]||(e[1]=t=>a.v$.jdbcPoolConfiguration.maxTotal.$touch()),onInput:e[2]||(e[2]=t=>a.onFieldChange("maxTotal",t.target.value)),disabled:a.readOnly},null,8,["modelValue","class","disabled"]),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.maxTotalInfo"),void 0,{top:!0}]]),o("label",ea,r(a.$t("managers.dataSourceManagement.form.advancedOptions.maxTotal"))+" * ",1)]),n(y,{vComp:a.v$.jdbcPoolConfiguration.maxTotal,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.advancedOptions.maxTotal")}},null,8,["vComp","additionalTranslateParams"])],4),o("div",{class:"p-field p-col-12 p-md-6 p-lg-4 p-xl-3",style:i(a.dataSourceDescriptor.pField.style)},[o("span",oa,[p(n(m,{id:"maxWait",class:b(["kn-material-input",{"p-invalid":a.v$.jdbcPoolConfiguration.maxWait.$invalid&&a.v$.jdbcPoolConfiguration.maxWait.$dirty}]),type:"number",maxLength:"30",modelValue:a.v$.jdbcPoolConfiguration.maxWait.$model,"onUpdate:modelValue":e[3]||(e[3]=t=>a.v$.jdbcPoolConfiguration.maxWait.$model=t),modelModifiers:{trim:!0},onBlur:e[4]||(e[4]=t=>a.v$.jdbcPoolConfiguration.maxWait.$touch()),onInput:e[5]||(e[5]=t=>a.onFieldChange("maxWait",t.target.value)),disabled:a.readOnly},null,8,["modelValue","class","disabled"]),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.maxWaitInfo"),void 0,{top:!0}]]),o("label",ta,r(a.$t("managers.dataSourceManagement.form.advancedOptions.maxWait"))+" * ",1)]),n(y,{vComp:a.v$.jdbcPoolConfiguration.maxWait,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.advancedOptions.maxWait")}},null,8,["vComp","additionalTranslateParams"])],4),o("div",{class:"p-field p-col-12 p-md-6 p-lg-4 p-xl-3",style:i(a.dataSourceDescriptor.pField.style)},[o("span",na,[p(n(m,{id:"maxIdle",class:"kn-material-input",type:"number",maxLength:"30",modelValue:a.jdbcPoolConfiguration.maxIdle,"onUpdate:modelValue":e[6]||(e[6]=t=>a.jdbcPoolConfiguration.maxIdle=t),modelModifiers:{trim:!0},onInput:e[7]||(e[7]=t=>a.onFieldChange("maxIdle",t.target.value)),disabled:a.readOnly},null,8,["modelValue","disabled"]),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.maxIdleInfo"),void 0,{top:!0}]]),o("label",da,r(a.$t("managers.dataSourceManagement.form.advancedOptions.maxIdle"))+" * ",1)])],4),o("div",{class:"p-field p-col-12 p-md-6 p-lg-4 p-xl-3",style:i(a.dataSourceDescriptor.pField.style)},[o("span",ra,[p(n(m,{id:"abandonedTimeout",class:b(["kn-material-input",{"p-invalid":a.v$.jdbcPoolConfiguration.abandonedTimeout.$invalid&&a.v$.jdbcPoolConfiguration.abandonedTimeout.$dirty}]),type:"number",maxLength:"20",modelValue:a.v$.jdbcPoolConfiguration.abandonedTimeout.$model,"onUpdate:modelValue":e[8]||(e[8]=t=>a.v$.jdbcPoolConfiguration.abandonedTimeout.$model=t),modelModifiers:{trim:!0},onBlur:e[9]||(e[9]=t=>a.v$.jdbcPoolConfiguration.abandonedTimeout.$touch()),onInput:e[10]||(e[10]=t=>a.onFieldChange("abandonedTimeout",t.target.value)),disabled:a.readOnly},null,8,["modelValue","class","disabled"]),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.abandonedTimeoutInfo"),void 0,{top:!0}]]),o("label",ia,r(a.$t("managers.dataSourceManagement.form.advancedOptions.abandonedTimeout"))+" * ",1)]),n(y,{vComp:a.v$.jdbcPoolConfiguration.abandonedTimeout,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.advancedOptions.abandonedTimeout")}},null,8,["vComp","additionalTranslateParams"])],4),o("div",{class:"p-field p-col-12 p-md-6 p-lg-4 p-xl-3",style:i(a.dataSourceDescriptor.pField.style)},[o("span",la,[p(n(m,{id:"timeBetweenEvictionRuns",class:b(["kn-material-input",{"p-invalid":a.v$.jdbcPoolConfiguration.timeBetweenEvictionRuns.$invalid&&a.v$.jdbcPoolConfiguration.timeBetweenEvictionRuns.$dirty}]),type:"number",maxLength:"30",modelValue:a.v$.jdbcPoolConfiguration.timeBetweenEvictionRuns.$model,"onUpdate:modelValue":e[11]||(e[11]=t=>a.v$.jdbcPoolConfiguration.timeBetweenEvictionRuns.$model=t),modelModifiers:{trim:!0},onBlur:e[12]||(e[12]=t=>a.v$.jdbcPoolConfiguration.timeBetweenEvictionRuns.$touch()),onInput:e[13]||(e[13]=t=>a.onFieldChange("timeBetweenEvictionRuns",t.target.value)),disabled:a.readOnly},null,8,["modelValue","class","disabled"]),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.timeBetweenEvictionRunsInfo"),void 0,{top:!0}]]),o("label",sa,r(a.$t("managers.dataSourceManagement.form.advancedOptions.timeBetweenEvictionRuns"))+" * ",1)]),n(y,{vComp:a.v$.jdbcPoolConfiguration.timeBetweenEvictionRuns,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.advancedOptions.timeBetweenEvictionRuns")}},null,8,["vComp","additionalTranslateParams"])],4),o("div",{class:"p-field p-col-12 p-md-6 p-lg-4 p-xl-3",style:i(a.dataSourceDescriptor.pField.style)},[o("span",fa,[p(n(m,{id:"minEvictableIdleTimeMillis",class:b(["kn-material-input",{"p-invalid":a.v$.jdbcPoolConfiguration.minEvictableIdleTimeMillis.$invalid&&a.v$.jdbcPoolConfiguration.minEvictableIdleTimeMillis.$dirty}]),disabled:a.readOnly,type:"number",maxLength:"30",modelValue:a.v$.jdbcPoolConfiguration.minEvictableIdleTimeMillis.$model,"onUpdate:modelValue":e[14]||(e[14]=t=>a.v$.jdbcPoolConfiguration.minEvictableIdleTimeMillis.$model=t),modelModifiers:{trim:!0},onBlur:e[15]||(e[15]=t=>a.v$.jdbcPoolConfiguration.minEvictableIdleTimeMillis.$touch()),onInput:e[16]||(e[16]=t=>a.onFieldChange("minEvictableIdleTimeMillis",t.target.value))},null,8,["disabled","modelValue","class"]),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.minEvictableIdleTimeMillisInfo"),void 0,{top:!0}]]),o("label",ca,r(a.$t("managers.dataSourceManagement.form.advancedOptions.minEvictableIdleTimeMillis")),1)]),n(y,{vComp:a.v$.jdbcPoolConfiguration.minEvictableIdleTimeMillis,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.advancedOptions.minEvictableIdleTimeMillis")}},null,8,["vComp","additionalTranslateParams"])],4)]),o("div",pa,[o("div",{class:"p-field p-col-9",style:i(a.dataSourceDescriptor.pField.style)},[o("span",ua,[n(m,{id:"validationQuery",class:"kn-material-input",disabled:a.readOnly,type:"text",modelValue:a.jdbcPoolConfiguration.validationQuery,"onUpdate:modelValue":e[17]||(e[17]=t=>a.jdbcPoolConfiguration.validationQuery=t),modelModifiers:{trim:!0},maxLength:"200",onInput:e[18]||(e[18]=t=>a.onFieldChange("validationQuery",t.target.value))},null,8,["disabled","modelValue"]),o("label",ba,r(a.$t("managers.dataSourceManagement.form.advancedOptions.validationQuery")),1)])],4),o("div",{class:"p-field p-col-3",style:i(a.dataSourceDescriptor.pField.style)},[o("span",ma,[p(n(m,{id:"validationQueryTimeout",class:"kn-material-input",disabled:a.readOnly,type:"number",maxLength:"30",modelValue:a.jdbcPoolConfiguration.validationQueryTimeout,"onUpdate:modelValue":e[19]||(e[19]=t=>a.jdbcPoolConfiguration.validationQueryTimeout=t),modelModifiers:{trim:!0},onInput:e[20]||(e[20]=t=>a.onFieldChange("validationQueryTimeout",t.target.value))},null,8,["disabled","modelValue"]),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.validationQueryTimeoutInfo"),void 0,{top:!0}]]),o("label",va,r(a.$t("managers.dataSourceManagement.form.advancedOptions.validationQueryTimeout")),1)])],4)]),o("div",ka,[n(w,{id:"removeAbandonedOnBorrow",modelValue:a.jdbcPoolConfiguration.removeAbandonedOnBorrow,"onUpdate:modelValue":e[21]||(e[21]=t=>a.jdbcPoolConfiguration.removeAbandonedOnBorrow=t),disabled:a.readOnly,binary:!0,onChange:e[22]||(e[22]=t=>a.onFieldChange("removeAbandonedOnBorrow",a.jdbcPoolConfiguration.removeAbandonedOnBorrow))},null,8,["modelValue","disabled"]),p((s(),c("label",ga,[k(r(a.$t("managers.dataSourceManagement.form.advancedOptions.removeAbandonedOnBorrow")),1)])),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.removeAbandonedOnBorrowInfo"),void 0,{top:!0}]])]),o("div",ha,[n(w,{id:"removeAbandonedOnMaintenance",modelValue:a.jdbcPoolConfiguration.removeAbandonedOnMaintenance,"onUpdate:modelValue":e[23]||(e[23]=t=>a.jdbcPoolConfiguration.removeAbandonedOnMaintenance=t),disabled:a.readOnly,binary:!0,onChange:e[24]||(e[24]=t=>a.onFieldChange("removeAbandonedOnMaintenance",a.jdbcPoolConfiguration.removeAbandonedOnMaintenance))},null,8,["modelValue","disabled"]),p((s(),c("label",ya,[k(r(a.$t("managers.dataSourceManagement.form.advancedOptions.removeAbandonedOnMaintenance")),1)])),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.removeAbandonedOnMaintenanceInfo"),void 0,{top:!0}]])]),o("div",wa,[n(w,{id:"logAbandoned",modelValue:a.jdbcPoolConfiguration.logAbandoned,"onUpdate:modelValue":e[25]||(e[25]=t=>a.jdbcPoolConfiguration.logAbandoned=t),disabled:a.readOnly,binary:!0,onChange:e[26]||(e[26]=t=>a.onFieldChange("logAbandoned",a.jdbcPoolConfiguration.logAbandoned))},null,8,["modelValue","disabled"]),p((s(),c("label",$a,[k(r(a.$t("managers.dataSourceManagement.form.advancedOptions.logAbandoned")),1)])),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.logAbandonedInfo"),void 0,{top:!0}]])]),o("div",Ca,[n(w,{id:"testOnReturn",modelValue:a.jdbcPoolConfiguration.testOnReturn,"onUpdate:modelValue":e[27]||(e[27]=t=>a.jdbcPoolConfiguration.testOnReturn=t),disabled:a.readOnly,binary:!0,onChange:e[28]||(e[28]=t=>a.onFieldChange("testOnReturn",a.jdbcPoolConfiguration.testOnReturn))},null,8,["modelValue","disabled"]),p((s(),c("label",Ma,[k(r(a.$t("managers.dataSourceManagement.form.advancedOptions.testOnReturn")),1)])),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.testOnReturnInfo"),void 0,{top:!0}]])]),o("div",Oa,[n(w,{id:"testWhileIdle",modelValue:a.jdbcPoolConfiguration.testWhileIdle,"onUpdate:modelValue":e[29]||(e[29]=t=>a.jdbcPoolConfiguration.testWhileIdle=t),disabled:a.readOnly,binary:!0,onChange:e[30]||(e[30]=t=>a.onFieldChange("testWhileIdle",a.jdbcPoolConfiguration.testWhileIdle))},null,8,["modelValue","disabled"]),p((s(),c("label",ja,[k(r(a.$t("managers.dataSourceManagement.form.advancedOptions.testWhileIdle")),1)])),[[l,a.$t("managers.dataSourceManagement.form.advancedOptions.testWhileIdleInfo"),void 0,{top:!0}]])])])]),_:1},8,["style"])}var Da=B(Z,[["render",Sa]]);const Va=I({emits:["touched","closed","inserted"],directives:{tooltip:x},components:{Card:E,KnValidationMessages:A,Dropdown:W,RadioButton:Y,Checkbox:F,Message:L,DataSourceAdvancedOptions:Da},props:{selectedDatasource:{type:Object,required:!1},user:{type:Object,required:!1},databases:Array,id:String},setup(){return{store:q()}},mounted(){this.currentUser={...this.user},this.availableDatabases=this.databases,this.selectedDatasource?this.loadExistingDataSourceValues():this.createNewDataSourceValues()},watch:{id(){this.id==null?this.createNewDataSourceValues():this.loadExistingDataSourceValues(),this.touched=!1},databases(){this.availableDatabases=this.databases,this.selectDatabase(this.datasource.dialectName),this.checkIfReadOnly()},user(){this.currentUser={...this.user}}},computed:{operation(){return this.id?"update":"insert"},buttonDisabled(){return!!this.v$.$invalid}},data(){return{v$:P(),dataSourceDescriptor:$,datasource:{},availableDatabases:[],selectedDatabase:{},jdbcOrJndi:{},jdbcPoolConfiguration:{},currentUser:{},ownerMessage:"",showOwnerMessage:!1,loading:!1,touched:!1,readOnly:!1,disableLabelField:!1}},validations(){const a=O=>j=>this.jdbcOrJndi.type!=O||j,e={"jndi-name-required":a("JNDI"),"jdbc-data-required":a("JDBC")};return{datasource:T("datasource",V.validations.datasource,e)}},methods:{setConnetionType(){this.datasource.driver&&(this.jdbcOrJndi.type="JDBC"),this.datasource.jndi!=null&&this.datasource.jndi!=""&&(this.jdbcOrJndi.type="JNDI")},createNewDataSourceValues(){this.jdbcOrJndi.type="JDBC",this.jdbcPoolConfiguration={...$.newDataSourceValues.jdbcPoolConfiguration},this.datasource={...$.newDataSourceValues},this.disableLabelField=!1,this.checkIfReadOnly()},loadExistingDataSourceValues(){this.datasource={...this.selectedDatasource},this.jdbcPoolConfiguration={...this.datasource.jdbcPoolConfiguration},this.disableLabelField=!0,this.setConnetionType(),this.selectDatabase(this.datasource.dialectName),this.checkIfReadOnly()},convertToMili(a){a.jdbcPoolConfiguration.maxWait*=1e3,a.jdbcPoolConfiguration.timeBetweenEvictionRuns*=1e3,a.jdbcPoolConfiguration.minEvictableIdleTimeMillis*=1e3},selectDatabase(a){this.availableDatabases.forEach(e=>{e.databaseDialect.value==a&&(this.selectedDatabase=e)}),this.selectedDatabase.cacheSupported||(this.datasource.writeDefault=!1,this.datasource.readOnly=!0)},clearType(){this.datasource.hasOwnProperty("dsId")?this.jdbcOrJndi.type=="JDBC"&&(this.datasource.jndi="",this.datasource.hasOwnProperty("jdbcPoolConfiguration")||(this.jdbcPoolConfiguration={...$.newDataSourceValues.jdbcPoolConfiguration},this.datasource.jdbcPoolConfiguration={...$.newDataSourceValues.jdbcPoolConfiguration})):this.jdbcOrJndi.type=="JDBC"?(this.datasource.jndi="",this.datasource.jdbcPoolConfiguration={...$.newDataSourceValues.jdbcPoolConfiguration}):(this.datasource.urlConnection="",this.datasource.user="",this.datasource.pwd="",this.datasource.driver="",delete this.datasource.jdbcPoolConfiguration)},checkIfReadOnly(){this.selectedDatasource?this.currentUser.isSuperadmin||this.currentUser.userId==this.datasource.owner&&(!this.datasource.hasOwnProperty("jndi")||this.datasource.jndi=="")?(this.showOwnerMessage=!1,this.readOnly=!1):(this.ownerMessage=this.$t("managers.dataSourceManagement.form.notOwner"),this.showOwnerMessage=!0,this.readOnly=!0):this.readOnly=!1},async testDataSource(){var a="/knowage/restful-services/datasourcestest/2.0/test/",e={};e={...this.datasource},e.type=this.jdbcOrJndi.type,await this.$http.post(a,e).then(g=>{g.data.error?this.store.setError({title:this.$t("managers.dataSourceManagement.form.errorTitle"),msg:g.data.error}):this.store.setInfo({msg:this.$t("managers.dataSourceManagement.form.testOk")})})},async createOrUpdate(a,e){return this.operation==="update"?this.$http.put(a,e):this.$http.post(a,e)},async handleSubmit(){if(this.v$.$invalid)return;let a="/knowage/restful-services/2.0/datasources/",e={};e={...this.datasource},e.hasOwnProperty("jdbcPoolConfiguration")&&this.convertToMili(e),await this.createOrUpdate(a,e).then(g=>{g.data.errors?this.store.setError({title:"Error",msg:g.data.error}):this.store.setInfo({title:"Ok",msg:"Saved OK"})}),this.$emit("inserted"),this.touched=!1},closeTemplateConfirm(){this.touched?this.$confirm.require({message:this.$t("common.toast.unsavedChangesMessage"),header:this.$t("common.toast.unsavedChangesHeader"),icon:"pi pi-exclamation-triangle",accept:()=>{this.touched=!1,this.closeTemplate()}}):this.closeTemplate()},onAdvancedOptionsChange(a){this.datasource.jdbcPoolConfiguration[a.fieldName]=a.value,this.touched=!0,this.$emit("touched")},onFieldChange(){this.touched=!0,this.$emit("touched")},closeTemplate(){this.$router.push({name:"datasource-hint"}),this.$emit("closed")}}}),N=a=>(K("data-v-f14df782"),a=a(),X(),a),Aa={class:"kn-overflow-y"},Pa={class:"p-fluid p-m-5"},Ta={class:"p-fluid p-formgrid p-grid"},Ia={class:"p-float-label"},Ea={for:"label",class:"kn-material-input-label"},xa={class:"p-float-label"},Ba={for:"dialectName",class:"kn-material-input-label"},Fa={class:"p-float-label"},Na={for:"descr",class:"kn-material-input-label"},Ua={key:0},Ja={class:"p-float-label"},Ra={class:"p-float-label"},za={for:"schemaAttribute",class:"kn-material-input-label"},Wa={class:"kn-material-input-label"},La={class:"p-field-radiobutton"},qa={for:"readOnly"},Qa={class:"p-field-radiobutton"},Ka={for:"readAndWrite"},Xa={key:1,class:"p-field-checkbox"},Ya={for:"useForDataprep"},Ga={class:"kn-material-input-label"},Za={class:"p-field-radiobutton"},Ha=N(()=>o("label",{for:"JDBC"},"JDBC",-1)),_a={class:"p-field-radiobutton"},ae=N(()=>o("label",{for:"JNDI"},"JNDI",-1)),ee={class:"p-float-label"},oe={for:"jndi",class:"kn-material-input-label"},te={id:"jndi-help"},ne={class:"p-fluid p-formgrid p-grid"},de={class:"p-float-label"},re={for:"user",class:"kn-material-input-label"},ie={class:"p-float-label"},le={for:"pwd",class:"kn-material-input-label"},se={class:"p-float-label"},fe={for:"urlConnection",class:"kn-material-input-label"},ce={class:"p-float-label"},pe={for:"driver",class:"kn-material-input-label"},ue={key:2};function be(a,e,g,O,j,U){const C=f("Button"),m=f("Toolbar"),y=f("ProgressBar"),w=f("Message"),v=f("InputText"),l=f("KnValidationMessages"),t=f("Dropdown"),S=f("Checkbox"),M=f("RadioButton"),J=f("Card"),R=f("DataSourceAdvancedOptions");return s(),c(Q,null,[n(m,{class:"kn-toolbar kn-toolbar--secondary p-m-0"},{start:h(()=>[k(r(a.datasource.label),1)]),end:h(()=>[n(C,{class:"p-button-text p-button-rounded p-button-plain p-jc-center",disabled:a.readOnly||a.touched,onClick:a.testDataSource},{default:h(()=>[k(r(a.$t("common.test")),1)]),_:1},8,["disabled","onClick"]),n(C,{icon:"pi pi-save",class:"p-button-text p-button-rounded p-button-plain",disabled:a.readOnly||a.buttonDisabled,onClick:a.handleSubmit},null,8,["disabled","onClick"]),n(C,{icon:"pi pi-times",class:"p-button-text p-button-rounded p-button-plain",onClick:a.closeTemplateConfirm},null,8,["onClick"])]),_:1}),o("div",Aa,[a.loading?(s(),D(y,{key:0,mode:"indeterminate",class:"kn-progress-bar"})):u("",!0),a.showOwnerMessage?(s(),D(w,{key:1,severity:"info"},{default:h(()=>[k(r(a.ownerMessage),1)]),_:1})):u("",!0),n(J,{style:i(a.dataSourceDescriptor.card.style)},{content:h(()=>[o("form",Pa,[o("div",Ta,[o("div",{class:"p-field p-col-12 p-md-6",style:i(a.dataSourceDescriptor.pField.style)},[o("span",Ia,[n(v,{id:"label",class:b(["kn-material-input",{"p-invalid":a.v$.datasource.label.$invalid&&a.v$.datasource.label.$dirty}]),type:"text",maxLength:"100",modelValue:a.v$.datasource.label.$model,"onUpdate:modelValue":e[0]||(e[0]=d=>a.v$.datasource.label.$model=d),modelModifiers:{trim:!0},onBlur:e[1]||(e[1]=d=>a.v$.datasource.label.$touch()),onInput:a.onFieldChange,disabled:a.readOnly||a.disableLabelField},null,8,["modelValue","class","onInput","disabled"]),o("label",Ea,r(a.$t("common.name"))+" * ",1)]),n(l,{class:"p-mt-1",vComp:a.v$.datasource.label,additionalTranslateParams:{fieldName:a.$t("common.name")}},null,8,["vComp","additionalTranslateParams"])],4),o("div",{class:"p-field p-col-12 p-md-6",style:i(a.dataSourceDescriptor.pField.style)},[o("span",xa,[n(t,{id:"dialectName",class:b(["kn-material-input",{"p-invalid":a.v$.datasource.dialectName.$invalid&&a.v$.datasource.dialectName.$dirty}]),options:a.availableDatabases,optionLabel:"databaseDialect.name",optionValue:"databaseDialect.value",modelValue:a.v$.datasource.dialectName.$model,"onUpdate:modelValue":e[2]||(e[2]=d=>a.v$.datasource.dialectName.$model=d),onBeforeShow:e[3]||(e[3]=d=>a.v$.datasource.dialectName.$touch()),onChange:e[4]||(e[4]=d=>a.selectDatabase(d.value)),disabled:a.readOnly},null,8,["options","modelValue","class","disabled"]),o("label",Ba,r(a.$t("managers.dataSourceManagement.form.dialect"))+" * ",1)]),n(l,{class:"p-mt-1",vComp:a.v$.datasource.dialectName,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.dialect")}},null,8,["vComp","additionalTranslateParams"])],4)]),o("div",{class:"p-field",style:i(a.dataSourceDescriptor.pField.style)},[o("span",Fa,[n(v,{id:"descr",class:"kn-material-input",type:"text",maxLength:"160",modelValue:a.datasource.descr,"onUpdate:modelValue":e[5]||(e[5]=d=>a.datasource.descr=d),modelModifiers:{trim:!0},onInput:a.onFieldChange,disabled:a.readOnly},null,8,["modelValue","onInput","disabled"]),o("label",Na,r(a.$t("common.description")),1)])],4),a.jdbcOrJndi.type=="JNDI"?(s(),c("div",Ua,[o("div",{class:"p-field",style:i(a.dataSourceDescriptor.pField.style)},[o("span",Ja,[n(S,{id:"multiSchema",modelValue:a.datasource.multiSchema,"onUpdate:modelValue":e[6]||(e[6]=d=>a.datasource.multiSchema=d),binary:!0,disabled:a.readOnly},null,8,["modelValue","disabled"]),o("label",{for:"multiSchema",class:"kn-material-input-label",style:i(a.dataSourceDescriptor.checkboxLabel.style)},r(a.$t("managers.dataSourceManagement.form.multischema")),5)])],4),a.datasource.multiSchema?(s(),c("div",{key:0,class:"p-field",style:i(a.dataSourceDescriptor.pField.style)},[o("span",Ra,[n(v,{id:"schemaAttribute",class:b(["kn-material-input",{"p-invalid":a.v$.datasource.schemaAttribute.$invalid&&a.v$.datasource.schemaAttribute.$dirty}]),type:"text",maxLength:"45",modelValue:a.v$.datasource.schemaAttribute.$model,"onUpdate:modelValue":e[7]||(e[7]=d=>a.v$.datasource.schemaAttribute.$model=d),modelModifiers:{trim:!0},onInput:a.onFieldChange,disabled:a.readOnly},null,8,["modelValue","class","onInput","disabled"]),o("label",za,r(a.$t("managers.dataSourceManagement.form.schemaAttribute")),1)]),n(l,{vComp:a.v$.datasource.schemaAttribute,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.schemaAttribute")}},null,8,["vComp","additionalTranslateParams"])],4)):u("",!0)])):u("",!0),o("label",Wa,r(a.$t("managers.dataSourceManagement.form.readOnly")),1),o("div",{class:"p-field p-formgroup-inline p-mb-3 p-mt-2",style:i(a.dataSourceDescriptor.pField.style)},[o("div",La,[n(M,{id:"readOnly",value:!0,modelValue:a.datasource.readOnly,"onUpdate:modelValue":e[8]||(e[8]=d=>a.datasource.readOnly=d),disabled:a.datasource.writeDefault||a.readOnly||a.datasource.useForDataprep},null,8,["modelValue","disabled"]),o("label",qa,r(a.$t("managers.dataSourceManagement.form.readOnly")),1)]),o("div",Qa,[n(M,{id:"readAndWrite",value:!1,modelValue:a.datasource.readOnly,"onUpdate:modelValue":e[9]||(e[9]=d=>a.datasource.readOnly=d),disabled:a.readOnly||!a.selectedDatabase.cacheSupported},null,8,["modelValue","disabled"]),o("label",Ka,r(a.$t("managers.dataSourceManagement.form.readAndWrite")),1)]),a.currentUser.isSuperadmin?(s(),c("div",{key:0,class:"p-field-checkbox",style:i(a.dataSourceDescriptor.pField.style)},[n(S,{id:"writeDefault",modelValue:a.datasource.writeDefault,"onUpdate:modelValue":e[10]||(e[10]=d=>a.datasource.writeDefault=d),binary:!0,disabled:a.readOnly||!a.selectedDatabase.cacheSupported||a.datasource.readOnly||!a.currentUser.isSuperadmin},null,8,["modelValue","disabled"]),o("label",{for:"writeDefault",style:i(a.dataSourceDescriptor.checkboxLabel.style)},r(a.$t("managers.dataSourceManagement.form.writeDefault")),5)],4)):u("",!0),a.currentUser.isSuperadmin?(s(),c("div",Xa,[n(S,{id:"useForDataprep",modelValue:a.datasource.useForDataprep,"onUpdate:modelValue":e[11]||(e[11]=d=>a.datasource.useForDataprep=d),binary:!0,disabled:a.readOnly||!a.selectedDatabase.cacheSupported||a.datasource.readOnly||!a.currentUser.isSuperadmin},null,8,["modelValue","disabled"]),o("label",Ya,r(a.$t("managers.dataSourceManagement.form.useForDataprep")),1)])):u("",!0)],4),o("label",Ga,r(a.$t("common.type")),1),o("div",{class:"p-field p-formgroup-inline p-mt-2",style:i(a.dataSourceDescriptor.pField.style)},[o("div",Za,[n(M,{id:"JDBC",value:"JDBC",modelValue:a.jdbcOrJndi.type,"onUpdate:modelValue":e[12]||(e[12]=d=>a.jdbcOrJndi.type=d),onChange:a.clearType,disabled:a.readOnly},null,8,["modelValue","onChange","disabled"]),Ha]),o("div",_a,[n(M,{id:"readAndWrite",value:"JNDI",modelValue:a.jdbcOrJndi.type,"onUpdate:modelValue":e[13]||(e[13]=d=>a.jdbcOrJndi.type=d),onChange:a.clearType,disabled:a.readOnly||!a.currentUser.isSuperadmin},null,8,["modelValue","onChange","disabled"]),ae])],4),a.jdbcOrJndi.type=="JNDI"?(s(),c("div",{key:1,class:"p-field",style:i(a.dataSourceDescriptor.pField.style)},[o("span",ee,[n(v,{id:"jndi",class:b(["kn-material-input",{"p-invalid":a.v$.datasource.jndi.$invalid&&a.v$.datasource.jndi.$dirty}]),type:"text",maxLength:"160",modelValue:a.v$.datasource.jndi.$model,"onUpdate:modelValue":e[14]||(e[14]=d=>a.v$.datasource.jndi.$model=d),modelModifiers:{trim:!0},onBlur:e[15]||(e[15]=d=>a.v$.datasource.jndi.$touch()),onInput:a.onFieldChange,disabled:a.readOnly},null,8,["modelValue","class","onInput","disabled"]),o("label",oe,r(a.$t("managers.dataSourceManagement.form.jndi"))+" * ",1),o("small",te,r(a.$t("managers.dataSourceManagement.form.jndiInfo")),1)]),n(l,{vComp:a.v$.datasource.jndi,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.jndi")}},null,8,["vComp","additionalTranslateParams"])],4)):u("",!0),o("div",ne,[a.jdbcOrJndi.type=="JDBC"?(s(),c("div",{key:0,class:"p-field p-col-12 p-md-6",style:i(a.dataSourceDescriptor.pField.style)},[o("span",de,[n(v,{id:"user",class:"kn-material-input",type:"text",maxLength:"50",modelValue:a.datasource.user,"onUpdate:modelValue":e[16]||(e[16]=d=>a.datasource.user=d),modelModifiers:{trim:!0},onInput:a.onFieldChange,disabled:a.readOnly},null,8,["modelValue","onInput","disabled"]),o("label",re,r(a.$t("managers.dataSourceManagement.form.user")),1)])],4)):u("",!0),a.jdbcOrJndi.type=="JDBC"?(s(),c("div",{key:1,class:"p-field p-col-12 p-md-6",style:i(a.dataSourceDescriptor.pField.style)},[o("span",ie,[n(v,{id:"pwd",class:"kn-material-input",type:"password",maxLength:"50",modelValue:a.datasource.pwd,"onUpdate:modelValue":e[17]||(e[17]=d=>a.datasource.pwd=d),modelModifiers:{trim:!0},onInput:a.onFieldChange,disabled:a.readOnly},null,8,["modelValue","onInput","disabled"]),o("label",le,r(a.$t("managers.dataSourceManagement.form.pwd")),1)])],4)):u("",!0)]),a.jdbcOrJndi.type=="JDBC"?(s(),c("div",{key:2,class:"p-field",style:i(a.dataSourceDescriptor.pField.style)},[o("span",se,[n(v,{id:"urlConnection",class:b(["kn-material-input",{"p-invalid":a.v$.datasource.urlConnection.$invalid&&a.v$.datasource.urlConnection.$dirty}]),type:"text",maxLength:"500",modelValue:a.v$.datasource.urlConnection.$model,"onUpdate:modelValue":e[18]||(e[18]=d=>a.v$.datasource.urlConnection.$model=d),modelModifiers:{trim:!0},onBlur:e[19]||(e[19]=d=>a.v$.datasource.urlConnection.$touch()),onInput:a.onFieldChange,disabled:a.readOnly},null,8,["modelValue","class","onInput","disabled"]),o("label",fe,r(a.$t("managers.dataSourceManagement.form.urlConnection"))+" * ",1)]),n(l,{vComp:a.v$.datasource.urlConnection,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.urlConnection")}},null,8,["vComp","additionalTranslateParams"])],4)):u("",!0),a.jdbcOrJndi.type=="JDBC"?(s(),c("div",{key:3,class:"p-field",style:i(a.dataSourceDescriptor.pField.style)},[o("span",ce,[n(v,{id:"driver",class:b(["kn-material-input",{"p-invalid":a.v$.datasource.driver.$invalid&&a.v$.datasource.driver.$dirty}]),type:"text",maxLength:"50",modelValue:a.v$.datasource.driver.$model,"onUpdate:modelValue":e[20]||(e[20]=d=>a.v$.datasource.driver.$model=d),modelModifiers:{trim:!0},onBlur:e[21]||(e[21]=d=>a.v$.datasource.driver.$touch()),onInput:a.onFieldChange,disabled:a.readOnly},null,8,["modelValue","class","onInput","disabled"]),o("label",pe,r(a.$t("managers.dataSourceManagement.form.driver"))+" * ",1)]),n(l,{vComp:a.v$.datasource.driver,additionalTranslateParams:{fieldName:a.$t("managers.dataSourceManagement.form.driver")}},null,8,["vComp","additionalTranslateParams"])],4)):u("",!0)])]),_:1},8,["style"]),a.jdbcOrJndi.type=="JDBC"?(s(),c("div",ue,[n(R,{advancedOptions:a.jdbcPoolConfiguration,isReadOnly:a.readOnly,onFieldChanged:a.onAdvancedOptionsChange},null,8,["advancedOptions","isReadOnly","onFieldChanged"])])):u("",!0)])],64)}var ye=B(Va,[["render",be],["__scopeId","data-v-f14df782"]]);export{ye as default};
//# sourceMappingURL=DataSourceDetail-36d03f60.js.map
