{"version":3,"file":"DatasetManagement-8227df26.js","sources":["../../../../modules/managers/datasetManagement/DatasetManagement.vue"],"sourcesContent":["<template>\r\n    <div class=\"kn-page\">\r\n        <ProgressSpinner class=\"kn-progress-spinner\" v-if=\"loadingVersion\" />\r\n\r\n        <div class=\"kn-page-content p-grid p-m-0\">\r\n            <div class=\"kn-list--column p-col-4 p-sm-4 p-md-3 p-p-0\">\r\n                <Toolbar class=\"kn-toolbar kn-toolbar--primary\">\r\n                    <template #start>\r\n                        {{ $t('managers.datasetManagement.title') }}\r\n                    </template>\r\n                    <template #end>\r\n                        <FabButton icon=\"fas fa-plus\" @click=\"showDetail\" data-test=\"open-form-button\" />\r\n                    </template>\r\n                </Toolbar>\r\n                <ProgressBar mode=\"indeterminate\" class=\"kn-progress-bar\" v-if=\"loading\" data-test=\"progress-bar\" />\r\n                <KnListBox :options=\"listOfDatasets\" :settings=\"mainDescriptor.knListSettings\" @click=\"showDetail\" @clone.stop=\"emitCloneDataset\" @delete.stop=\"deleteDataset\" />\r\n            </div>\r\n            <div class=\"p-col-8 p-sm-8 p-md-9 p-p-0 p-m-0 kn-router-view\">\r\n                <router-view\r\n                    :scopeTypes=\"scopeTypes\"\r\n                    :categoryTypes=\"categoryTypes\"\r\n                    :datasetTypes=\"datasetTypes\"\r\n                    :transformationDataset=\"transformationDataset\"\r\n                    :scriptTypes=\"scriptTypes\"\r\n                    :dataSources=\"dataSources\"\r\n                    :businessModels=\"businessModels\"\r\n                    :pythonEnvironments=\"pythonEnvironments\"\r\n                    :rEnvironments=\"rEnvironments\"\r\n                    :metaSourceResource=\"metaSourceResource\"\r\n                    :datasetToCloneId=\"datasetToCloneId\"\r\n                    :availableTags=\"tags\"\r\n                    @loadingOlderVersion=\"loadingVersion = true\"\r\n                    @olderVersionLoaded=\"loadingVersion = false\"\r\n                    @touched=\"touched = true\"\r\n                    @created=\"onCreate\"\r\n                    @updated=\"onUpdate\"\r\n                    @showSavingSpinner=\"loadingVersion = true\"\r\n                    @hideSavingSpinner=\"loadingVersion = false\"\r\n                    @close=\"closeDetailConfirm\"\r\n                />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport { AxiosResponse } from 'axios'\r\nimport mainDescriptor from './DatasetManagementDescriptor.json'\r\nimport FabButton from '@/components/UI/KnFabButton.vue'\r\nimport KnListBox from '@/components/UI/KnListBox/KnListBox.vue'\r\nimport ProgressSpinner from 'primevue/progressspinner'\r\nimport mainStore from '../../../App.store'\r\n\r\nexport default defineComponent({\r\n    name: 'dataset-management',\r\n    components: { FabButton, KnListBox, ProgressSpinner },\r\n    data() {\r\n        return {\r\n            mainDescriptor,\r\n            loading: false,\r\n            listOfDatasets: [] as any,\r\n            reverseOrdering: false,\r\n            loadingVersion: false,\r\n            columnOrdering: '',\r\n            touched: false,\r\n            scopeTypes: [] as any,\r\n            categoryTypes: [] as any,\r\n            datasetTypes: [] as any,\r\n            transformationDataset: {} as any,\r\n            scriptTypes: [] as any,\r\n            dataSources: [] as any,\r\n            businessModels: [] as any,\r\n            pythonEnvironments: [] as any,\r\n            rEnvironments: [] as any,\r\n            metaSourceResource: [] as any,\r\n            tags: [] as any,\r\n            datasetToCloneId: null\r\n        }\r\n    },\r\n    setup() {\r\n        const store = mainStore()\r\n        return { store }\r\n    },\r\n    created() {\r\n        this.getAllPersistentData()\r\n    },\r\n    methods: {\r\n        //#region ===================== Get All Data and Format ====================================================\r\n        getEnvironmentByConfiguration(configuration: string) {\r\n            return this.$http.get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `2.0/configs/category/${configuration}`)\r\n        },\r\n        buildEnvironments(environmentsArray) {\r\n            return environmentsArray.map((environment) => ({ label: environment.label, value: environment.valueCheck }))\r\n        },\r\n        async getEnvironmentData() {\r\n            this.getEnvironmentByConfiguration('PYTHON_CONFIGURATION').then((response: AxiosResponse<any>) => (this.pythonEnvironments = this.buildEnvironments(response.data)))\r\n            this.getEnvironmentByConfiguration('R_CONFIGURATION').then((response: AxiosResponse<any>) => (this.rEnvironments = this.buildEnvironments(response.data)))\r\n        },\r\n        getDomainByType(type: string) {\r\n            return this.$http.get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `domains/listValueDescriptionByType?DOMAIN_TYPE=${type}`)\r\n        },\r\n        async getDomainData() {\r\n            this.getDomainByType('DS_SCOPE').then((response: AxiosResponse<any>) => (this.scopeTypes = response.data))\r\n            this.getDomainByType('DATASET_CATEGORY').then((response: AxiosResponse<any>) => (this.categoryTypes = response.data))\r\n            this.getDomainByType('DATA_SET_TYPE').then(\r\n                (response: AxiosResponse<any>) =>\r\n                    (this.datasetTypes = response.data.filter((cd) => {\r\n                        return cd.VALUE_CD != 'Custom' && cd.VALUE_CD != 'Federated'\r\n                    }))\r\n            )\r\n            this.getDomainByType('TRANSFORMER_TYPE').then((response: AxiosResponse<any>) => (this.transformationDataset = response.data[0]))\r\n            this.getDomainByType('SCRIPT_TYPE').then((response: AxiosResponse<any>) => (this.scriptTypes = response.data))\r\n        },\r\n        async getDatasources() {\r\n            this.$http.get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `2.0/datasources`).then((response: AxiosResponse<any>) => (this.dataSources = response.data))\r\n        },\r\n        async getBusinessModels() {\r\n            this.$http.get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `2.0/businessmodels`).then((response: AxiosResponse<any>) => (this.businessModels = response.data))\r\n        },\r\n        async getMetaSourceResource() {\r\n            this.$http.get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `2.0/metaSourceResource/`).then((response: AxiosResponse<any>) => (this.metaSourceResource = response.data))\r\n        },\r\n        async getTags() {\r\n            this.$http.get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `2.0/tags/`).then((response: AxiosResponse<any>) => (this.tags = response.data))\r\n        },\r\n        async getDatasets() {\r\n            let url = '{\"reverseOrdering\":false,\"columnOrdering\":\"\"}'\r\n            this.$http\r\n                .get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `3.0/datasets/catalog?offset=0&fetchSize=0&ordering=` + encodeURI(url))\r\n                .then((response: AxiosResponse<any>) => (this.listOfDatasets = [...response.data.root]))\r\n                .finally(() => (this.loading = false))\r\n        },\r\n        async getAllPersistentData() {\r\n            this.loading = true\r\n            await this.getEnvironmentData()\r\n            await this.getDomainData()\r\n            await this.getMetaSourceResource()\r\n            await this.getDatasources()\r\n            await this.getBusinessModels()\r\n            await this.getTags()\r\n            await this.getDatasets()\r\n        },\r\n        //#endregion ================================================================================================\r\n\r\n        //#region ===================== List Functionalities ====================================================\r\n        showDetail(event) {\r\n            const path = event.item ? `/dataset-management/${event.item.id}` : '/dataset-management/new-dataset'\r\n            this.dirtyCheck(path)\r\n        },\r\n        closeDetailConfirm() {\r\n            const path = '/dataset-management'\r\n            this.dirtyCheck(path)\r\n        },\r\n        dirtyCheck(path) {\r\n            if (!this.touched) {\r\n                this.$router.push(path)\r\n            } else {\r\n                this.$confirm.require({\r\n                    message: this.$t('common.toast.unsavedChangesMessage'),\r\n                    header: this.$t('common.toast.unsavedChangesHeader'),\r\n                    icon: 'pi pi-exclamation-triangle',\r\n                    accept: () => {\r\n                        this.touched = false\r\n                        this.$router.push(path)\r\n                    }\r\n                })\r\n            }\r\n        },\r\n\r\n        deleteDataset(event) {\r\n            this.$confirm.require({\r\n                message: this.$t('common.toast.deleteMessage'),\r\n                header: this.$t('common.uppercaseDelete'),\r\n                icon: 'pi pi-exclamation-triangle',\r\n                accept: () => {\r\n                    this.$http\r\n                        .delete(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `1.0/datasets/${event.item.label}/`)\r\n                        .then(() => {\r\n                            this.store.setInfo({ title: this.$t('common.toast.deleteTitle'), msg: this.$t('common.toast.deleteSuccess') })\r\n                            this.loading = true\r\n\r\n                            this.getDatasets()\r\n                            if (event.item.id == this.$route.params.id) {\r\n                                this.$router.push('/dataset-management')\r\n                                this.touched = false\r\n                            }\r\n                        })\r\n                        .catch()\r\n                }\r\n            })\r\n        },\r\n        emitCloneDataset(event) {\r\n            this.$router.push('/dataset-management/new-dataset')\r\n            setTimeout(() => {\r\n                this.datasetToCloneId = event.item.id\r\n            }, 200)\r\n        },\r\n        //#endregion ================================================================================================\r\n\r\n        onCreate(event) {\r\n            this.touched = false\r\n            this.getDatasets()\r\n            this.$router.push(`/dataset-management/${event.data.id}`)\r\n        },\r\n        onUpdate() {\r\n            this.touched = false\r\n            this.getDatasets()\r\n        }\r\n    }\r\n})\r\n</script>\r\n"],"names":["FabButton","ProgressSpinner","mainStore","_openBlock","_createElementBlock","_createBlock","_createCommentVNode","_createElementVNode","_createVNode","_withCtx","_withModifiers"],"mappings":"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"}