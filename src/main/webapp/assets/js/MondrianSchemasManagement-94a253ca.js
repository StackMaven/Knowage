import{_,d as b,X as v,a4 as F,s as C,r as s,o as a,c as S,a as t,f as i,w as r,g as d,t as l,h as m,A as c,V as w}from"./index-1e676509.js";import{K as y}from"./KnHint-6d455703.js";const B=["name","description"];var M={filterFields:B};const T=b({name:"mondrian-schemas-management",components:{FabButton:v,Listbox:F,KnHint:y},computed:{toggleHint(){return this.$route.fullPath=="/mondrian-schemas-management"}},data(){return{loading:!1,touched:!1,schemas:[],mondrianDescriptor:M}},setup(){return{store:C()}},async created(){await this.loadAllSchemas()},methods:{async loadAllSchemas(){this.loading=!0,await this.$http.get("/knowage/restful-services/2.0/mondrianSchemasResource").then(e=>{this.schemas=e.data}).finally(()=>this.loading=!1)},showForm(e){const o=e.value?`/mondrian-schemas-management/${e.value.id}`:"/mondrian-schemas-management/new-schema";this.touched?this.$confirm.require({message:this.$t("common.toast.unsavedChangesMessage"),header:this.$t("common.toast.unsavedChangesHeader"),icon:"pi pi-exclamation-triangle",accept:()=>{this.touched=!1,this.$router.push(o)}}):this.$router.push(o)},deleteSchemaConfirm(e){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteTitle"),icon:"pi pi-exclamation-triangle",accept:()=>this.deleteSchema(e)})},async deleteSchema(e){await this.$http.delete("/knowage/restful-services/2.0/mondrianSchemasResource/"+e).then(()=>{this.store.setInfo({title:this.$t("common.toast.deleteTitle"),msg:this.$t("common.toast.deleteSuccess")}),this.$router.push("/mondrian-schemas-management"),this.loadAllSchemas()})},closeForm(){this.touched=!1},reloadPage(){this.touched=!1,this.loadAllSchemas()}}}),H={class:"kn-page"},A={class:"kn-page-content p-grid p-m-0"},D={class:"kn-list--column p-col-4 p-sm-4 p-md-3 p-p-0"},K={class:"kn-list-item","data-test":"list-item"},P={class:"kn-list-item-text"},V={class:"kn-list-item-text-secondary"},L={class:"p-col-8 p-sm-8 p-md-9 p-p-0 p-m-0 kn-page"};function N(e,o,I,q,R,E){const h=s("FabButton"),p=s("Toolbar"),u=s("ProgressBar"),g=s("Button"),f=s("Listbox"),$=s("router-view"),k=s("KnHint");return a(),S("div",H,[t("div",A,[t("div",D,[i(p,{class:"kn-toolbar kn-toolbar--primary"},{start:r(()=>[d(l(e.$t("managers.mondrianSchemasManagement.title")),1)]),end:r(()=>[i(h,{icon:"fas fa-plus",onClick:e.showForm,"data-test":"open-form-button"},null,8,["onClick"])]),_:1}),e.loading?(a(),m(u,{key:0,mode:"indeterminate",class:"kn-progress-bar","data-test":"progress-bar"})):c("",!0),t("div",null,[e.loading?c("",!0):(a(),m(f,{key:0,class:"kn-list--column",options:e.schemas,filter:!0,filterPlaceholder:e.$t("common.search"),optionLabel:"name",filterMatchMode:"contains",filterFields:e.mondrianDescriptor.filterFields,emptyFilterMessage:e.$t("common.info.noDataFound"),onChange:e.showForm,"data-test":"schemas-list"},{empty:r(()=>[d(l(e.$t("common.info.noDataFound")),1)]),option:r(n=>[t("div",K,[t("div",P,[t("span",null,l(n.option.name),1),t("span",V,l(n.option.description),1)]),i(g,{icon:"pi pi-trash",class:"p-button-text p-button-rounded p-button-plain",onClick:w(X=>e.deleteSchemaConfirm(n.option.id),["stop"]),"data-test":"delete-button"},null,8,["onClick"])])]),_:1},8,["options","filterPlaceholder","filterFields","emptyFilterMessage","onChange"]))])]),t("div",L,[i($,{onTouched:o[0]||(o[0]=n=>e.touched=!0),onClosed:e.closeForm,onInserted:e.reloadPage},null,8,["onClosed","onInserted"]),e.toggleHint?(a(),m(k,{key:0,title:"managers.mondrianSchemasManagement.hintTitle",hint:"managers.mondrianSchemasManagement.hint"},null,8,["title","hint"])):c("",!0)])])])}var G=_(T,[["render",N]]);export{G as default};
//# sourceMappingURL=MondrianSchemasManagement-94a253ca.js.map
