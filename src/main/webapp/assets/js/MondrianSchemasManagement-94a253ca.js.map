{"version":3,"file":"MondrianSchemasManagement-94a253ca.js","sources":["../../../../modules/managers/mondrianSchemasManagement/MondrianSchemasManagement.vue"],"sourcesContent":["<template>\r\n    <div class=\"kn-page\">\r\n        <div class=\"kn-page-content p-grid p-m-0\">\r\n            <div class=\"kn-list--column p-col-4 p-sm-4 p-md-3 p-p-0\">\r\n                <Toolbar class=\"kn-toolbar kn-toolbar--primary\">\r\n                    <template #start>\r\n                        {{ $t('managers.mondrianSchemasManagement.title') }}\r\n                    </template>\r\n                    <template #end>\r\n                        <FabButton icon=\"fas fa-plus\" @click=\"showForm\" data-test=\"open-form-button\" />\r\n                    </template>\r\n                </Toolbar>\r\n                <ProgressBar mode=\"indeterminate\" class=\"kn-progress-bar\" v-if=\"loading\" data-test=\"progress-bar\" />\r\n                <div>\r\n                    <Listbox\r\n                        v-if=\"!loading\"\r\n                        class=\"kn-list--column\"\r\n                        :options=\"schemas\"\r\n                        :filter=\"true\"\r\n                        :filterPlaceholder=\"$t('common.search')\"\r\n                        optionLabel=\"name\"\r\n                        filterMatchMode=\"contains\"\r\n                        :filterFields=\"mondrianDescriptor.filterFields\"\r\n                        :emptyFilterMessage=\"$t('common.info.noDataFound')\"\r\n                        @change=\"showForm\"\r\n                        data-test=\"schemas-list\"\r\n                    >\r\n                        <template #empty>{{ $t('common.info.noDataFound') }}</template>\r\n                        <template #option=\"slotProps\">\r\n                            <div class=\"kn-list-item\" data-test=\"list-item\">\r\n                                <div class=\"kn-list-item-text\">\r\n                                    <span>{{ slotProps.option.name }}</span>\r\n                                    <span class=\"kn-list-item-text-secondary\">{{ slotProps.option.description }}</span>\r\n                                </div>\r\n                                <Button icon=\"pi pi-trash\" class=\"p-button-text p-button-rounded p-button-plain\" @click.stop=\"deleteSchemaConfirm(slotProps.option.id)\" data-test=\"delete-button\" />\r\n                            </div>\r\n                        </template>\r\n                    </Listbox>\r\n                </div>\r\n            </div>\r\n            <div class=\"p-col-8 p-sm-8 p-md-9 p-p-0 p-m-0 kn-page\">\r\n                <router-view @touched=\"touched = true\" @closed=\"closeForm\" @inserted=\"reloadPage\" />\r\n                <KnHint :title=\"'managers.mondrianSchemasManagement.hintTitle'\" :hint=\"'managers.mondrianSchemasManagement.hint'\" v-if=\"toggleHint\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport { iSchema } from './MondrianSchemas'\r\nimport { AxiosResponse } from 'axios'\r\nimport mondrianDescriptor from './MondrianSchemasManagementDescriptor.json'\r\nimport FabButton from '@/components/UI/KnFabButton.vue'\r\nimport KnHint from '@/components/UI/KnHint.vue'\r\nimport Listbox from 'primevue/listbox'\r\nimport mainStore from '../../../App.store'\r\n\r\nexport default defineComponent({\r\n    name: 'mondrian-schemas-management',\r\n    components: {\r\n        FabButton,\r\n        Listbox,\r\n        KnHint\r\n    },\r\n    computed: {\r\n        toggleHint() {\r\n            if (this.$route.fullPath == '/mondrian-schemas-management') {\r\n                return true\r\n            }\r\n            return false\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            loading: false,\r\n            touched: false,\r\n            schemas: [] as iSchema[],\r\n            mondrianDescriptor: mondrianDescriptor\r\n        }\r\n    },\r\n    setup() {\r\n        const store = mainStore()\r\n        return { store }\r\n    },\r\n    async created() {\r\n        await this.loadAllSchemas()\r\n    },\r\n    methods: {\r\n        async loadAllSchemas() {\r\n            this.loading = true\r\n            await this.$http\r\n                .get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + '2.0/mondrianSchemasResource')\r\n                .then((response: AxiosResponse<any>) => {\r\n                    this.schemas = response.data\r\n                })\r\n                .finally(() => (this.loading = false))\r\n        },\r\n        showForm(event: any) {\r\n            const path = event.value ? `/mondrian-schemas-management/${event.value.id}` : '/mondrian-schemas-management/new-schema'\r\n\r\n            if (!this.touched) {\r\n                this.$router.push(path)\r\n            } else {\r\n                this.$confirm.require({\r\n                    message: this.$t('common.toast.unsavedChangesMessage'),\r\n                    header: this.$t('common.toast.unsavedChangesHeader'),\r\n                    icon: 'pi pi-exclamation-triangle',\r\n                    accept: () => {\r\n                        this.touched = false\r\n                        this.$router.push(path)\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        deleteSchemaConfirm(schemaId: number) {\r\n            this.$confirm.require({\r\n                message: this.$t('common.toast.deleteMessage'),\r\n                header: this.$t('common.toast.deleteTitle'),\r\n                icon: 'pi pi-exclamation-triangle',\r\n                accept: () => this.deleteSchema(schemaId)\r\n            })\r\n        },\r\n        async deleteSchema(schemaId: number) {\r\n            await this.$http.delete(import.meta.env.VITE_RESTFUL_SERVICES_PATH + '2.0/mondrianSchemasResource/' + schemaId).then(() => {\r\n                this.store.setInfo({\r\n                    title: this.$t('common.toast.deleteTitle'),\r\n                    msg: this.$t('common.toast.deleteSuccess')\r\n                })\r\n                this.$router.push('/mondrian-schemas-management')\r\n                this.loadAllSchemas()\r\n            })\r\n        },\r\n        closeForm() {\r\n            this.touched = false\r\n        },\r\n        reloadPage() {\r\n            this.touched = false\r\n            this.loadAllSchemas()\r\n        }\r\n    }\r\n})\r\n</script>\r\n"],"names":["FabButton","Listbox","mainStore","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_withCtx","_createBlock","_createCommentVNode","_toDisplayString"],"mappings":"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"}