{"version":3,"file":"ImportExportCatalogFunction-f0feaa3d.js","sources":["../../../../modules/importExport/catalogFunction/ImportExportCatalogFunction.vue"],"sourcesContent":["<template>\r\n    <DataTable\r\n        ref=\"dt\"\r\n        :value=\"functions\"\r\n        v-model:selection=\"selectedCatalogFunctionItems\"\r\n        v-model:filters=\"filters\"\r\n        class=\"p-datatable-sm kn-table\"\r\n        dataKey=\"id\"\r\n        :paginator=\"true\"\r\n        :rows=\"10\"\r\n        paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n        :rowsPerPageOptions=\"[10, 15, 20]\"\r\n        responsiveLayout=\"stack\"\r\n        breakpoint=\"960px\"\r\n        :currentPageReportTemplate=\"$t('common.table.footer.paginated', { first: '{first}', last: '{last}', totalRecords: '{totalRecords}' })\"\r\n        :globalFilterFields=\"['name', 'type', 'tags']\"\r\n    >\r\n        <template #header>\r\n            <div class=\"table-header\">\r\n                <span class=\"p-input-icon-left\">\r\n                    <i class=\"pi pi-search\" />\r\n                    <InputText class=\"kn-material-input\" type=\"text\" v-model=\"filters['global'].value\" :placeholder=\"$t('common.search')\" badge=\"0\" />\r\n                </span>\r\n            </div>\r\n        </template>\r\n        <template #empty>\r\n            {{ $t('common.info.noDataFound') }}\r\n        </template>\r\n        <template #loading>\r\n            {{ $t('common.info.dataLoading') }}\r\n        </template>\r\n\r\n        <Column selectionMode=\"multiple\" :exportable=\"false\" :style=\"importExportDescriptor.export.catalogFunction.column.selectionMode.style\"></Column>\r\n        <Column field=\"name\" :header=\"$t(importExportDescriptor.export.catalogFunction.column.name.header)\" :sortable=\"true\" :style=\"importExportDescriptor.export.catalogFunction.column.name.style\"></Column>\r\n        <Column field=\"type\" :header=\"$t(importExportDescriptor.export.catalogFunction.column.type.header)\" :sortable=\"true\" :style=\"importExportDescriptor.export.catalogFunction.column.type.style\"> </Column>\r\n\r\n        <Column field=\"tags\" :header=\"$t(importExportDescriptor.export.catalogFunction.column.tags.header)\" :sortable=\"true\" :style=\"importExportDescriptor.export.catalogFunction.column.tags.style\">\r\n            <template #body=\"{ data }\">\r\n                <span class=\"p-float-label kn-material-input\">\r\n                    <Tag class=\"importExportTags p-mr-1\" v-for=\"(tag, index) in data.tags\" v-bind:key=\"index\" rounded :value=\"tag\"> </Tag>\r\n                </span>\r\n            </template>\r\n        </Column>\r\n    </DataTable>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport { AxiosResponse } from 'axios'\r\nimport Column from 'primevue/column'\r\nimport DataTable from 'primevue/datatable'\r\nimport { FilterMatchMode, FilterOperator } from 'primevue/api'\r\nimport InputText from 'primevue/inputtext'\r\n\r\nimport Tag from 'primevue/tag'\r\nimport importExportDescriptor from '../ImportExportDescriptor.json'\r\nimport { ICatalogFunctionTemplate } from '@/modules/importExport/catalogFunction/ICatalogFunctionTemplate'\r\n\r\nexport default defineComponent({\r\n    name: 'import-export-catalog-function',\r\n    components: { Column, DataTable, InputText, Tag },\r\n    props: { selectedItems: Object },\r\n    data() {\r\n        return {\r\n            filters: {},\r\n            importExportDescriptor: importExportDescriptor,\r\n            product: {},\r\n            selectedCatalogFunctionItems: [],\r\n            functions: [] as Array<ICatalogFunctionTemplate>,\r\n            FUNCTIONALITY: 'catalogFunction'\r\n        }\r\n    },\r\n    created() {\r\n        this.filters = {\r\n            global: { value: null, matchMode: FilterMatchMode.CONTAINS },\r\n            name: { operator: FilterOperator.OR, constraints: [{ value: null, matchMode: FilterMatchMode.STARTS_WITH }] },\r\n            type: { operator: FilterOperator.OR, constraints: [{ value: null, matchMode: FilterMatchMode.STARTS_WITH }] },\r\n            tags: { operator: FilterOperator.OR, constraints: [{ value: null, matchMode: FilterMatchMode.CONTAINS }] }\r\n        }\r\n        this.loadAllFunctions()\r\n    },\r\n    emits: ['onItemSelected', 'update:loading'],\r\n    methods: {\r\n        loadAllFunctions(): void {\r\n            this.$emit('update:loading', true)\r\n            this.$http\r\n                .get(import.meta.env.VITE_API_PATH + '1.0/functioncatalog')\r\n                .then((response: AxiosResponse<any>) => {\r\n                    this.functions = response.data\r\n\r\n                    if (this.selectedItems) {\r\n                        this.selectedCatalogFunctionItems = this.selectedItems[this.FUNCTIONALITY].filter((element) => {\r\n                            return this.functions.filter((el) => el.id === element.id).length == 1\r\n                        })\r\n                    }\r\n                })\r\n                .catch((error) => console.error(error))\r\n                .finally(() => {\r\n                    this.$emit('update:loading', false)\r\n                })\r\n        }\r\n    },\r\n    watch: {\r\n        selectedCatalogFunctionItems(newSelectedCatalogFunctionItems, oldSelectedCatalogFunctionItems) {\r\n            if (oldSelectedCatalogFunctionItems != newSelectedCatalogFunctionItems) {\r\n                this.$emit('onItemSelected', { items: this.selectedCatalogFunctionItems, functionality: this.FUNCTIONALITY })\r\n            }\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.imageOverlayPanel {\r\n    position: absolute !important;\r\n    top: 0px !important;\r\n    left: 0px !important;\r\n}\r\n\r\n.importExportTags {\r\n    background-color: var(--kn-color-default);\r\n}\r\n\r\n.p-paginator p-component p-paginator-bottom {\r\n    height: 50px;\r\n}\r\n</style>\r\n"],"names":["Column","DataTable","InputText","Tag","_popScopeId","_createElementVNode","_openBlock","_createBlock","_withCtx","_createVNode","_normalizeStyle","_createElementBlock","_Fragment","_renderList"],"mappings":"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"}