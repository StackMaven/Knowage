import{d as z,_ as E,r as s,y as S,o,c as i,f as g,w as p,a as d,G as u,t as k,B as A,C as I,z as y,h as l,j as L,k as N,a4 as O,ae as U,E as T,D as B,A as r}from"./index-1e676509.js";import{s as F}from"./menu.esm-6bee86d0.js";const j=z({name:"kn-list-button-renderer",components:{Menu:F},props:{buttons:Array,selectedItem:Object},data(){return{filteredButtons:[]}},emits:["click"],mounted(){this.filteredButtons=this.buttons.filter(e=>{var a;return!e.condition||((a=this.selectedItem)==null?void 0:a[e.condition])})},methods:{clickedButton(e,a){e.item=a,this.$emit("click",e)},toggleMenu(e){this.$refs.buttons_menu.toggle(e)}}}),K=["onClick"],R={class:"p-menuitem-text"};function X(e,a,m,h,f,$){const v=s("Button"),x=s("Menu"),w=S("tooltip");return e.filteredButtons.length>2?(o(),i(A,{key:0},[g(v,{icon:"fas fa-ellipsis-v",class:"p-button-text p-button-rounded p-button-plain",onClick:e.toggleMenu},null,8,["onClick"]),g(x,{id:"buttons_menu",ref:"buttons_menu",model:e.filteredButtons,popup:!0},{item:p(({item:n})=>[d("a",{class:"p-menuitem-link",role:"menuitem",tabindex:"0",onClick:c=>e.clickedButton(c,n)},[d("span",{class:u(["p-menuitem-icon",n.icon])},null,2),d("span",R,k(e.$t(n.label)),1)],8,K)]),_:1},8,["model"])],64)):(o(!0),i(A,{key:1},I(e.filteredButtons,(n,c)=>y((o(),l(v,{key:c,icon:n.icon,class:"p-button-text p-button-rounded p-button-plain",onClick:M=>e.clickedButton(M,n),"data-test":"delete-button-"+c},null,8,["icon","onClick","data-test"])),[[w,e.$t(n.label),void 0,{bottom:!0}]])),128))}var Q=E(j,[["render",X]]);const V=z({name:"kn-list-box",components:{Avatar:L,Badge:N,KnListButtonRenderer:Q,Listbox:O,Menu:F},props:{settings:{type:Object,required:!0},options:Array,selected:Object},data(){return{selectedSort:"label",selectedDirection:"",sortedOptions:[]}},emits:["click"],created(){this.selectedSort=this.settings.defaultSortField||"label",this.sort(null,this.selectedSort,!0)},updated(){this.sort(null,this.selectedSort,!0)},computed:{},methods:{clickedButton(e,a){const m=e.item&&e.item.emits;e.item=a,this.$emit(m||"click",e)},getBorderClass(e){return this.settings.statusBorder?"kn-list-item-"+this.settings.statusBorder.values[e[this.settings.statusBorder.property]]:""},isItemSelected(e){return this.selected?this.settings.selectProperty&&this.selected[this.settings.selectProperty]?this.selected[this.settings.selectProperty]==e[this.settings.selectProperty]:this.selected==e:!1},toggleSort(e){this.$refs.sortMenu.toggle(e)},sort(e,a,m){this.sortedOptions=this.options?this.options:[],this.selectedSort===a?this.selectedDirection=this.selectedDirection==="desc"?"asc":"desc":(this.selectedSort=a,this.selectedDirection="desc"),(e||!e&&this.selectedDirection==="")&&(this.selectedDirection===""&&(this.selectedDirection="desc"),m||this.selectedDirection==="desc"?this.sortedOptions.sort((h,f)=>h[this.selectedSort]>f[this.selectedSort]?1:-1):this.sortedOptions.sort((h,f)=>h[this.selectedSort]>f[this.selectedSort]?-1:1))},getTime(e){return U(e)}}}),J=["onClick"],Y={class:"p-menuitem-text"},_={class:"kn-list-item-text"},G={key:0},q={key:1,class:"kn-list-item-text-secondary kn-truncated"},Z=d("i",{class:"fas fa-check"},null,-1),W=["onClick"],H={class:"kn-list-item-text"},P={key:0},ee={key:1,class:"kn-list-item-text-secondary kn-truncated"},te={key:2,class:"kn-list-item-text-secondary kn-truncated"},oe=d("i",{class:"fas fa-check"},null,-1);function re(e,a,m,h,f,$){const v=s("Button"),x=s("Menu"),w=s("Avatar"),n=s("Badge"),c=s("KnListButtonRenderer"),M=s("router-link"),D=s("Listbox"),C=S("tooltip");return o(),l(D,{class:u(["kn-list knListBox",{noSorting:!e.settings.sortFields}]),options:e.sortedOptions,listStyle:"max-height:calc(100% - 62px)",filter:!0,filterPlaceholder:e.$t("common.search"),filterMatchMode:"contains",filterFields:e.settings.filterFields,emptyFilterMessage:e.$t("common.info.noDataFound"),"data-test":"list"},T({option:p(t=>[e.settings.interaction.type==="router"?(o(),l(M,{key:0,class:"kn-decoration-none",to:{name:e.settings.interaction.path,params:{id:t.option.id}},exact:""},{default:p(()=>[y((o(),i("div",{class:u(["kn-list-item",e.getBorderClass(t.option)]),"data-test":"list-item"},[e.settings.avatar&&e.settings.avatar.values[t.option[e.settings.avatar.property]]?(o(),l(w,{key:0,icon:e.settings.avatar.values[t.option[e.settings.avatar.property]].icon,shape:"circle",style:B(e.settings.avatar.values[t.option[e.settings.avatar.property]].style)},null,8,["icon","style"])):r("",!0),d("div",_,[e.settings.titleField!==!1?(o(),i("span",G,k(t.option[e.settings.titleField||"label"]),1)):r("",!0),e.settings.textField!==!1?(o(),i("span",q,k(t.option[e.settings.textField||"name"]),1)):r("",!0)]),e.settings.badgeField?(o(),l(n,{key:1,value:t.option[e.settings.badgeField],severity:e.settings.badgeSeverity||"info"},null,8,["value","severity"])):r("",!0),e.settings.badgeIcon&&t.option[e.settings.badgeIcon]===!0?(o(),l(n,{key:2,severity:e.settings.badgeSeverity||"info"},{default:p(()=>[Z]),_:1},8,["severity"])):r("",!0),g(c,{buttons:e.settings.buttons,onClick:b=>e.clickedButton(b,t.option)},null,8,["buttons","onClick"])],2)),[[C,t.option[e.settings.tooltipField||"description"]]])]),_:2},1032,["to"])):r("",!0),!e.settings.interaction||e.settings.interaction.type==="event"?y((o(),i("div",{key:1,class:u(["kn-list-item",[{"router-link-active":e.isItemSelected(t.option)},e.getBorderClass(t.option)]]),onClick:b=>e.clickedButton(b,t.option),"data-test":"list-item"},[e.settings.avatar&&e.settings.avatar.values[t.option[e.settings.avatar.property]]?(o(),l(w,{key:0,icon:e.settings.avatar.values[t.option[e.settings.avatar.property]].icon,shape:"circle",style:B(e.settings.avatar.values[t.option[e.settings.avatar.property]].style)},null,8,["icon","style"])):r("",!0),d("div",H,[e.settings.titleField!==!1?(o(),i("span",P,k(t.option[e.settings.titleField||"label"]),1)):r("",!0),e.settings.textField!==!1&&!e.settings.textFieldType?(o(),i("span",ee,k(t.option[e.settings.textField||"name"]),1)):r("",!0),e.settings.textField!==!1&&e.settings.textFieldType&&e.settings.textFieldType==="date"?(o(),i("span",te,k(e.getTime(t.option[e.settings.textField||"name"])),1)):r("",!0)]),e.settings.badgeField&&t.option[e.settings.badgeField]?(o(),l(n,{key:1,value:t.option[e.settings.badgeField],severity:e.settings.badgeSeverity||"info"},null,8,["value","severity"])):r("",!0),e.settings.badgeIcon&&t.option[e.settings.badgeIcon]===!0?(o(),l(n,{key:2,severity:e.settings.badgeSeverity||"info"},{default:p(()=>[oe]),_:1},8,["severity"])):r("",!0),g(c,{buttons:e.settings.buttons,selectedItem:t.option,onClick:b=>e.clickedButton(b,t.option)},null,8,["buttons","selectedItem","onClick"])],10,W)),[[C,t.option[e.settings.tooltipField||"description"]]]):r("",!0)]),_:2},[e.settings.sortFields?{name:"header",fn:p(()=>[y(g(v,{icon:"fas fa-sort-amount-down-alt",class:"p-button-text p-button-rounded p-button-plain headerButton",onClick:e.toggleSort},null,8,["onClick"]),[[C,e.$t("common.sort"),void 0,{bottom:!0}]]),g(x,{id:"sortMenu",ref:"sortMenu",model:e.settings.sortFields,popup:!0},{item:p(({item:t})=>[d("a",{class:"p-menuitem-link",role:"menuitem",tabindex:"0",onClick:b=>e.sort(b,t.name||t)},[e.selectedDirection==="asc"?(o(),i("span",{key:0,class:u(["p-menuitem-icon fas",{"fa-sort-amount-up-alt":e.selectedSort===(t.name||t)}])},null,2)):(o(),i("span",{key:1,class:u(["p-menuitem-icon fas",{"fa-sort-amount-down-alt":e.selectedSort===(t.name||t)}])},null,2)),d("span",Y,k(e.$t(t.label||t)),1)],8,J)]),_:1},8,["model"])])}:void 0]),1032,["options","class","filterPlaceholder","filterFields","emptyFilterMessage"])}var ie=E(V,[["render",re]]);export{ie as K};
//# sourceMappingURL=KnListBox-94855720.js.map
