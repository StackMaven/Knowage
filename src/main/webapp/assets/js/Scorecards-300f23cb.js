import{f as b}from"./filterHelper-a723991a.js";import{_ as g,d as $,l as D,n as k,X as S,s as v,a6 as y,W as C,r,o as F,c as _,f as a,w as s,g as d,t as i,a as n,D as w}from"./index-1e676509.js";import{d as T}from"./ScorecardsDescriptor-357437dd.js";const B=$({name:"scorecards",components:{Column:D,DataTable:k,KnFabButton:S},data(){return{scorecardsDescriptor:T,scorecards:[],filters:{global:[b]}}},computed:{},setup(){return{store:v()}},async created(){await this.loadScorecards()},methods:{async loadScorecards(){this.store.setLoading(!0),await this.$http.get("/knowage/restful-services/1.0/kpiee/listScorecard").then(e=>this.scorecards=e.data),this.store.setLoading(!1)},getFormattedDate(e){const t=y(e).format("DD/MM/YYYY");return C(t,"","DD/MM/YYYY")},openScorecardDetail(e=null){const t=e?`/scorecards/${e.id}`:"/scorecards/new-scorecard";this.$router.push(t)},deleteScorecardConfirm(e){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteConfirmTitle"),icon:"pi pi-exclamation-triangle",accept:()=>this.deleteScorecard(e)})},async deleteScorecard(e){await this.$http.delete(`/knowage/restful-services/1.0/kpiee/${e.id}/deleteScorecard`).then(()=>{this.store.setInfo({title:this.$t("common.toast.deleteTitle"),msg:this.$t("common.toast.deleteSuccess")}),this.removeScorecard(e)}).catch(()=>{})},removeScorecard(e){const t=this.scorecards.findIndex(c=>c.id===e.id);t!==-1&&this.scorecards.splice(t,1)}}}),Y={class:"kn-page"},V={class:"kn-page-content p-grid p-m-0"},M={class:"p-col"},I={class:"table-header"},K={class:"p-input-icon-left"},L=n("i",{class:"pi pi-search"},null,-1);function N(e,t,c,U,q,z){const p=r("KnFabButton"),m=r("Toolbar"),u=r("InputText"),l=r("Column"),h=r("Button"),f=r("DataTable");return F(),_("div",Y,[a(m,{class:"kn-toolbar kn-toolbar--primary"},{start:s(()=>[d(i(e.$t("managers.scorecards.title")),1)]),end:s(()=>[a(p,{icon:"fas fa-plus",onClick:t[0]||(t[0]=o=>e.openScorecardDetail())})]),_:1}),n("div",V,[n("div",M,[a(f,{value:e.scorecards,paginator:e.scorecards.length>20,rows:20,class:"p-datatable-sm kn-table",dataKey:"id",filters:e.filters,"onUpdate:filters":t[2]||(t[2]=o=>e.filters=o),globalFilterFields:e.scorecardsDescriptor.globalFilterFields,responsiveLayout:"stack",breakpoint:"960px",onRowClick:t[3]||(t[3]=o=>e.openScorecardDetail(o.data))},{header:s(()=>[n("div",I,[n("span",K,[L,a(u,{class:"kn-material-input",modelValue:e.filters.global.value,"onUpdate:modelValue":t[1]||(t[1]=o=>e.filters.global.value=o),placeholder:e.$t("common.search")},null,8,["modelValue","placeholder"])])])]),empty:s(()=>[d(i(e.$t("common.info.noDataFound")),1)]),default:s(()=>[a(l,{class:"kn-truncated",field:"name",header:e.$t("common.name"),sortable:!0},null,8,["header"]),a(l,{class:"kn-truncated",field:"creationDate",header:e.$t("common.creationDate"),sortable:!0},{body:s(o=>[n("span",null,i(e.getFormattedDate(o.data.creationDate)),1)]),_:1},8,["header"]),a(l,{class:"kn-truncated",field:"author",header:e.$t("common.author"),sortable:!0},null,8,["header"]),a(l,{style:w(e.scorecardsDescriptor.iconColumnStyle)},{body:s(o=>[a(h,{icon:"pi pi-trash",class:"p-button-link",onClick:E=>e.deleteScorecardConfirm(o.data)},null,8,["onClick"])]),_:1},8,["style"])]),_:1},8,["value","paginator","filters","globalFilterFields"])])])])}var j=g(B,[["render",N]]);export{j as default};
//# sourceMappingURL=Scorecards-300f23cb.js.map
