import{d as O,a5 as B,aE as Z,aH as V,ag as $,ar as _,W as P,_ as T,r as d,o as r,c as p,h as g,A as w,D as y,B as z,i as tt,w as v,f as M,g as R,t as f,a as u,l as ot,n as et,aI as j,a7 as rt,ae as Q,aJ as G,y as nt,C as N,z as X,G as at,as as it,ad as lt,ai as dt,s as st}from"./index-1e676509.js";import{s as L}from"./checkbox.esm-fa6c8259.js";import{s as J}from"./calendar.esm-60a451ba.js";const ct=1e3,pt=15,bt={buttonsContainer:{"flex-grow":0},fieldsContainer:{"flex-grow":1},filterContainer:{display:"flex"},filtersButton:{height:"40px",width:"100px"}};var E={paginationLimit:ct,paginationNumberOfItems:pt,styles:bt};function W(t){switch(t){case"int":case"float":case"decimal":case"long":return"number";case"date":return"date";default:return"text"}}function K(t){return t==="float"?".01":t==="int"?"1":"any"}const H="^(####|#.###|#,###){1}([,.]?)(#*)$",kt=t=>{if(!t.format)return null;const o=t.format.trim().match(H);if(!o)return null;const e=o[1].includes(".")||o[1].includes(","),n=o[3].length;return{useGrouping:e,minFractionDigits:n,maxFractionDigits:n}},ut={style:{width:"200px"}},mt={style:{color:"white","margin-bottom":"2rem"}},gt={style:{"justify-content":"center","max-width":"130px",width:"100%"}},ht={style:{"max-width":"40px"}},ft={header:{color:"#3b678c",height:"25px"},iconColumn:{"text-align":"center",width:"30px"},inputFields:{border:"none",height:"20px"},row:{"padding-left":"15px"},table:{"border-collapse":"collapse","table-layout":"fixed",width:"100%"}},vt={trashNormal:{color:"#a7a7a7"}};var Y={dateColumn:ut,headerIconColumn:mt,iconColumn:gt,numerationColumn:ht,pivotStyles:ft,primevueTableStyles:vt};const wt=O({name:"registry-datatable-editable-field",components:{Calendar:J,Dropdown:B,InputNumber:Z},props:{column:{type:Object},propRow:{type:Object},comboColumnOptions:{type:Array}},emits:["rowChanged","dropdownChanged","dropdownOpened"],data(){return{registryDatatableDescriptor:Y,row:{},columnOptions:[],options:[],useGrouping:!1,locale:"",minFractionDigits:2,maxFractionDigits:2}},watch:{propRow(){this.loadRow()},comboColumnOptions:{handler(){this.loadColumnOptions()},deep:!0}},created(){this.setDefaultLocale(),this.loadRow(),this.loadColumnOptions()},computed:{getCurrentLocaleDefaultDateFormat(){return t=>t.format||V()}},methods:{loadRow(){this.row=this.propRow,this.column&&(this.row[this.column.field]||this.row[this.column.field]===0||this.row[this.column.field]==="")&&(this.column.columnInfo.type==="date"&&typeof this.row[this.column.field]=="string"?this.row[this.column.field]=this.row[this.column.field]?new Date($(this.row[this.column.field],"yyyy-MM-dd","yyyy-MM-dd")):null:this.column.columnInfo.type==="timestamp"&&typeof this.row[this.column.field]=="string"&&this.row[this.column.field]!==""?this.row[this.column.field]=new Date($(this.row[this.column.field],"yyyy-MM-dd HH:mm:ss.S","yyyy-MM-dd HH:mm:ss.S")):this.column.editorType!=="COMBO"&&this.column.columnInfo.type!=="date"&&this.column.columnInfo.type!=="timestamp"&&this.getDataType(this.column.columnInfo.type)==="number"&&this.formatNumberConfiguration())},formatNumberConfiguration(){const t=kt(this.column);t&&(this.useGrouping=t.useGrouping,this.minFractionDigits=t.minFractionDigits,this.maxFractionDigits=t.maxFractionDigits)},setDefaultLocale(){const t=_();this.locale=t?t.replace("_","-"):""},getDataType(t){return W(t)},getStep(t){return K(t)},loadColumnOptions(){this.columnOptions=this.comboColumnOptions},getFormattedDate(t,o,e){return P(t,o,e)},onInputNumberChange(){setTimeout(()=>this.$emit("rowChanged",this.row),250)}}});function yt(t,o,e,n,s,k){var a,A,b,i,h,I,D,S,F;const c=d("InputText"),m=d("InputNumber"),l=d("Dropdown"),x=d("Calendar");return r(),p(z,null,[t.column&&t.column.editorType!=="COMBO"&&((a=t.column.columnInfo)==null?void 0:a.type)!=="date"&&((A=t.column.columnInfo)==null?void 0:A.type)!=="timestamp"&&t.getDataType(t.column.columnInfo.type)==="text"?(r(),g(c,{key:0,class:"kn-material-input",type:"text",step:t.getStep(t.column.columnInfo.type),modelValue:t.row[t.column.field],"onUpdate:modelValue":o[0]||(o[0]=C=>t.row[t.column.field]=C),onInput:o[1]||(o[1]=C=>t.$emit("rowChanged",t.row))},null,8,["step","modelValue"])):w("",!0),t.column&&t.column.editorType!=="COMBO"&&((b=t.column.columnInfo)==null?void 0:b.type)!=="date"&&((i=t.column.columnInfo)==null?void 0:i.type)!=="timestamp"&&t.getDataType(t.column.columnInfo.type)==="number"?(r(),g(m,{key:1,class:"kn-material-input p-inputtext-sm",modelValue:t.row[t.column.field],"onUpdate:modelValue":o[2]||(o[2]=C=>t.row[t.column.field]=C),useGrouping:t.useGrouping,locale:t.locale,minFractionDigits:t.minFractionDigits,maxFractionDigits:t.maxFractionDigits,disabled:!t.column.isEditable,onBlur:t.onInputNumberChange},null,8,["modelValue","useGrouping","locale","minFractionDigits","maxFractionDigits","disabled","onBlur"])):t.column&&t.column.editorType==="COMBO"?(r(),g(l,{key:2,class:"kn-material-input",modelValue:t.row[t.column.field],"onUpdate:modelValue":o[3]||(o[3]=C=>t.row[t.column.field]=C),options:t.columnOptions&&t.columnOptions[t.column.field]?t.columnOptions[t.column.field][t.row[t.column.dependences]]:[],optionValue:"column_1",optionLabel:"column_1",onChange:o[4]||(o[4]=C=>t.$emit("dropdownChanged",{row:t.row,column:t.column})),onBeforeShow:o[5]||(o[5]=C=>t.$emit("dropdownOpened",{row:t.row,column:t.column})),filter:!0},null,8,["modelValue","options"])):t.column&&(((h=t.column.columnInfo)==null?void 0:h.type)==="date"||((I=t.column.columnInfo)==null?void 0:I.type)==="timestamp")?(r(),g(x,{key:3,style:y(t.registryDatatableDescriptor.pivotStyles.inputFields),class:"pivot-calendar",modelValue:t.row[t.column.field],"onUpdate:modelValue":o[6]||(o[6]=C=>t.row[t.column.field]=C),showTime:((D=t.column.columnInfo)==null?void 0:D.type)==="timestamp",showSeconds:((S=t.column.columnInfo)==null?void 0:S.type)==="timestamp",showButtonBar:!0,onDateSelect:o[7]||(o[7]=C=>t.$emit("rowChanged",t.row)),dateFormat:((F=t.column.columnInfo)==null?void 0:F.type)==="date"?t.getCurrentLocaleDefaultDateFormat(t.column):""},null,8,["style","modelValue","showTime","showSeconds","dateFormat"])):w("",!0)],64)}var xt=T(wt,[["render",yt],["__scopeId","data-v-1d18c2c8"]]);const Ct={style:{width:"60vw"}};var Mt={dialog:Ct};const At=O({name:"registry-datatable-warning-dialog",components:{Checkbox:L,Dialog:tt},emits:["close"],props:{visible:{type:Boolean},columns:{type:Array,required:!0}},data(){return{registryDatatableWarningDialogDescriptor:Mt,stopWarnings:!1}},computed:{columnFileds(){let t="";for(let o=0;o<this.columns.length;o++)t+=this.columns[o].title+(o===this.columns.length-1?" ":", ");return t}},created(){},methods:{}}),Et={class:"p-mt-5"},Dt={class:"p-mt-3"},Rt={class:"p-ml-2"};function zt(t,o,e,n,s,k){const c=d("Checkbox"),m=d("Button"),l=d("Dialog");return r(),g(l,{style:y(t.registryDatatableWarningDialogDescriptor.dialog.style),header:t.$t("documentExecution.registry.warning"),visible:t.visible,modal:!0,class:"p-fluid kn-dialog--toolbar--primary",closable:!1},{footer:v(()=>[M(m,{class:"kn-button kn-button--primary",onClick:o[1]||(o[1]=x=>t.$emit("close",{stopWarnings:t.stopWarnings,columnField:t.columns[0].dependences}))},{default:v(()=>[R(f(t.$t("common.close")),1)]),_:1})]),default:v(()=>[u("div",Et,[u("p",null,[R(f(t.$t("documentExecution.registry.column"))+" ",1),u("b",null,f(t.columnFileds),1),R(" "+f(t.$t("documentExecution.registry.warningDependences")),1)])]),u("div",Dt,[M(c,{modelValue:t.stopWarnings,"onUpdate:modelValue":o[0]||(o[0]=x=>t.stopWarnings=x),binary:!0},null,8,["modelValue"]),u("label",Rt,f(t.$t("documentExecution.registry.warningCheckbox")),1)])]),_:1},8,["style","header","visible"])}var q=T(At,[["render",zt]]);const Ot=O({name:"registry-datatable",components:{Checkbox:L,Column:ot,DataTable:et,RegistryDatatableEditableField:xt,RegistryDatatableWarningDialog:q},props:{propColumns:{type:Array},propRows:{type:Array,required:!0},columnMap:{type:Object},propConfiguration:{type:Object},pagination:{type:Object},entity:{type:String},id:{type:String},stopWarningsState:{type:Array}},emits:["rowChanged","rowDeleted","pageChanged","warningChanged"],data(){return{registryDescriptor:E,registryDatatableDescriptor:Y,columns:[],rows:[],configuration:{},comboColumnOptions:[],buttons:{enableButtons:!1,enableDeleteRecords:!1,enableAddRecords:!1},lazyParams:{},dependentColumns:[],selectedRow:null,warningVisible:!1,stopWarnings:[],flagShown:"flag-shown",flagHidden:"flag-hidden",first:0}},watch:{propColumns(){this.loadColumns()},propRows:{handler(){this.loadRows()},deep:!0},propConfiguration(){this.loadConfiguration()},pagination:{handler(){var t;this.loadPagination(),this.first=(t=this.pagination)==null?void 0:t.start},deep:!0}},created(){this.loadColumns(),this.loadRows(),this.loadConfiguration(),this.loadPagination(),this.loadWarningState()},computed:{getCurrentLocaleDefaultDateFormat(){return t=>t.isEditable?t.format||V():j()}},methods:{loadColumns(){var t;this.columns=[{field:"id",title:"",size:"",isVisible:!0,isEditable:!1,columnInfo:{type:"int"}}],(t=this.propColumns)==null||t.forEach(o=>{o.isVisible&&this.columns.push(o)}),this.setColumnDependencies(),this.loadInitialDropdownOptions()},setColumnDependencies(){this.columns.forEach(t=>{if(t.dependences){const o=this.columns.findIndex(e=>e.field===t.dependences);o!==-1&&(this.columns[o].hasDependencies?this.columns[o].hasDependencies.push(t):this.columns[o].hasDependencies=[t],this.comboColumnOptions[t.dependences]=[])}})},loadInitialDropdownOptions(){this.columns.forEach(t=>{t.editorType==="COMBO"&&this.addColumnOptions({column:t,row:{}})})},loadRows(){this.rows=rt(this.propRows)},loadConfiguration(){this.configuration=this.propConfiguration;for(let t=0;t<this.configuration.length;t++)this.configuration[t].name==="enableButtons"?this.buttons.enableButtons=this.configuration[t].value==="true":(this.configuration[t].name==="enableDeleteRecords"&&(this.buttons.enableDeleteRecords=this.configuration[t].value==="true"),this.configuration[t].name==="enableAddRecords"&&(this.buttons.enableAddRecords=this.configuration[t].value==="true"))},loadPagination(){this.lazyParams={...this.pagination}},loadWarningState(){this.stopWarnings=this.stopWarningsState},onPage(t){this.lazyParams={paginationStart:t.first,paginationLimit:t.rows,paginationEnd:t.first+t.rows,size:this.lazyParams.size},this.$emit("pageChanged",this.lazyParams)},rowDeleteConfirm(t,o){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteTitle"),icon:"pi pi-exclamation-triangle",accept:()=>this.deleteRow(t,o)})},deleteRow(t,o){o.isNew?this.rows.splice(t,1):this.$emit("rowDeleted",o)},setDataType(t){switch(t){case"int":case"float":case"decimal":case"long":return"number";case"date":return"date";default:return"text"}},getStep(t){return t==="float"?".01":t==="int"?"1":"any"},getFormattedDate(t,o,e){return $(t,o,e)},getFormattedDateTime(t,o,e){return Q(t,o,e)},getFormattedNumber(t,o){return G(t,void 0,null)},addColumnOptions(t){const o=t.column,e=t.row;this.comboColumnOptions[o.field]||(this.comboColumnOptions[o.field]=[]),this.comboColumnOptions[o.field][e[o.dependences]]||this.loadColumnOptions(o,e)},async loadColumnOptions(t,o){var c;const e=t.subEntity?"::"+t.subEntity+"("+t.foreignKey+")":"",n=this.entity+e+":"+t.field,s=this.entity+e+":"+((c=t.orderBy)!=null?c:t.field),k=new URLSearchParams({ENTITY_ID:n,QUERY_TYPE:"standard",ORDER_ENTITY:s,ORDER_TYPE:"asc",QUERY_ROOT_ENTITY:"true"});t.dependences&&o&&o[t.dependences]&&k.append("DEPENDENCES",this.entity+e+":"+t.dependences+"="+o[t.dependences]),await this.$http.post(`/knowageqbeengine/servlet/AdapterHTTP?ACTION_NAME=GET_FILTER_VALUES_ACTION&SBI_EXECUTION_ID=${this.id}`,k,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(m=>this.comboColumnOptions[t.field][o[t.dependences]]=m.data.rows)},addNewRow(){const t={id:this.rows.length+1,isNew:!0};this.columns.forEach(o=>{var e;o.isVisible&&o.field!=="id"&&(t[o.field]=(e=o.defaultValue)!=null?e:"")}),this.rows.unshift(t),this.lazyParams.size<=E.paginationLimit&&(this.first=0),this.$emit("rowChanged",t)},onDropdownChange(t){const o=t.column,e=t.row;this.selectedRow=e,o.hasDependencies&&(this.dependentColumns=[],this.setDependentColumns(o),this.stopWarnings[o.field]?this.clearDependentColumnsValues():this.dependentColumns.forEach(n=>{this.selectedRow[n.field]&&(this.warningVisible=!0)})),e.edited=!0,this.$emit("rowChanged",e)},onWarningDialogClose(t){t.stopWarnings&&(this.stopWarnings[t.columnField]=!0,this.$emit("warningChanged",this.stopWarnings)),this.clearDependentColumnsValues(),this.warningVisible=!1},clearDependentColumnsValues(){this.dependentColumns.forEach(t=>this.selectedRow[t.field]=""),this.selectedRow.edited=!0,this.$emit("rowChanged",this.selectedRow)},setDependentColumns(t){let o=t;!o.hasDependencies||o.hasDependencies.forEach(e=>{this.dependentColumns.push(e),this.setDependentColumns(e)})},setRowEdited(t){t.edited=!0,this.$emit("rowChanged",t)},onCellEditComplete(t){let o=t.newData.id;if(o){var e=this.rows.findIndex(n=>n.id==o);this.rows[e]=t.newData}},showDefaultNumberFormatIcon(t){if(!t||!t.columnInfo||!t.format)return!1;const o=W(t.columnInfo.type),e=t.format.trim().match(H);return o==="number"&&!e}}}),Tt={class:"table-header"},It={key:0,class:"pi pi-exclamation-triangle kn-cursor-pointer"},$t=["data-test"],St=["data-test"],Ft={key:2},Nt={key:0},Pt={key:1},Vt={key:2};function Ut(t,o,e,n,s,k){const c=d("Column"),m=d("Checkbox"),l=d("RegistryDatatableEditableField"),x=d("Button"),a=d("DataTable"),A=d("RegistryDatatableWarningDialog"),b=nt("tooltip");return r(),p(z,null,[M(a,{class:"p-datatable-sm kn-table",scrollable:!0,first:t.first,"onUpdate:first":o[0]||(o[0]=i=>t.first=i),value:t.rows,dataKey:"id",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",lazy:t.lazyParams.size>t.registryDescriptor.paginationLimit,paginator:!0,rows:t.registryDescriptor.paginationNumberOfItems,currentPageReportTemplate:t.$t("common.table.footer.paginated",{first:"{first}",last:"{last}",totalRecords:"{totalRecords}"}),totalRecords:t.lazyParams.size,stripedRows:"",showGridlines:"",onPage:o[1]||(o[1]=i=>t.onPage(i))},{empty:v(()=>[R(f(t.$t("common.info.noDataFound")),1)]),default:v(()=>[M(c,{class:"kn-truncated",style:y(t.registryDatatableDescriptor.numerationColumn.style),headerStyle:t.registryDatatableDescriptor.numerationColumn.style,field:t.columns[0].field,header:t.columns[0].title},null,8,["style","headerStyle","field","header"]),(r(!0),p(z,null,N(t.columns.slice(1),i=>(r(),g(c,{key:i.field,class:"kn-truncated",field:i.field,style:y(`min-width:${i.size}px`),sortable:i.columnInfo.type!=="timestamp"&&i.columnInfo.type!=="date"},{header:v(()=>{var h;return[u("div",Tt,[t.showDefaultNumberFormatIcon(i)?X((r(),p("i",It,null,512)),[[b,t.$t("documentExecution.registry.numberFormatNotSupported"),void 0,{top:!0}]]):w("",!0),R(" "+f(i.title)+" ",1),i.isEditable&&((h=i.columnInfo)==null?void 0:h.type)!=="boolean"?X((r(),p("i",{key:1,class:"pi pi-pencil edit-icon p-ml-2","data-test":i.field+"-icon"},null,8,$t)),[[b,t.$t("documentExecution.registry.isEditableField"),void 0,{bottom:!0}]]):w("",!0)])]}),body:v(h=>{var I,D,S,F,C;return[u("div",{class:"p-d-flex p-flex-row editableField","data-test":i.field+"-body"},[i.editorType=="TEXT"&&((I=i.columnInfo)==null?void 0:I.type)==="boolean"?(r(),g(m,{key:0,modelValue:h.data[h.column.props.field],"onUpdate:modelValue":U=>h.data[h.column.props.field]=U,binary:!0,onChange:U=>t.setRowEdited(h.data),disabled:!i.isEditable},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])):i.isEditable||((D=i.columnInfo)==null?void 0:D.type)==="int"||((S=i.columnInfo)==null?void 0:S.type)==="float"?(r(),g(l,{key:1,column:i,propRow:h.data,comboColumnOptions:t.comboColumnOptions,onRowChanged:U=>t.setRowEdited(h.data),onDropdownChanged:t.onDropdownChange,onDropdownOpened:t.addColumnOptions},null,8,["column","propRow","comboColumnOptions","onRowChanged","onDropdownChanged","onDropdownOpened"])):i.isEditable?w("",!0):(r(),p("span",Ft,[h.data[i.field]&&((F=i.columnInfo)==null?void 0:F.type)==="date"?(r(),p("span",Nt,f(t.getFormattedDate(h.data[i.field],"yyyy-MM-dd",t.getCurrentLocaleDefaultDateFormat(i))),1)):h.data[i.field]&&((C=i.columnInfo)==null?void 0:C.type)==="timestamp"?(r(),p("span",Pt,f(t.getFormattedDateTime(h.data[i.field],{dateStyle:"short",timeStyle:"medium"},!0)),1)):(r(),p("span",Vt,f(h.data[i.field]),1))]))],8,St)]}),_:2},1032,["field","style","sortable"]))),128)),M(c,{style:y(t.registryDatatableDescriptor.iconColumn.style),headerStyle:t.registryDatatableDescriptor.iconColumn.style},{header:v(()=>[t.buttons.enableButtons||t.buttons.enableAddRecords?(r(),g(x,{key:0,class:"kn-button",label:t.$t("managers.businessModelManager.add"),onClick:t.addNewRow,"data-test":"new-row-button"},null,8,["label","onClick"])):w("",!0)]),body:v(i=>[t.buttons.enableButtons||t.buttons.enableDeleteRecords?(r(),g(x,{key:0,class:"p-button-link",onClick:h=>t.rowDeleteConfirm(i.index,i.data)},{default:v(()=>[u("i",{class:at(["pi pi-flag",[i.data.edited?t.flagShown:t.flagHidden]]),style:y(t.registryDatatableDescriptor.primevueTableStyles.trashNormal)},null,6),u("i",{class:"p-button-link pi pi-trash p-ml-2",style:y(t.registryDatatableDescriptor.primevueTableStyles.trashNormal)},null,4)]),_:2},1032,["onClick"])):w("",!0)]),_:1},8,["style","headerStyle"])]),_:1},8,["first","value","lazy","rows","currentPageReportTemplate","totalRecords"]),M(A,{visible:t.warningVisible,columns:t.dependentColumns,onClose:t.onWarningDialogClose},null,8,["visible","columns","onClose"])],64)}var Bt=T(Ot,[["render",Ut]]);const Lt={style:{width:"200px"}},Wt={style:{color:"white","margin-bottom":"2rem"}},Yt={style:{"text-align":"center",width:"3rem"}},Xt={style:{"text-align":"center",width:"3rem"}},jt={header:{color:"#3b678c",height:"25px"},iconColumn:{"text-align":"center",width:"30px"},inputFields:{border:"none",height:"20px",width:"100%"},row:{"padding-left":"15px"},table:{"border-collapse":"collapse","table-layout":"fixed",width:"100%"}},Qt={dropdown:{width:"90%"},inputField:{height:"20px",width:"80%"},trashEdited:{color:"#fbc53d"},trashNormal:{color:"#a7a7a7"}},Gt={paginationLimit:1e3,rowsPerPage:15};var Jt={dateColumn:Lt,headerIconColumn:Wt,iconColumn:Yt,numerationColumn:Xt,pivotStyles:jt,primevueTableStyles:Qt,tableOptions:Gt};const Kt=O({name:"kn-pivot-table-editable-field",components:{Calendar:J,Dropdown:B},props:{column:{type:Object},propRow:{type:Object},comboColumnOptions:{type:Array}},emits:["rowChanged","dropdownChanged","dropdownOpened"],data(){return{knPivotTableDescriptor:Jt,row:{},columnOptions:[]}},watch:{propRow(){this.loadRow()},comboColumnOptions:{handler(){this.loadColumnOptions()},deep:!0}},created(){this.loadRow(),this.loadColumnOptions()},computed:{getCurrentLocaleDefaultDateFormat(){return t=>t.format||V()}},methods:{loadRow(){var o,e,n,s;this.row=this.propRow;let t=(e=this.row[(o=this.column)==null?void 0:o.field])==null?void 0:e.data;t&&typeof t=="string"&&(((n=this.column)==null?void 0:n.columnInfo.type)==="date"?this.row[this.column.field].data=new Date($(t,"yyyy-MM-dd","yyyy-MM-dd")):((s=this.column)==null?void 0:s.columnInfo.type)==="timestamp"&&this.row[this.column.field]!==""&&(this.row[this.column.field].data=new Date($(t,"yyyy-MM-dd HH:mm:ss.S","yyyy-MM-dd HH:mm:ss.S"))))},setDataType(t){return W(t)},getStep(t){return K(t)},loadColumnOptions(){this.columnOptions=this.comboColumnOptions},getFormattedDate(t,o){return P(t,o)}}}),Ht={key:0},qt={key:0};function Zt(t,o,e,n,s,k){var x;const c=d("InputText"),m=d("Calendar"),l=d("Dropdown");return t.column?(r(),p("div",Ht,[t.column.editorType!=="COMBO"&&t.column.columnInfo.type!=="date"&&t.column.columnInfo.type!=="timestamp"?(r(),g(c,{key:0,style:y(t.knPivotTableDescriptor.pivotStyles.inputFields),class:"kn-material-input",type:t.setDataType(t.column.columnInfo.type),step:t.getStep(t.column.columnInfo.type),modelValue:t.row[t.column.field].data,"onUpdate:modelValue":o[0]||(o[0]=a=>t.row[t.column.field].data=a),onInput:o[1]||(o[1]=a=>t.$emit("rowChanged",t.row))},null,8,["style","type","step","modelValue"])):t.column.columnInfo.type==="date"||t.column.columnInfo.type==="timestamp"?(r(),g(m,{key:1,style:y(t.knPivotTableDescriptor.pivotStyles.inputFields),class:"pivot-calendar",modelValue:t.row[t.column.field].data,"onUpdate:modelValue":o[2]||(o[2]=a=>t.row[t.column.field].data=a),showTime:t.column.columnInfo.type==="timestamp",showSeconds:t.column.columnInfo.type==="timestamp",showButtonBar:!0,onDateSelect:o[3]||(o[3]=a=>t.$emit("rowChanged",t.row)),dateFormat:t.column.columnInfo.type==="date"?t.getCurrentLocaleDefaultDateFormat(t.column):""},null,8,["style","modelValue","showTime","showSeconds","dateFormat"])):t.column.editorType==="COMBO"?(r(),g(l,{key:2,class:"kn-material-input",modelValue:t.row[t.column.field].data,"onUpdate:modelValue":o[4]||(o[4]=a=>t.row[t.column.field].data=a),options:t.columnOptions[t.column.field]?t.columnOptions[t.column.field][(x=t.row[t.column.dependences])==null?void 0:x.data]:[],placeholder:t.$t("documentExecution.registry.select"),onChange:o[5]||(o[5]=a=>t.$emit("dropdownChanged",{row:t.row,column:t.column})),onBeforeShow:o[6]||(o[6]=a=>t.$emit("dropdownOpened",{row:t.row,column:t.column}))},{value:v(a=>[a.value?(r(),p("div",qt,[u("span",null,f(a.value),1)])):w("",!0)]),option:v(a=>[u("div",null,[u("span",null,f(a.option.column_1),1)])]),_:1},8,["modelValue","options","placeholder"])):w("",!0)])):w("",!0)}var _t=T(Kt,[["render",Zt],["__scopeId","data-v-58dcba89"]]);const to=O({name:"kn-pivot-table",components:{Checkbox:L,KnPivotTableEditableField:_t,Paginator:it,RegistryDatatableWarningDialog:q},props:{columns:[],rows:[],propConfiguration:{type:Object},entity:{type:String},id:{type:String},pagination:{type:Object},comboColumnOptions:{type:Array},numberOfRows:{type:Number},stopWarningsState:{type:Array}},emits:["rowChanged","pageChanged","dropdownOpened","warningChanged"],created(){this.mapRows(),this.checkForRowSpan(0,this.mappedRows.length-1,this.mappedRows,this.columns,1),this.loadPagination(),this.loadColumnOptions(),this.loadWarningState()},watch:{rows:{handler(){this.mapRows(),this.checkForRowSpan(0,this.mappedRows.length-1,this.mappedRows,this.columns,1)},deep:!0},pagination:{handler(){var t;this.loadPagination(),this.first=(t=this.pagination)==null?void 0:t.start},deep:!0},comboColumnOptions:{handler(){this.loadColumnOptions()},deep:!0}},data(){return{descriptor:Y,mappedRows:[],configuration:{},columnOptions:[],dependentColumns:[],selectedRow:null,warningVisible:!1,stopWarnings:[],lazyParams:{},first:0}},computed:{getCurrentLocaleDefaultDateFormat(){return t=>t.isEditable?t.format||V():j()}},methods:{mapRows(){this.mappedRows=this.rows.map(t=>{let o={id:t.id};return this.columns.forEach(e=>{o[e.field]={data:t[e.field],rowSpan:1}}),o})},checkForRowSpan(t,o,e,n,s){const k=n[s];if(k.type!=="merge")return;let c=1,m=t;for(let l=t+1;l<=o;l++)e[l-1][k.field].data===e[l][k.field].data&&(e[l][k.field].rowSpan=0,c++),(e[l-1][k.field].data!==e[l][k.field].data||l===o)&&(e[m][k.field].rowSpan=c,l-1>m&&s<n.length-1&&this.checkForRowSpan(m,l===o?l:l-1,e,n,s+1),m=l,c=1)},loadPagination(){this.lazyParams={...this.pagination}},onPage(t){this.lazyParams={paginationStart:t.first,paginationLimit:t.rows,paginationEnd:t.first+t.rows,size:this.lazyParams.size},this.$emit("pageChanged",this.lazyParams)},loadWarningState(){this.stopWarnings=this.stopWarningsState},getFormattedNumber(t,o,e){return G(t,o,e)},setRowEdited(t){t.edited=!0,this.$emit("rowChanged",t)},onDropdownChange(t){const o=t.column,e=t.row;e[o.field]={data:e[o.field].data.column_1,rowSpan:1},this.selectedRow=e,o.hasDependencies&&(this.dependentColumns=[],this.setDependentColumns(o),this.stopWarnings[o.field]?this.clearDependentColumnsValues():this.dependentColumns.forEach(n=>{this.selectedRow[n.field]&&(this.warningVisible=!0)})),e.edited=!0,this.$emit("rowChanged",e)},setDependentColumns(t){let o=t;!o.hasDependencies||o.hasDependencies.forEach(e=>{this.dependentColumns.push(e),this.setDependentColumns(e)})},onWarningDialogClose(t){t.stopWarnings&&(this.stopWarnings[t.columnField]=!0,this.$emit("warningChanged",this.stopWarnings)),this.clearDependentColumnsValues(),this.warningVisible=!1},clearDependentColumnsValues(){this.dependentColumns.forEach(t=>this.selectedRow[t.field]={data:"",rowSpan:1}),this.selectedRow.edited=!0,this.$emit("rowChanged",this.selectedRow)},loadColumnOptions(){this.columnOptions=this.comboColumnOptions},getFormattedDate(t,o,e){return $(t,o,e)},getFormattedDateTime(t,o,e){return Q(t,o,e)}}}),oo={key:0,class:"pi pi-pencil edit-icon p-ml-2"},eo=["rowspan"],ro={key:2},no={key:0},ao={key:1},io={key:2},lo={class:"pivot-data"};function so(t,o,e,n,s,k){const c=d("KnPivotTableEditableField"),m=d("Checkbox"),l=d("Paginator"),x=d("RegistryDatatableWarningDialog");return r(),p(z,null,[u("table",{class:"pivot-table",style:y(t.descriptor.pivotStyles.table)},[u("thead",null,[(r(!0),p(z,null,N(t.columns.slice(1),(a,A)=>(r(),p("th",{class:"pivot-header",key:A,style:y(t.descriptor.pivotStyles.header)},[R(f(a.field)+" ",1),a.isEditable&&a.type!=="merge"&&a.columnInfo.type!=="boolean"?(r(),p("i",oo)):w("",!0)],4))),128)),u("th",{class:"pivot-header",style:y(t.descriptor.pivotStyles.iconColumn)},null,4)]),(r(!0),p(z,null,N(t.mappedRows,(a,A)=>(r(),p("tr",{key:A},[(r(!0),p(z,null,N(t.columns.slice(1),(b,i)=>{var h,I;return r(),p(z,{key:i},[a[b.field].rowSpan>0?(r(),p("td",{key:0,class:"pivot-data",rowspan:a[b.field].rowSpan,style:y(t.descriptor.pivotStyles.row)},[b.isEditable&&b.type!=="merge"?(r(),g(c,{key:0,column:b,propRow:a,comboColumnOptions:t.columnOptions,onRowChanged:D=>t.setRowEdited(a),onDropdownChanged:t.onDropdownChange,onDropdownOpened:o[0]||(o[0]=D=>t.$emit("dropdownOpened",D))},null,8,["column","propRow","comboColumnOptions","onRowChanged","onDropdownChanged"])):b.editorType==="TEXT"&&b.columnInfo.type==="boolean"?(r(),g(m,{key:1,modelValue:a[b.field].data,"onUpdate:modelValue":D=>a[b.field].data=D,binary:!0,disabled:!b.isEditable||b.type==="merge",onChange:D=>t.setRowEdited(a)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])):w("",!0),b.isEditable?w("",!0):(r(),p("span",ro,[a[b.field].data&&((h=b.columnInfo)==null?void 0:h.type)==="date"?(r(),p("span",no,f(t.getFormattedDate(a[b.field].data,"yyyy-MM-dd",t.getCurrentLocaleDefaultDateFormat(b))),1)):a[b.field].data&&((I=b.columnInfo)==null?void 0:I.type)==="timestamp"?(r(),p("span",ao,f(t.getFormattedDateTime(a[b.field].data,{dateStyle:"short",timeStyle:"medium"},!0)),1)):(r(),p("span",io,f(a[b.field].data),1))]))],12,eo)):w("",!0)],64)}),128)),u("td",lo,[a.edited?(r(),p("i",{key:0,class:"pi pi-flag",style:y(t.descriptor.pivotStyles.iconColumn)},null,4)):w("",!0)])]))),128))],4),M(l,{first:t.first,"onUpdate:first":o[1]||(o[1]=a=>t.first=a),rows:t.numberOfRows,totalRecords:t.lazyParams.size,currentPageReportTemplate:t.$t("common.table.footer.paginated",{first:"{first}",last:"{last}",totalRecords:"{totalRecords}"}),paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",onPage:o[2]||(o[2]=a=>t.onPage(a))},null,8,["first","rows","totalRecords","currentPageReportTemplate"]),M(x,{visible:t.warningVisible,columns:t.dependentColumns,onClose:t.onWarningDialogClose},null,8,["visible","columns","onClose"])],64)}var co=T(to,[["render",so]]);const po=O({name:"registry-pivot-datatable",components:{KnPivotTable:co},props:{columns:[],rows:[],propConfiguration:{type:Object},entity:{type:String},id:{type:String},propPagination:{type:Object}},emits:["rowChanged","pageChanged","resetRows"],data(){return{registryDescriptor:E,filteredColumns:[],tempRows:[],pagination:{},comboColumnOptions:[],lazy:!1}},watch:{columns(){this.getFilteredColumns()},rows:{handler(){this.loadRows()},deep:!0},propPagination:{handler(){this.loadPagination()},deep:!0}},created(){this.getFilteredColumns(),this.loadRows(),this.loadPagination()},methods:{getFilteredColumns(){this.filteredColumns=this.columns},loadRows(){this.tempRows=this.rows,this.tempRows.length<=E.paginationLimit&&(this.lazy=!1,this.tempRows=this.tempRows.slice(0,E.paginationNumberOfItems))},onRowChanged(t){this.$emit("rowChanged",t)},loadPagination(){this.pagination=this.propPagination},onPageChange(t){this.lazy?this.$emit("pageChanged",t):(this.tempRows=this.rows.slice(t.paginationStart,t.paginationStart+E.paginationNumberOfItems),this.$emit("resetRows"))},addColumnOptions(t){var n;const o=t.column,e=t.row;this.comboColumnOptions[o.field]||(this.comboColumnOptions[o.field]=[]),this.comboColumnOptions[o.field][(n=e[o.dependences])==null?void 0:n.data]||this.loadColumnOptions(o,e)},async loadColumnOptions(t,o){var c;const e=t.subEntity?"::"+t.subEntity+"("+t.foreignKey+")":"",n=this.entity+e+":"+t.field,s=this.entity+e+":"+((c=t.orderBy)!=null?c:t.field),k=new URLSearchParams({ENTITY_ID:n,QUERY_TYPE:"standard",ORDER_ENTITY:s,ORDER_TYPE:"asc",QUERY_ROOT_ENTITY:"true"});t.dependences&&o&&o[t.dependences].data&&k.append("DEPENDENCES",this.entity+e+":"+t.dependences+"="+o[t.dependences].data),await this.$http.post(`/knowageqbeengine/servlet/AdapterHTTP?ACTION_NAME=GET_FILTER_VALUES_ACTION&SBI_EXECUTION_ID=${this.id}`,k,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(m=>{var l;return this.comboColumnOptions[t.field][(l=o[t.dependences])==null?void 0:l.data]=m.data.rows})}}});function bo(t,o,e,n,s,k){const c=d("KnPivotTable");return r(),g(c,{id:t.id,columns:t.filteredColumns,rows:t.tempRows,propConfiguration:t.propConfiguration,entity:t.entity,pagination:t.pagination,comboColumnOptions:t.comboColumnOptions,numberOfRows:t.registryDescriptor.paginationNumberOfItems,onRowChanged:t.onRowChanged,onPageChanged:t.onPageChange,onDropdownOpened:t.addColumnOptions},null,8,["id","columns","rows","propConfiguration","entity","pagination","comboColumnOptions","numberOfRows","onRowChanged","onPageChanged","onDropdownOpened"])}var ko=T(po,[["render",bo]]);const uo=O({name:"registry-filter-card",components:{Dropdown:B},props:{propFilter:{type:Object},filterOptions:{type:Array},entity:{type:String},clearTrigger:{type:Boolean},id:{type:String}},emits:["changed"],data(){return{filter:{},options:[]}},watch:{propFilter(){this.loadFilter()},clearTrigger(){this.filter.filterValue=""}},async created(){this.loadFilter(),this.filter.presentation==="COMBO"&&await this.loadFilterOptions()},methods:{loadFilter(){this.filter={...this.propFilter}},async loadFilterOptions(){var s;const t=this.filter.column.subEntity?"::"+this.filter.column.subEntity+"("+this.filter.column.foreignKey+")":"",o=this.entity+t+":"+this.filter.field,e=this.entity+t+":"+((s=this.filter.column.orderBy)!=null?s:this.filter.field),n=new URLSearchParams({ENTITY_ID:o,QUERY_TYPE:"standard",ORDER_ENTITY:e,ORDER_TYPE:"asc",QUERY_ROOT_ENTITY:"true"});await this.$http.post(`/knowageqbeengine/servlet/AdapterHTTP?ACTION_NAME=GET_FILTER_VALUES_ACTION&SBI_EXECUTION_ID=${this.id}`,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(k=>this.options=k.data.rows)},filterChanged(){this.$emit("changed",this.filter.filterValue)}}}),mo={key:0},go={key:1,class:"p-mx-2"},ho={class:"p-float-label"},fo={key:2,class:"kn-material-input-label"};function vo(t,o,e,n,s,k){const c=d("InputText"),m=d("Dropdown");return t.filter.static&&t.filter.visible?(r(),p("div",mo,[M(c,{class:"kn-material-input p-mx-2",modelValue:t.filter.filterValue,"onUpdate:modelValue":o[0]||(o[0]=l=>t.filter.filterValue=l),disabled:""},null,8,["modelValue"])])):t.filter.static?w("",!0):(r(),p("div",go,[u("span",ho,[t.filter.presentation==="MANUAL"?(r(),g(c,{key:0,class:"kn-material-input",modelValue:t.filter.filterValue,"onUpdate:modelValue":o[1]||(o[1]=l=>t.filter.filterValue=l),onBlur:t.filterChanged},null,8,["modelValue","onBlur"])):t.filter.presentation==="COMBO"?(r(),g(m,{key:1,class:"kn-material-input",modelValue:t.filter.filterValue,"onUpdate:modelValue":o[2]||(o[2]=l=>t.filter.filterValue=l),options:t.options,optionValue:"column_1",optionLabel:"column_1",onChange:t.filterChanged,filter:!0},null,8,["modelValue","options","onChange"])):w("",!0),t.filter.presentation!=="DRIVER"?(r(),p("label",fo,f(t.filter.title),1)):w("",!0)])]))}var wo=T(uo,[["render",vo]]);const yo=O({name:"registry-filters-card",components:{Card:lt,RegistryFilterCard:wo},props:{propFilters:{type:Array},entity:{type:String},id:{type:String}},emits:["filter"],data(){return{registryDescriptor:E,filters:[],clearFiltersTrigger:!1}},watch:{propFilters(){this.loadFilters()}},async created(){this.loadFilters()},methods:{loadFilters(){this.filters=[...this.propFilters]},setFilterValue(t,o){this.filters[o].filterValue=t},clearAllFilters(){this.filters.forEach(t=>t.filterValue=""),this.clearFiltersTrigger=!this.clearFiltersTrigger,this.$emit("filter",this.filters)},filterRegistry(){this.$emit("filter",this.filters)}}}),xo={class:"p-fluid p-formgrid p-grid"};function Co(t,o,e,n,s,k){const c=d("Toolbar"),m=d("RegistryFilterCard"),l=d("Button"),x=d("Card");return r(),g(x,{class:"p-m-2"},{header:v(()=>[M(c,{class:"kn-toolbar kn-toolbar--secondary"},{start:v(()=>[R(f(t.$t("documentExecution.registry.filters")),1)]),_:1})]),content:v(()=>[u("div",{class:"filter-container",style:y(t.registryDescriptor.styles.filterContainer)},[u("div",{class:"fields-container",style:y(t.registryDescriptor.styles.fieldsContainer)},[u("form",xo,[(r(!0),p(z,null,N(t.filters,(a,A)=>(r(),g(m,{key:A,class:"kn-flex p-mx-2",id:t.id,propFilter:a,entity:t.entity,clearTrigger:t.clearFiltersTrigger,onChanged:b=>t.setFilterValue(b,A)},null,8,["id","propFilter","entity","clearTrigger","onChanged"]))),128))])],4),u("div",{class:"button-container p-ml-2",style:y(t.registryDescriptor.styles.buttonsContainer)},[M(l,{class:"p-button kn-button--primary p-mx-1",style:y(t.registryDescriptor.styles.filtersButton),onClick:t.clearAllFilters},{default:v(()=>[R(f(t.$t("documentExecution.registry.clearFilters")),1)]),_:1},8,["style","onClick"]),M(l,{class:"p-button kn-button--primary p-mx-1",style:y(t.registryDescriptor.styles.filtersButton),onClick:t.filterRegistry,"data-test":"filter-button"},{default:v(()=>[R(f(t.$t("documentExecution.registry.filter")),1)]),_:1},8,["style","onClick"])],4)],4)]),_:1})}var Mo=T(yo,[["render",Co]]);const Ao=O({name:"registry",components:{RegistryDatatable:Bt,RegistryPivotDatatable:ko,RegistryFiltersCard:Mo},props:{id:{type:String},reloadTrigger:{type:Boolean}},data(){return{registryDescriptor:E,registry:{},configuration:[],columns:[],rows:[],columnMap:{},pagination:{start:0,limit:15},updatedRows:[],filters:[],selectedFilters:[],entity:null,stopWarningsState:[],isPivot:!1,loading:!1}},watch:{async id(){await this.loadPage(),this.stopWarningsState=[]},async reloadTrigger(){await this.loadPage(),this.stopWarningsState=[]}},async created(){await this.loadPage()},methods:{...dt(st,["setInfo","setError"]),async loadPage(){this.loading=!0,await this.loadRegistry(),this.loadRegistryData(),this.loading=!1},async loadRegistry(){const t=new URLSearchParams;this.pagination.size>E.paginationLimit&&t.append("limit",""+E.paginationNumberOfItems),this.selectedFilters.forEach(o=>{o.filterValue&&t.append(o.field,o.filterValue)}),t.append("start",""+this.pagination.start),await this.$http.post(`/knowageqbeengine/servlet/AdapterHTTP?ACTION_NAME=LOAD_REGISTRY_ACTION&SBI_EXECUTION_ID=${this.id}`,t,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded"}}).then(o=>{this.pagination.size=o.data.results,this.registry=o.data}).catch(()=>{})},loadRegistryData(){this.registry&&(this.loadConfiguration(),this.loadEntity(),this.loadColumns(),this.loadColumnMap(),this.loadColumnsInfo(),this.loadRows(),this.getFilters())},loadColumns(){this.columns=[],this.registry.registryConfig.columns.map(t=>{t.type==="merge"&&(this.isPivot=!0),this.columns.push(t)})},loadColumnMap(){this.columnMap={id:"id"};for(let t=1;t<this.registry.metaData.fields.length;t++)this.columnMap[this.registry.metaData.fields[t].name]=this.registry.metaData.fields[t].header},loadColumnsInfo(){for(let t=1;t<this.registry.metaData.fields.length;t++)this.columns[t-1].columnInfo=this.registry.metaData.fields[t]},loadRows(){this.rows=[];const t=this.pagination.size<=E.paginationLimit?this.registry.rows.length:E.paginationNumberOfItems;for(let o=0;o<t;o++){const e={};Object.keys(this.registry.rows[o]).forEach(n=>{e[this.columnMap[n]]=this.registry.rows[o][n]}),this.rows.push(e)}},loadConfiguration(){this.configuration=this.registry.registryConfig.configurations},loadEntity(){this.entity=this.registry.registryConfig.entity},onRowChanged(t){const o={...t},e=this.updatedRows.findIndex(n=>n.id===o.id);e===-1?this.updatedRows.push(o):this.updatedRows[e]=o},async saveRegistry(){this.updatedRows.forEach(e=>{this.isPivot&&this.formatPivotRows(e),delete e.id,delete e.isNew,delete e.edited});const t=JSON.parse(JSON.stringify(this.updatedRows));t.forEach(e=>{this.registry.metaData.fields.forEach(n=>{if(e[n.header])if(n.type==="date"){let s=new Date(P(e[n.header],"toISOString")),k=new Date().getTimezoneOffset();e[n.header]=new Date(s.getTime()-k*6e4)}else n.type==="timestamp"&&(e[n.header]=P(e[n.header],"toISOString"))})});const o=new URLSearchParams;o.append("records",""+JSON.stringify(t)),await this.$http.post(`/knowageqbeengine/servlet/AdapterHTTP?ACTION_NAME=UPDATE_RECORDS_ACTION&SBI_EXECUTION_ID=${this.id}`,o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(()=>{this.setInfo({title:this.$t("common.toast.updateTitle"),msg:this.$t("common.toast.updateSuccess")}),this.pagination.start=0,this.loadPage()}).finally(()=>this.updatedRows=[])},async onRowDeleted(t){this.isPivot&&this.formatPivotRows(t);const o=new URLSearchParams;o.append("records",""+JSON.stringify([t])),await this.$http.post(`/knowageqbeengine/servlet/AdapterHTTP?ACTION_NAME=DELETE_RECORDS_ACTION&SBI_EXECUTION_ID=${this.id}`,o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{if(this.setInfo({title:this.$t("common.toast.deleteTitle"),msg:this.$t("common.toast.deleteSuccess")}),e.data.ids[0]){const n=this.rows.findIndex(s=>s.id===t.id);this.rows.splice(n,1),this.pagination.size--}}).catch(e=>{this.setError({title:this.$t("common.error.generic"),msg:e})})},getFilters(){this.filters=[];const t=this.registry.registryConfig.filters;for(let o=0;o<t.length;o++){const e=t[o];for(let n=0;n<this.columns.length;n++){const s=this.columns[n];e.presentation!=="DRIVER"&&e.field===s.field&&this.filters.push({title:e.title,field:e.field,presentation:e.presentationType,static:e.isStatic,visible:e.isVisible,column:s})}}},async filterRegistry(t){this.selectedFilters=[...t],this.pagination.start=0,this.pagination.size=0,await this.loadRegistry(),this.loadRows()},async updatePagination(t){this.updatedRows=[],this.pagination={start:t.paginationStart,limit:t.paginationLimit,size:t.size},this.pagination.size>E.paginationLimit&&(await this.loadRegistry(),this.loadRows())},formatPivotRows(t){Object.keys(t).forEach(o=>{o!=="id"&&(t[o]=t[o].data)})},setWarningState(t){this.stopWarningsState=t}}}),Eo={class:"p-d-flex p-flex-column kn-width-full kn-height-full"},Do={class:"p-d-flex p-flex-row"},Ro={class:"p-d-flex p-flex-column kn-overflow kn-flex"},zo={class:""},Oo={class:"kn-relative kn-flex p-m-2 registry-custom-card"},To={class:"kn-height-full kn-width-full kn-absolute"};function Io(t,o,e,n,s,k){const c=d("Button"),m=d("Toolbar"),l=d("ProgressBar"),x=d("RegistryFiltersCard"),a=d("RegistryPivotDatatable"),A=d("RegistryDatatable");return r(),p("div",Eo,[M(m,{class:"kn-toolbar kn-toolbar--secondary kn-width-full"},{start:v(()=>[R(f(t.$t("documentExecution.registry.title")),1)]),end:v(()=>[u("div",Do,[M(c,{class:"kn-button p-button-text",onClick:t.saveRegistry},{default:v(()=>[R(f(t.$t("common.save")),1)]),_:1},8,["onClick"])])]),_:1}),u("div",Ro,[t.loading?(r(),g(l,{key:0,mode:"indeterminate",class:"kn-progress-bar","data-test":"progress-bar"})):w("",!0),u("div",zo,[t.filters.length>0?(r(),g(x,{key:0,id:t.id,propFilters:t.filters,entity:t.entity,onFilter:t.filterRegistry,class:""},null,8,["id","propFilters","entity","onFilter"])):w("",!0)]),u("div",Oo,[u("div",To,[t.isPivot?(r(),g(a,{key:0,columns:t.columns,id:t.id,rows:t.rows,entity:t.entity,propConfiguration:t.configuration,propPagination:t.pagination,onRowChanged:t.onRowChanged,onRowDeleted:t.onRowDeleted,onPageChanged:t.updatePagination,onResetRows:o[0]||(o[0]=b=>t.updatedRows=[]),onWarningChanged:t.setWarningState},null,8,["columns","id","rows","entity","propConfiguration","propPagination","onRowChanged","onRowDeleted","onPageChanged","onWarningChanged"])):(r(),g(A,{key:1,propColumns:t.columns,id:t.id,propRows:t.rows,propConfiguration:t.configuration,columnMap:t.columnMap,pagination:t.pagination,entity:t.entity,stopWarningsState:t.stopWarningsState,onRowChanged:t.onRowChanged,onRowDeleted:t.onRowDeleted,onPageChanged:t.updatePagination,onWarningChanged:t.setWarningState},null,8,["propColumns","id","propRows","propConfiguration","columnMap","pagination","entity","stopWarningsState","onRowChanged","onRowDeleted","onPageChanged","onWarningChanged"]))])])])])}var No=T(Ao,[["render",Io]]);export{No as default};
//# sourceMappingURL=Registry-d0cf4afe.js.map
