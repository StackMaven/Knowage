import{_ as g,d as f,X as b,s as C,r as s,o as n,c as $,a,f as o,w as i,g as k,t as w,h as l,A as r,V as M}from"./index-1e676509.js";import{K as B}from"./KnListBox-94855720.js";import{K as _}from"./KnHint-6d455703.js";import"./menu.esm-6bee86d0.js";const v=["name","description"],F={buttons:[{emits:"delete",icon:"far fa-trash-alt",label:"common.delete"}],defaultSortField:"label",filterFields:["name","description"],interaction:{parameterLabel:"id",parameterValue:"id",type:"event"},sortFields:["name","description"],textField:"description",titleField:"name"};var L={filterFields:v,knListSettings:F};const y=f({name:"business-model-catalogue",components:{FabButton:b,KnListBox:B,KnHint:_},data(){return{businessModelCatalogueDescriptor:L,businessModelList:[],showHint:!0,touched:!1,loading:!1}},setup(){return{store:C()}},async created(){this.$route.path!=="/business-model-catalogue"&&(this.showHint=!1),await this.loadAllCatalogues()},methods:{async loadAllCatalogues(){this.loading=!0,await this.$http.get("/knowage/restful-services/2.0/businessmodels").then(e=>this.businessModelList=e.data).finally(()=>this.loading=!1)},showForm(e){this.showHint=!1;const t=e.item?`/business-model-catalogue/${e.item.id}`:"/business-model-catalogue/new-business-model";this.touched?this.$confirm.require({message:this.$t("common.toast.unsavedChangesMessage"),header:this.$t("common.toast.unsavedChangesHeader"),icon:"pi pi-exclamation-triangle",accept:()=>{this.touched=!1,this.$router.push(t)}}):this.$router.push(t)},deleteBusinessModelConfirm(e){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteTitle"),icon:"pi pi-exclamation-triangle",accept:()=>{this.touched=!1,this.deleteBusinessModel(e.item.id)}})},async deleteBusinessModel(e){await this.$http.delete("/knowage/restful-services/2.0/businessmodels/"+e).then(()=>{this.store.setInfo({title:this.$t("common.toast.deleteTitle"),msg:this.$t("common.toast.deleteSuccess")}),this.$router.replace("/business-model-catalogue"),this.loadAllCatalogues()})},pageReload(){this.touched=!1,this.loadAllCatalogues()},onClose(){this.touched=!1,this.showHint=!0}}}),H={class:"kn-page"},K={class:"kn-page-content p-grid p-m-0"},S={class:"p-col-4 p-sm-4 p-md-3 p-p-0 kn-page"},T={class:"p-col-8 p-sm-8 p-md-9 p-p-0 p-m-0 kn-page"};function V(e,t,A,D,N,I){const d=s("FabButton"),c=s("Toolbar"),u=s("ProgressBar"),m=s("KnListBox"),h=s("KnHint"),p=s("router-view");return n(),$("div",H,[a("div",K,[a("div",S,[o(c,{class:"kn-toolbar kn-toolbar--primary"},{start:i(()=>[k(w(e.$t("managers.businessModelManager.title")),1)]),end:i(()=>[o(d,{icon:"fas fa-plus",onClick:e.showForm,"data-test":"new-button"},null,8,["onClick"])]),_:1}),e.loading?(n(),l(u,{key:0,mode:"indeterminate",class:"kn-progress-bar","data-test":"progress-bar"})):r("",!0),o(m,{options:e.businessModelList,settings:e.businessModelCatalogueDescriptor.knListSettings,onClick:e.showForm,onDelete:M(e.deleteBusinessModelConfirm,["stop"])},null,8,["options","settings","onClick","onDelete"])]),a("div",T,[e.showHint?(n(),l(h,{key:0,title:"managers.businessModelManager.title",hint:"managers.businessModelManager.hint","data-test":"bm-hint"},null,8,["title","hint"])):r("",!0),o(p,{onTouched:t[0]||(t[0]=q=>e.touched=!0),onClosed:e.onClose,onInserted:e.pageReload},null,8,["onClosed","onInserted"])])])])}var j=g(y,[["render",V]]);export{j as default};
//# sourceMappingURL=BusinessModelCatalogue-a1260007.js.map
