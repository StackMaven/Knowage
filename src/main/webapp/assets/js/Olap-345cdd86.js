import{d as T,s as S,_ as $,r as l,y as P,o as d,c as C,f as a,w as i,g as w,t as c,a as s,G as N,A as v,z as E,h,i as O,B as V,C as U,D as y,l as R,n as F,a5 as B,ah as uo,V as L,q as Q,aj as mo,I as go,ad as fo,a7 as H,Y as j,a1 as ho,aK as vo,a8 as wo,N as xo}from"./index-1e676509.js";import{s as K}from"./selectbutton.esm-1085ac65.js";import{s as Z}from"./radiobutton.esm-c3e6fa9b.js";import{f as oo}from"./filterHelper-a723991a.js";import{s as X}from"./inlinemessage.esm-1edef892.js";import{s as Y}from"./checkbox.esm-fa6c8259.js";import{s as yo}from"./contextmenu.esm-4301c9fe.js";import{s as Co}from"./tree.esm-837306a6.js";import{s as Mo}from"./textarea.esm-32051d54.js";const Ao={customToastContainer:{position:"fixed",right:"20px",top:"20px",width:"25rem","z-index":"2000"},customToastContent:{background:"#B3E5FC",border:"solid#B3E5FC","border-radius":"4px","border-width":"1px",color:"#01579B",padding:"1rem,box-shadow: 0 0.25rem 0.75rem rgb(0 0 0 / 10%)"},message:{"align-items":"center",display:"flex","justify-content":"center","text-align":"center"},tableContainer:{position:"relative"},toastButton:{"background-color":"transparent",color:"#01579B","margin-left":"auto",width:"5px"},toastIcon:{"font-size":"2rem"}};var Eo={style:Ao};const Do=["position","member","replace"];var zo={drillOnOptions:Do};const To=T({name:"olap-sidebar",components:{SelectButton:K},props:{olap:{type:Object},olapDesignerMode:{type:Boolean},propButtons:{type:Array},whatIfMode:{type:Boolean},olapHasScenario:{type:Boolean}},emits:["openCustomViewDialog","drillTypeChanged","showParentMemberChanged","hideSpansChanged","suppressEmptyChanged","showPropertiesChanged","openSortingDialog","openMdxQueryDialog","reloadSchema","enableCrossNavigation","openCrossNavigationDefinitionDialog","openButtonWizardDialog","drillThroughChanged","saveOlapDesigner","showOutputWizard","showScenarioWizard","showSaveAsNewVersion","undo","showAlgorithmDialog","showDeleteVersions","loading","exportExcel"],computed:{tableFunctionsVisible(){return this.isButtonVisible("BUTTON_FATHER_MEMBERS")||this.isButtonVisible("BUTTON_HIDE_SPANS")||this.isButtonVisible("BUTTON_SORTING_SETTINGS")||this.isButtonVisible("BUTTON_SHOW_PROPERTIES")||this.isButtonVisible("BUTTON_HIDE_EMPTY")||this.isButtonVisible("BUTTON_SAVE_SUBOBJECT")}},data(){return{olapSidebarDescriptor:zo,buttons:[],drillOn:"position",enableDrillThrough:!1,showParentMembers:!1,hideSpans:!1,suppressEmpty:!1,showProperties:!1,crossNavigation:!1,mode:"designer",olapLocked:!1}},watch:{propButtons(){this.loadButtons()},olap(){this.loadOlapModelConfigValues()}},setup(){return{store:S()}},created(){this.loadButtons(),this.loadOlapModelConfigValues()},methods:{loadButtons(){this.buttons=this.propButtons},isButtonVisible(o){var r,p;let e=!1;return((p=(r=this.olap)==null?void 0:r.modelConfig.toolbarVisibleButtons)==null?void 0:p.findIndex(u=>u===o))!==-1&&(e=!0),e},loadOlapModelConfigValues(){var o,e,t;this.olap&&(this.drillOn=this.olap.modelConfig.drillType,this.enableDrillThrough=this.olap.modelConfig.enableDrillThrough,this.showParentMembers=this.olap.modelConfig.showParentMembers,this.hideSpans=this.olap.modelConfig.hideSpans,this.suppressEmpty=this.olap.modelConfig.suppressEmpty,this.showProperties=this.olap.modelConfig.showProperties,this.crossNavigation=(e=(o=this.olap.modelConfig)==null?void 0:o.crossNavigation)==null?void 0:e.buttonClicked,this.olapLocked=((t=this.olap.modelConfig)==null?void 0:t.status)==="locked_by_user")},onDrillThroughClick(){this.enableDrillThrough=!this.enableDrillThrough,this.$emit("drillThroughChanged",this.enableDrillThrough)},onShowParentMemberClick(){this.showParentMembers=!this.showParentMembers,this.$emit("showParentMemberChanged",this.showParentMembers)},onHideSpansClick(){this.hideSpans=!this.hideSpans,this.$emit("hideSpansChanged",this.hideSpans)},onSuppressRowsColumnsClick(){this.suppressEmpty=!this.suppressEmpty,this.$emit("suppressEmptyChanged",this.suppressEmpty)},onShowPropertiesClick(){this.showProperties=!this.showProperties,this.$emit("showPropertiesChanged",this.showProperties)},onEnableCrossNavigationClick(){this.crossNavigation=!this.crossNavigation,this.$emit("enableCrossNavigation",this.crossNavigation)},closeOlapDesigner(){this.$router.push("/document-browser")},async changeLock(){!this.olap||(this.$emit("loading",!0),await this.$http.post(`/knowage/restful-services/1.0/locker/${this.olap.modelConfig.artifactId}`,null,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8","X-Disable-Errors":"true"}}).then(o=>{(o.data.status==="unlocked"||o.data.status==="locked_by_user"||o.data.status==="locked_by_other")&&this.olap&&(this.store.setInfo({msg:this.$t("common.toast.success")}),this.olapLocked=!0)}).catch(()=>{}),this.$emit("loading",!1))}}}),$o={id:"olap-sidebar"},Io={key:0,class:"p-d-flex p-flex-column kn-flex p-m-3"},No={class:"kn-material-input-label"},So={key:0,class:"kn-flex-0"},Oo={key:0,class:"p-d-flex p-flex-column p-my-3"},Vo={class:"kn-material-input-label"},Uo={key:0,class:"kn-material-input-label"},Bo={class:"p-grid p-mt-1"},Lo={class:"p-col-4"},Po={class:"p-col-4"},Ro={class:"p-col-4"},Fo={class:"p-my-3"},Xo={key:0,class:"kn-material-input-label"},jo={class:"p-grid p-mt-1"},_o={class:"p-col-4"},Ho={class:"p-col-4"},Qo={class:"p-col-4"},Yo={class:"p-col-4"},Wo={class:"p-col-4"},qo={class:"p-col-4"},Jo={key:1,id:"whatif-container",class:"kn-flex"},Go={class:"kn-material-input-label"},Ko={class:"p-grid p-mt-1"},Zo={key:0,class:"p-col-4"},oe={key:1,class:"p-col-4"},ee={key:2,class:"p-col-4"},te={key:3,class:"p-col-4"},re={class:"p-col-4"},ae={key:4,class:"p-col-4"},ne={key:2,class:"kn-flex p-mt-3"},ie={class:"kn-material-input-label"},le={class:"p-grid p-mt-1"},de={class:"p-col-4"},se={key:0,class:"p-col-4"},ce={class:"p-col-4"},pe={class:"p-col-4"},be={key:3,class:"p-fluid"};function ke(o,e,t,r,p,u){const b=l("Toolbar"),m=l("SelectButton"),n=l("Button"),g=P("tooltip");return d(),C("div",$o,[a(b,{id:"kn-parameter-sidebar-toolbar",class:"kn-toolbar kn-toolbar--secondary"},{start:i(()=>[w(c(o.$t("common.settings")),1)]),_:1}),o.olap?(d(),C("div",Io,[s("div",null,[s("label",No,c(o.$t("documentExecution.olap.sidebar.drillOnDimension")),1),a(m,{class:"p-mt-2",modelValue:o.drillOn,"onUpdate:modelValue":e[0]||(e[0]=k=>o.drillOn=k),options:o.olapSidebarDescriptor.drillOnOptions,onClick:e[1]||(e[1]=k=>o.$emit("drillTypeChanged",o.drillOn))},null,8,["modelValue","options"])]),o.olapDesignerMode?v("",!0):(d(),C("div",So,[o.isButtonVisible("BUTTON_DRILL_THROUGH")?(d(),C("div",Oo,[s("label",Vo,c(o.$t("documentExecution.olap.sidebar.drillOnData")),1),a(n,{class:N(["p-button-sm kn-button kn-button--secondary p-as-center p-mt-2",{"olap-sidebar-button-active":o.enableDrillThrough}]),label:o.$t("documentExecution.olap.sidebar.drillThrough"),onClick:o.onDrillThroughClick},null,8,["class","label","onClick"])])):v("",!0),s("div",null,[o.isButtonVisible("BUTTON_MDX")||o.isButtonVisible("BUTTON_FLUSH_CACHE")||o.olap.modelConfig.crossNavigation?(d(),C("label",Uo,c(o.$t("documentExecution.olap.sidebar.olapFunctions")),1)):v("",!0),s("div",Bo,[s("div",Lo,[o.isButtonVisible("BUTTON_MDX")?E((d(),h(n,{key:0,icon:"far fa-eye",class:"p-button-plain kn-button--secondary",onClick:e[2]||(e[2]=k=>o.$emit("openMdxQueryDialog"))},null,512)),[[g,o.$t("documentExecution.olap.sidebar.mdxQuery"),void 0,{top:!0}]]):v("",!0)]),s("div",Po,[o.isButtonVisible("BUTTON_FLUSH_CACHE")?E((d(),h(n,{key:0,icon:"fas fa-sync-alt",class:"p-button-plain kn-button--secondary",onClick:e[3]||(e[3]=k=>o.$emit("reloadSchema"))},null,512)),[[g,o.$t("documentExecution.olap.sidebar.reloadSchema"),void 0,{top:!0}]]):v("",!0)]),s("div",Ro,[o.olap.modelConfig.crossNavigation?E((d(),h(n,{key:0,icon:"fas fa-arrow-right",class:"p-button-plain kn-button--secondary",onClick:o.onEnableCrossNavigationClick},null,8,["onClick"])),[[g,o.$t("documentExecution.olap.sidebar.enableCrossNavigation"),void 0,{top:!0}]]):v("",!0)])])]),s("div",Fo,[o.tableFunctionsVisible?(d(),C("label",Xo,c(o.$t("documentExecution.olap.sidebar.tableFunctions")),1)):v("",!0),s("div",jo,[s("div",_o,[o.isButtonVisible("BUTTON_FATHER_MEMBERS")?E((d(),h(n,{key:0,icon:"far fa-caret-square-up",class:N(["p-button-plain kn-button--secondary",{"olap-sidebar-button-active":o.showParentMembers}]),onClick:o.onShowParentMemberClick},null,8,["class","onClick"])),[[g,o.$t("documentExecution.olap.sidebar.showParentMembers"),void 0,{top:!0}]]):v("",!0)]),s("div",Ho,[o.isButtonVisible("BUTTON_HIDE_SPANS")?E((d(),h(n,{key:0,icon:"fas fa-eye-slash",class:N(["p-button-plain kn-button--secondary",{"olap-sidebar-button-active":o.hideSpans}]),onClick:o.onHideSpansClick},null,8,["class","onClick"])),[[g,o.$t("documentExecution.olap.sidebar.hideSpans"),void 0,{top:!0}]]):v("",!0)]),s("div",Qo,[o.isButtonVisible("BUTTON_SORTING_SETTINGS")?E((d(),h(n,{key:0,icon:"fas fa-sort-amount-down-alt",class:"p-button-plain kn-button--secondary",onClick:e[4]||(e[4]=k=>o.$emit("openSortingDialog"))},null,512)),[[g,o.$t("documentExecution.olap.sidebar.sortingSettings"),void 0,{top:!0}]]):v("",!0)]),s("div",Yo,[o.isButtonVisible("BUTTON_SHOW_PROPERTIES")?E((d(),h(n,{key:0,icon:"fas fa-cogs",class:N(["p-button-plain kn-button--secondary",{"olap-sidebar-button-active":o.showProperties}]),onClick:o.onShowPropertiesClick},null,8,["class","onClick"])),[[g,o.$t("documentExecution.olap.sidebar.showProperties"),void 0,{top:!0}]]):v("",!0)]),s("div",Wo,[o.isButtonVisible("BUTTON_HIDE_EMPTY")?E((d(),h(n,{key:0,icon:"fas fa-border-none",class:N(["p-button-plain kn-button--secondary",{"olap-sidebar-button-active":o.suppressEmpty}]),onClick:o.onSuppressRowsColumnsClick},null,8,["class","onClick"])),[[g,o.$t("documentExecution.olap.sidebar.suppressEmptyRowsColumns"),void 0,{top:!0}]]):v("",!0)]),s("div",qo,[o.isButtonVisible("BUTTON_SAVE_SUBOBJECT")?E((d(),h(n,{key:0,icon:"fas fa-save",class:"p-button-plain kn-button--secondary",onClick:e[5]||(e[5]=k=>o.$emit("openCustomViewDialog"))},null,512)),[[g,o.$t("documentExecution.olap.sidebar.saveCustomizedView"),void 0,{top:!0}]]):v("",!0)])])])])),o.olapHasScenario&&!o.olapDesignerMode?(d(),C("div",Jo,[s("label",Go,c(o.$t("documentExecution.olap.sidebar.whatIfTitle")),1),s("div",Ko,[o.olapLocked?(d(),C("div",Zo,[E(a(n,{icon:o.olapLocked?"fas fa-lock-open":"fas fa-lock",class:"p-button-plain kn-button--secondary",onClick:o.changeLock},null,8,["icon","onClick"]),[[g,o.olapLocked?o.$t("documentExecution.olap.sidebar.unlockSchema"):o.$t("documentExecution.olap.sidebar.lockSchema"),void 0,{top:!0}]])])):v("",!0),o.olapLocked?(d(),C("div",oe,[o.isButtonVisible("BUTTON_SAVE_SUBOBJECT")?E((d(),h(n,{key:0,icon:"fa-solid fa-floppy-disk",class:"p-button-plain kn-button--secondary",onClick:e[6]||(e[6]=k=>o.$emit("showSaveAsNewVersion"))},null,512)),[[g,o.$t("documentExecution.olap.sidebar.saveAsNewVersion"),void 0,{top:!0}]]):v("",!0)])):v("",!0),o.olapLocked?(d(),C("div",ee,[o.isButtonVisible("BUTTON_UNDO")?E((d(),h(n,{key:0,icon:"fa-solid fa-rotate-left",class:"p-button-plain kn-button--secondary",onClick:e[7]||(e[7]=k=>o.$emit("undo"))},null,512)),[[g,o.$t("documentExecution.olap.sidebar.undo"),void 0,{top:!0}]]):v("",!0)])):v("",!0),o.olapLocked?(d(),C("div",te,[o.isButtonVisible("BUTTON_VERSION_MANAGER")?E((d(),h(n,{key:0,icon:"fa-solid fa-trash",class:"p-button-plain kn-button--secondary",onClick:e[8]||(e[8]=k=>o.$emit("showDeleteVersions"))},null,512)),[[g,o.$t("documentExecution.olap.sidebar.deleteVersions"),void 0,{top:!0}]]):v("",!0)])):v("",!0),s("div",re,[o.isButtonVisible("BUTTON_EXPORT_OUTPUT")?E((d(),h(n,{key:0,icon:"fa-solid fa-share-from-square",class:"p-button-plain kn-button--secondary",onClick:e[9]||(e[9]=k=>o.$emit("showOutputWizard"))},null,512)),[[g,o.$t("documentExecution.olap.sidebar.outputWizard"),void 0,{top:!0}]]):v("",!0)]),o.olapLocked?(d(),C("div",ae,[o.isButtonVisible("BUTTON_ALGORITHMS")?E((d(),h(n,{key:0,icon:"fa-solid fa-network-wired",class:"p-button-plain kn-button--secondary",onClick:e[10]||(e[10]=k=>o.$emit("showAlgorithmDialog"))},null,512)),[[g,o.$t("documentExecution.olap.sidebar.alg"),void 0,{top:!0}]]):v("",!0)])):v("",!0)])])):v("",!0),o.olapDesignerMode?(d(),C("div",ne,[s("label",ie,c(o.$t("documentExecution.olap.sidebar.templateEditing")),1),s("div",le,[s("div",de,[E(a(n,{icon:"far fa-eye",class:"p-button-plain kn-button--secondary",onClick:e[11]||(e[11]=k=>o.$emit("openMdxQueryDialog"))},null,512),[[g,o.$t("documentExecution.olap.sidebar.mdxQuery"),void 0,{top:!0}]])]),o.whatIfMode?(d(),C("div",se,[E(a(n,{icon:"fa-solid fa-note-sticky",class:"p-button-plain kn-button--secondary",onClick:e[12]||(e[12]=k=>o.$emit("showScenarioWizard"))},null,512),[[g,o.$t("documentExecution.olap.sidebar.scenario"),void 0,{top:!0}]])])):v("",!0),s("div",ce,[E(a(n,{icon:"fas fa-arrow-right",class:N(["p-button-plain kn-button--secondary",{"olap-sidebar-button-active":o.crossNavigation}]),onClick:e[13]||(e[13]=k=>o.$emit("openCrossNavigationDefinitionDialog"))},null,8,["class"]),[[g,o.$t("documentExecution.olap.sidebar.defineCrossNavigation"),void 0,{top:!0}]])]),s("div",pe,[E(a(n,{icon:"far fa-check-square",class:"p-button-plain kn-button--secondary",onClick:e[14]||(e[14]=k=>o.$emit("openButtonWizardDialog"))},null,512),[[g,o.$t("documentExecution.olap.sidebar.configureButtonsVisiblity"),void 0,{top:!0}]])])])])):v("",!0),o.olapDesignerMode?(d(),C("div",be,[a(n,{label:o.$t("documentExecution.olap.sidebar.closeDesigner"),class:"p-button-plain kn-button--secondary",onClick:o.closeOlapDesigner},null,8,["label","onClick"]),a(n,{label:o.$t("documentExecution.olap.sidebar.saveTemplate"),class:"p-button-plain kn-button--primary p-mt-2",onClick:e[15]||(e[15]=k=>o.$emit("saveOlapDesigner"))},null,8,["label"])])):v("",!0)])):v("",!0)])}var ue=$(To,[["render",ke]]);const me={style:{"min-height":"200px","min-width":"200px"}},ge=["no sorting","basic","breaking","count"];var fe={dialog:me,sortingModes:ge};const he=T({name:"olap-custom-view-save-dialog",components:{Dialog:O,RadioButton:Z},props:{sbiExecutionId:{type:String},olap:{type:Object}},emits:["save"],data(){return{olapSortingDialogDescriptor:fe,sortingMode:"no sorting",sortingCount:10}},created(){},methods:{save(){(this.sortingMode!=="count"||this.sortingCount<1)&&(this.sortingCount=10),this.$emit("save",{sortingMode:this.sortingMode,sortingCount:this.sortingCount})}}}),ve={key:0,class:"p-m-4"},we={key:0,class:"p-field"},xe={class:"p-float-label"};function ye(o,e,t,r,p,u){const b=l("Toolbar"),m=l("RadioButton"),n=l("InputText"),g=l("Button"),k=l("Dialog");return d(),h(k,{id:"olap-sorting-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.olapSortingDialogDescriptor.dialog.style),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-2 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.sidebar.sortingSettings")),1)]),_:1})]),footer:i(()=>[a(g,{class:"kn-button kn-button--primary",onClick:o.save},{default:i(()=>[w(c(o.$t("common.save")),1)]),_:1},8,["onClick"])]),default:i(()=>[o.olap?(d(),C("div",ve,[(d(!0),C(V,null,U(o.olapSortingDialogDescriptor.sortingModes,(x,f)=>(d(),C("div",{class:"p-field-radiobutton",key:f},[a(m,{name:"sorting",value:x,modelValue:o.sortingMode,"onUpdate:modelValue":e[0]||(e[0]=D=>o.sortingMode=D)},null,8,["value","modelValue"]),s("label",null,c(x),1)]))),128)),o.sortingMode==="count"?(d(),C("div",we,[s("span",xe,[a(n,{id:"sortingCount",type:"number",class:"kn-material-input",modelValue:o.sortingCount,"onUpdate:modelValue":e[1]||(e[1]=x=>o.sortingCount=x),modelModifiers:{trim:!0},min:1},null,8,["modelValue"])])])):v("",!0)])):v("",!0)]),_:1},8,["style","visible"])}var Ce=$(he,[["render",ye]]);const Me=[{field:"name",label:"common.name"},{field:"description",label:"common.description"},{field:"isPublic",label:"common.public"}],Ae=["name","description","isPublic"],Ee={style:{"text-align":"end",width:"10%"}};var De={columns:Me,globalFilterFields:Ae,iconColumn:Ee};const ze=T({name:"olap-custom-view-table",components:{Column:R,DataTable:F},props:{olapCustomViews:{type:Object}},emits:["close","applyCustomView"],data(){return{olapCustomViewTableDescriptor:De,customViews:[],filters:{global:[oo]},loading:!1}},watch:{olapCustomViews(){this.loadCustomViews()}},setup(){return{store:S()}},created(){this.loadCustomViews()},methods:{loadCustomViews(){this.customViews=this.olapCustomViews},applyCustomView(o){this.$emit("applyCustomView",{subobj_id:o.id,subobj_name:o.name,subobj_description:o.description,subobj_visibility:o.isPublic})},deleteCustomViewsConfirm(o){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteConfirmTitle"),icon:"pi pi-exclamation-triangle",accept:async()=>this.deleteCustomView(o)})},async deleteCustomView(o){this.loading=!0,await this.$http.delete(`/knowage/restful-services//1.0/olapsubobjects/removeOlapSubObject?idObj=${o.id}`).then(()=>{this.removeCustomView(o),this.store.setInfo({title:this.$t("common.toast.deleteTitle"),msg:this.$t("common.toast.deleteSuccess")})}).catch(()=>{}),this.loading=!1},removeCustomView(o){const e=this.customViews.findIndex(t=>t.id===o.id);e!==-1&&this.customViews.splice(e,1)},close(){this.$emit("close"),this.customViews=[]}}}),Te={class:"p-d-flex p-flex-column"},$e={class:"table-header p-d-flex p-ai-center"},Ie={id:"search-container",class:"p-input-icon-left p-mr-3"},Ne=s("i",{class:"pi pi-search"},null,-1);function Se(o,e,t,r,p,u){const b=l("Button"),m=l("Toolbar"),n=l("InputText"),g=l("Column"),k=l("DataTable"),x=P("tooltip");return d(),C("div",Te,[a(m,{class:"kn-toolbar kn-toolbar--primary p-col-12 kn-flex-0"},{start:i(()=>[w(c(o.$t("documentExecution.olap.customView.title")),1)]),end:i(()=>[a(b,{id:"document-execution-schedulations-close-button",class:"kn-button kn-button--primary",onClick:o.close},{default:i(()=>[w(c(o.$t("common.close")),1)]),_:1},8,["onClick"])]),_:1}),a(k,{value:o.customViews,id:"olap-custom-views-table",class:"p-datatable-sm kn-table",dataKey:"id",filters:o.filters,"onUpdate:filters":e[1]||(e[1]=f=>o.filters=f),globalFilterFields:o.olapCustomViewTableDescriptor.globalFilterFields,paginator:o.customViews.length>20,rows:20,loading:o.loading,responsiveLayout:"stack",breakpoint:"600px"},{empty:i(()=>[w(c(o.$t("common.info.noDataFound")),1)]),header:i(()=>[s("div",$e,[s("span",Ie,[Ne,a(n,{class:"kn-material-input",modelValue:o.filters.global.value,"onUpdate:modelValue":e[0]||(e[0]=f=>o.filters.global.value=f),placeholder:o.$t("common.search")},null,8,["modelValue","placeholder"])])])]),default:i(()=>[(d(!0),C(V,null,U(o.olapCustomViewTableDescriptor.columns,(f,D)=>(d(),h(g,{class:"kn-truncated",key:D,field:f.field,header:o.$t(f.label),sortable:!0},null,8,["field","header"]))),128)),a(g,{style:y(o.olapCustomViewTableDescriptor.iconColumn.style)},{body:i(f=>[E(a(b,{icon:"pi pi-file",class:"p-button-link",onClick:D=>o.applyCustomView(f.data)},null,8,["onClick"]),[[x,o.$t("common.apply"),void 0,{top:!0}]]),E(a(b,{icon:"pi pi-trash",class:"p-button-link",onClick:D=>o.deleteCustomViewsConfirm(f.data)},null,8,["onClick"]),[[x,o.$t("common.delete"),void 0,{top:!0}]])]),_:1},8,["style"])]),_:1},8,["value","filters","globalFilterFields","paginator","loading"])])}var Oe=$(ze,[["render",Se]]);const Ve={style:{height:"60%","max-height":"60%","max-width":"60%","min-width":"60%"}},Ue=["public","private"];var Be={dialog:Ve,scopeOptions:Ue};const Le=T({name:"olap-custom-view-save-dialog",components:{Dialog:O,Dropdown:B},props:{sbiExecutionId:{type:String}},data(){return{olapCustomViewSaveDialogDescriptor:Be,view:{name:"",description:"",scope:"public"},viewNameTouched:!1,loading:!1}},setup(){return{store:S()}},created(){},methods:{closeDialog(){this.$emit("close"),this.viewNameTouched=!1,this.view={name:"",description:"",scope:"public"}},async saveCustomizedView(){this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/subobject?SBI_EXECUTION_ID=${this.sbiExecutionId}`,this.view).then(()=>{this.store.setInfo({title:this.$t("common.toast.createTitle"),msg:this.$t("common.toast.success")}),this.closeDialog()}).catch(()=>{}),this.loading=!1}}}),Pe={class:"p-formgrid p-grid p-m-4"},Re={class:"p-fluid p-col-12 p-md-12 p-mt-2"},Fe={class:"p-float-label"},Xe={for:"name",class:"kn-material-input-label"},je={key:0,class:"p-error"},_e={class:"p-col-12"},He={class:"p-field p-col-12 p-md-12 p-mt-2"},Qe={class:"p-float-label"},Ye={for:"description",class:"kn-material-input-label"},We={class:"p-field p-col-12 p-md-12 p-mt-2"},qe={class:"p-float-label"},Je={class:"kn-material-input-label"};function Ge(o,e,t,r,p,u){const b=l("Toolbar"),m=l("ProgressBar"),n=l("InputText"),g=l("Dropdown"),k=l("Button"),x=l("Dialog");return d(),h(x,{id:"olap-custom-view-save-dialog",class:"p-fluid kn-dialog--toolbar--secondary",style:y(o.olapCustomViewSaveDialogDescriptor.dialog.style),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-2 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.savingCustomizedView")),1)]),_:1})]),footer:i(()=>[a(k,{class:"kn-button kn-button--primary",onClick:o.closeDialog},{default:i(()=>[w(c(o.$t("common.cancel")),1)]),_:1},8,["onClick"]),a(k,{class:"kn-button kn-button--primary",disabled:!o.view.name,onClick:o.saveCustomizedView},{default:i(()=>[w(c(o.$t("common.save")),1)]),_:1},8,["disabled","onClick"])]),default:i(()=>[o.loading?(d(),h(m,{key:0,mode:"indeterminate",class:"kn-progress-bar"})):v("",!0),s("div",Pe,[s("div",Re,[s("span",Fe,[a(n,{id:"name",class:N(["kn-material-input",{"p-invalid":!o.view.name&&o.viewNameTouched}]),modelValue:o.view.name,"onUpdate:modelValue":e[0]||(e[0]=f=>o.view.name=f),modelModifiers:{trim:!0},onBlur:e[1]||(e[1]=f=>o.viewNameTouched=!0)},null,8,["modelValue","class"]),s("label",Xe,c(o.$t("common.name"))+" *",1)]),!o.view.name&&o.viewNameTouched?(d(),C("div",je,[s("small",_e,c(o.$t("common.validation.required",{fieldName:o.$t("common.name")})),1)])):v("",!0)]),s("div",He,[s("span",Qe,[a(n,{id:"description",class:"kn-material-input",modelValue:o.view.description,"onUpdate:modelValue":e[2]||(e[2]=f=>o.view.description=f),modelModifiers:{trim:!0}},null,8,["modelValue"]),s("label",Ye,c(o.$t("common.description")),1)])]),s("div",We,[s("span",qe,[a(g,{class:"kn-material-input",modelValue:o.view.scope,"onUpdate:modelValue":e[3]||(e[3]=f=>o.view.scope=f),options:o.olapCustomViewSaveDialogDescriptor.scopeOptions},null,8,["modelValue","options"]),s("label",Je,c(o.$t("common.scope")),1)])])])]),_:1},8,["style","visible"])}var Ke=$(Le,[["render",Ge]]);const Ze={style:{height:"60%","max-height":"60%","max-width":"60%","min-width":"60%"}};var ot={dialog:Ze};const et=T({name:"olap-custom-view-save-dialog",components:{Dialog:O,VCodeMirror:uo},props:{mdxQuery:{type:String}},emits:["close"],data(){return{olapMDXQueryDialogDescriptor:ot,query:null,codeMirror:{},options:{mode:"text/x-sql",lineWrapping:!0,theme:"eclipse",lineNumbers:!0,readOnly:!0},loading:!1}},watch:{mdxQuery(){this.loadMdxQuery()}},created(){this.loadMdxQuery()},methods:{loadMdxQuery(){this.query=this.mdxQuery},setupCodeMirror(){const o=setInterval(()=>{!this.$refs.codeMirror||(this.codeMirror=this.$refs.codeMirror.cminstance,setTimeout(()=>{this.codeMirror.refresh()},0),clearInterval(o))},200)}}});function tt(o,e,t,r,p,u){const b=l("Toolbar"),m=l("VCodeMirror"),n=l("Button"),g=l("Dialog");return d(),h(g,{id:"olap-mdx-query-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.olapMDXQueryDialogDescriptor.dialog.style),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-2 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.showMdxQuery")),1)]),_:1})]),footer:i(()=>[a(n,{class:"kn-button kn-button--primary",onClick:e[1]||(e[1]=k=>o.$emit("close"))},{default:i(()=>[w(c(o.$t("common.close")),1)]),_:1})]),default:i(()=>[a(m,{ref:"codeMirror",class:"p-m-2",value:o.query,"onUpdate:value":e[0]||(e[0]=k=>o.query=k),options:o.options},null,8,["value","options"])]),_:1},8,["style","visible"])}var rt=$(et,[["render",tt]]);const at={containerScroll:{display:"flex",flex:"1",overflow:"hidden"},filterAxisDropzone:{"align-items":"center",border:"2px dashed #43749e",color:"#43749e",display:"none","font-size":"0.8rem",height:"32px","justify-content":"center","pointer-events":"none","text-transform":"uppercase"},filterCard:{"align-items":"center","background-color":"#fff",border:"1px solid #3b678c","border-radius":"2px",color:"#3b678c",cursor:"grab",display:"flex","font-size":"0.8rem",height:"27px","line-height":"27px",margin:"5px","max-width":"240px","min-width":"160px"},filterPanel:{height:"100%",left:0,position:"absolute",top:0,width:"100%"},filterPanelContainer:{"flex-grow":0,"flex-shrink":0,height:"45px",position:"relative"},noFilters:{"max-width":"60%"}};var eo={style:at};const nt=T({components:{},props:{filterCardList:{type:Array,required:!0},olapDesigner:{type:Object}},emits:["dragging","dragend","showMultiHierarchy","openFilterDialog"],data(){return{panelDescriptor:eo}},created(){},methods:{onDragStart(o,e,t){var r;o.dataTransfer.setData("text",JSON.stringify(e)),o.dataTransfer.dropEffect="move",o.dataTransfer.effectAllowed="move",(r=this.$refs[`${t}`].classList)==null||r.add("filter-dragging"),this.$emit("dragging")},removeDragClass(o){var e;(e=this.$refs[`${o}`].classList)==null||e.remove("filter-dragging"),this.$emit("dragend")},openFilterDialog(o){this.$emit("openFilterDialog",{filter:o,type:"slicer"})},filterIsActive(o){let e=!1;for(let t=0;t<o.hierarchies.length;t++)if(o.hierarchies[t].slicers&&o.hierarchies[t].slicers.length>0){e=!0;break}return e},getNumberOfActiveLevels(o){var r,p;const e=(p=(r=this.olapDesigner)==null?void 0:r.template)==null?void 0:p.wrappedObject.olap.DYNAMIC_SLICER;if(!e)return 0;let t=0;for(let u=0;u<e.length;u++)e[u].HIERARCHY===o.uniqueName&&t++;return t},getSlicersTooltip(o){let e="";if(!o||!o.hierarchies[0]||!o.hierarchies[0].slicers)return e;for(let t=0;t<o.hierarchies[0].slicers.length;t++)e+=o.hierarchies[0].slicers[t].name,e+=t===o.hierarchies[0].slicers.length-1?" ":", ";return e}}}),it=["id","onDragstart","onDragend"],lt={class:"p-ml-1"};function dt(o,e,t,r,p,u){const b=l("Button"),m=P("tooltip");return d(!0),C(V,null,U(o.filterCardList,(n,g)=>E((d(),C("div",{id:"filterCard",class:"p-d-flex p-flex-row",key:g},[s("div",{id:"filter-"+n.name,ref_for:!0,ref:"filter-"+n.name,style:y(o.panelDescriptor.style.filterCard),draggable:"true",onDragstart:k=>o.onDragStart(k,n,"filter-"+n.name),onDragend:k=>o.removeDragClass("filter-"+n.name)},[n.hierarchies.length>1?(d(),h(b,{key:0,icon:"fas fa-sitemap",class:"p-button-text p-button-rounded p-button-plain",onClick:k=>o.$emit("showMultiHierarchy",n)},null,8,["onClick"])):v("",!0),s("span",lt,c(n.caption),1),E(a(b,{icon:"fas fa-filter",class:N([{"olap-active-filter-icon":o.filterIsActive(n)},"p-button-text p-button-rounded p-button-plain p-ml-auto"]),onClick:k=>o.openFilterDialog(n)},null,8,["class","onClick"]),[[m,{value:o.getSlicersTooltip(n),disabled:!n||!n.hierarchies[0].slicers||n.hierarchies[0].slicers.length===0}]])],44,it)])),[[m,{value:o.$t("documentExecution.olap.filterPanel.activeLevels")+": "+o.getNumberOfActiveLevels(n),disabled:o.getNumberOfActiveLevels(n)===0}]])),128)}var st=$(nt,[["render",dt],["__scopeId","data-v-5c580bf6"]]);const ct=T({components:{InlineMessage:X,FilterCard:st},props:{olapProp:{type:Object,required:!0},olapDesigner:{type:Object}},emits:["putFilterOnAxis","showMultiHierarchy","openFilterDialog"],computed:{showScroll(){return this.scrollContainerWidth<this.scrollContentWidth}},data(){return{panelDescriptor:eo,filterCardList:[],scrollContainerWidth:0,scrollContentWidth:0}},watch:{olapProp(){this.loadData()}},setup(){return{store:S()}},created(){this.loadData()},methods:{loadData(){var o;this.filterCardList=(o=this.olapProp)==null?void 0:o.filters,window.addEventListener("resize",this.assignScrollValues),this.assignScrollValues()},displayDropzone(){var o;(o=this.$refs.axisDropzone.classList)==null||o.add("display-axis-dropzone")},hideDropzone(){var o;(o=this.$refs.axisDropzone.classList)==null||o.remove("display-axis-dropzone")},onDrop(o){var u,b,m;(u=this.$refs.axisDropzone.classList)==null||u.remove("display-axis-dropzone");var e=JSON.parse(o.dataTransfer.getData("text/plain")),t=(b=this.olapProp)==null?void 0:b.columns.length,r=(m=this.olapProp)==null?void 0:m.rows.length,p;if(e!=null){if(p=e.axis,e.measure)return this.store.setInfo({title:this.$t("common.toast.warning"),msg:this.$t("documentExecution.olap.filterToolbar.noMeasure")}),null;p!=-1&&(p===0&&t==1||p===1&&r==1?this.store.setInfo({title:this.$t("common.toast.warning"),msg:this.$t("documentExecution.olap.filterToolbar.dragEmptyWarning")}):(e.positionInAxis=this.filterCardList.length,e.axis=-1,this.$emit("putFilterOnAxis",p,e)))}setTimeout(()=>{this.assignScrollValues()},100)},emitMultiHierarchy(o){this.$emit("showMultiHierarchy",o)},scrollLeft(){this.$refs.filterItemsContainer.scrollLeft-=50},scrollRight(){this.$refs.filterItemsContainer.scrollLeft+=50},assignScrollValues(){var o,e,t,r;this.scrollContainerWidth=(e=(o=this.$refs)==null?void 0:o.filterPanelContainer)==null?void 0:e.clientWidth,this.scrollContentWidth=(r=(t=this.$refs)==null?void 0:t.filterItemsContainer)==null?void 0:r.scrollWidth}}}),pt={key:0,class:"p-d-flex p-flex-row p-jc-center kn-flex"};function bt(o,e,t,r,p,u){var g;const b=l("Button"),m=l("InlineMessage"),n=l("FilterCard");return d(),C("div",{id:"filterPanelContainer",ref:"filterPanelContainer",style:y(o.panelDescriptor.style.filterPanelContainer)},[s("div",{id:"filterPanel",ref:"filterPanel",class:"p-d-flex filterPanel p-ai-center",style:y(o.panelDescriptor.style.filterPanel),onDrop:e[4]||(e[4]=k=>o.onDrop(k)),onDragover:e[5]||(e[5]=L(()=>{},["prevent"])),onDragenter:e[6]||(e[6]=(...k)=>o.displayDropzone&&o.displayDropzone(...k))},[o.showScroll?(d(),h(b,{key:0,icon:"fas fa-arrow-circle-left",class:"p-button-text p-button-rounded p-button-plain p-ml-1",onClick:o.scrollLeft},null,8,["onClick"])):v("",!0),s("div",{ref:"filterItemsContainer",class:"p-d-flex p-ai-center kn-flex",style:y(o.panelDescriptor.style.containerScroll),onDragover:e[1]||(e[1]=L(()=>{},["prevent"])),onDragenter:e[2]||(e[2]=L(()=>{},["prevent"])),onDragleave:e[3]||(e[3]=(...k)=>o.hideDropzone&&o.hideDropzone(...k))},[((g=o.filterCardList)==null?void 0:g.length)==0?(d(),C("div",pt,[a(m,{class:"kn-flex p-m-1",style:y(o.panelDescriptor.style.noFilters),severity:"info",closable:"false"},{default:i(()=>[w(c(o.$t("documentExecution.olap.filterPanel.filterPanelEmpty")),1)]),_:1},8,["style"])])):(d(),h(n,{key:1,filterCardList:o.filterCardList,olapDesigner:o.olapDesigner,onShowMultiHierarchy:o.emitMultiHierarchy,onOpenFilterDialog:e[0]||(e[0]=k=>o.$emit("openFilterDialog",k))},null,8,["filterCardList","olapDesigner","onShowMultiHierarchy"])),s("div",{ref:"axisDropzone",class:"kn-flex kn-truncated p-mr-1",style:y(o.panelDescriptor.style.filterAxisDropzone)},c(o.$t("documentExecution.olap.filterPanel.drop")),5)],36),o.showScroll?(d(),h(b,{key:1,icon:"fas fa-arrow-circle-right",class:"p-button-text p-button-rounded p-button-plain p-mr-1",onClick:o.scrollRight},null,8,["onClick"])):v("",!0)],36)],4)}var kt=$(ct,[["render",bt],["__scopeId","data-v-58ca8f09"]]);const ut={filterCard:{"align-items":"center","background-color":"#43749e",border:"1px solid #fff","border-radius":"2px",color:"#fff",cursor:"grab",display:"flex","font-size":"0.8rem","font-weight":"normal","line-height":"1.5","max-height":"28px"},leftAxis:{"background-color":" #43749e !important",color:"white !important",height:"100%",left:0,position:"absolute",top:0,width:"100%"},leftAxisCard:{"background-color":"#43749e",border:"1px solid #fff","border-radius":" 2px",cursor:"grab","font-size":"0.7rem",height:"130px",width:"28px"},leftAxisDropzone:{"align-items":"center",border:"2px dashed white",color:"white",display:"none","font-size":"0.8rem","justify-content":"center","pointer-events":"none","text-transform":"uppercase",width:"28px"},leftToolbarContainer:{"flex-grow":0,"flex-shrink":0,position:"relative",width:"32px"},scroll:{overflow:"hidden"},sidebarButton:{color:"white",width:"50px"},toolbarMainColor:{"background-color":" #43749e !important",color:"white !important"},topAxis:{"background-color":" #43749e !important",color:"white !important",height:"100%",left:0,position:"absolute",top:0,width:"100%"},topAxisCard:{"align-items":"center",border:"1px solid #fff","border-radius":"2px",color:"#fff",cursor:"grab",display:"flex","font-size":"0.7rem","max-height":"28px",width:"130px"},topAxisDropzone:{"align-items":"center",border:"2px dashed white",color:"white",display:"none","font-size":"0.8rem",height:"28px","justify-content":"center","pointer-events":"none","text-transform":"uppercase"},topToolbarContainer:{"flex-grow":0,"flex-shrink":0,height:"32px",position:"relative"},whiteColor:{color:"white !important"},whitespace:{"background-color":"white",height:"100%",width:"2px"},whitespaceLeft:{"background-color":"white",height:"2px",width:"100%"}};var to={style:ut};const mt=T({components:{},props:{olapProp:{type:Object,required:!0}},emits:["openSidebar","putFilterOnAxis","swapAxis","switchPosition","showMultiHierarchy","openFilterDialog"],computed:{showScroll(){return this.scrollContainerWidth<this.scrollContentWidth}},data(){return{toolbarDescriptor:to,columns:[],rows:[],cutArray:[12,11,10,9,6],scrollContainerWidth:0,scrollContentWidth:0}},watch:{olapProp(){this.loadData()}},setup(){return{store:S()}},created(){this.loadData(),window.addEventListener("resize",this.assignScrollValues),this.assignScrollValues()},methods:{loadData(){var o,e;this.columns=(o=this.olapProp)==null?void 0:o.columns,this.rows=(e=this.olapProp)==null?void 0:e.rows},cutName(o,e,t){var r=e;t&&(r=r+2),r=r+1;var p=this.cutArray[r];return o==null&&(o="..."),o.length<=p?o:o.substring(0,p)+"..."},onDragStart(o,e,t){var r;o.dataTransfer.setData("text",JSON.stringify(e)),o.dataTransfer.dropEffect="move",o.dataTransfer.effectAllowed="move",(r=this.$refs[`${t}`].classList)==null||r.add("filter-dragging")},removeDragClass(o){var e;(e=this.$refs[`${o}`].classList)==null||e.remove("filter-dragging")},displayDropzone(){var o;(o=this.$refs.axisDropzone.classList)==null||o.add("display-axis-dropzone")},hideDropzone(){var o;(o=this.$refs.axisDropzone.classList)==null||o.remove("display-axis-dropzone")},onDrop(o){var u;(u=this.$refs.axisDropzone.classList)==null||u.remove("display-axis-dropzone");var e=JSON.parse(o.dataTransfer.getData("text/plain")),t=this.rows.length,r=this.columns.length,p;e!=null&&(p=e.axis,p!=0&&(e.axis===1&&t==1?this.store.setInfo({title:this.$t("common.toast.warning"),msg:this.$t("documentExecution.olap.filterToolbar.dragEmptyWarning")}):(e.positionInAxis=r,e.axis=0,this.$emit("putFilterOnAxis",p,e)))),setTimeout(()=>{this.assignScrollValues()},100)},scrollLeft(){this.$refs.filterItemsContainer.scrollLeft-=50},scrollRight(){this.$refs.filterItemsContainer.scrollLeft+=50},assignScrollValues(){var o,e,t,r;this.scrollContainerWidth=((e=(o=this.$refs)==null?void 0:o.filterPanelContainer)==null?void 0:e.clientWidth)-83,this.scrollContentWidth=(r=(t=this.$refs)==null?void 0:t.filterItemsContainer)==null?void 0:r.scrollWidth},openFilterDialog(o){this.$emit("openFilterDialog",{filter:o,type:"visible"})}}}),gt=["id","onDragstart","onDragend"],ft=["onClick"];function ht(o,e,t,r,p,u){const b=l("Button"),m=P("tooltip");return d(),C("div",{id:"top-toolbar-container",class:"p-d-flex",style:y(o.toolbarDescriptor.style.topToolbarContainer)},[s("span",{id:"topaxis",ref:"filterPanelContainer",class:"kn-flex p-d-flex",style:y(o.toolbarDescriptor.style.topAxis),onDrop:e[2]||(e[2]=n=>o.onDrop(n)),onDragover:e[3]||(e[3]=L(()=>{},["prevent"])),onDragenter:e[4]||(e[4]=(...n)=>o.displayDropzone&&o.displayDropzone(...n)),onDragleave:e[5]||(e[5]=(...n)=>o.hideDropzone&&o.hideDropzone(...n))},[a(b,{icon:"fa-solid fa-repeat",class:"p-button-text p-button-rounded p-button-plain",style:y(o.toolbarDescriptor.style.whiteColor),onClick:e[0]||(e[0]=n=>o.$emit("swapAxis"))},null,8,["style"]),o.showScroll?(d(),h(b,{key:0,icon:"fas fa-arrow-circle-left",class:"p-button-text p-button-rounded p-button-plain p-ml-1 p-as-center",style:y(o.toolbarDescriptor.style.whiteColor),onClick:o.scrollLeft},null,8,["style","onClick"])):v("",!0),s("div",{ref:"filterItemsContainer",class:"p-d-flex p-ai-center kn-flex",style:y(o.toolbarDescriptor.style.scroll)},[(d(!0),C(V,null,U(o.columns,(n,g)=>(d(),C("div",{key:g,class:"p-d-flex"},[s("div",{id:"top-"+n.name,ref_for:!0,ref:"top-"+n.name,style:y(o.toolbarDescriptor.style.topAxisCard),draggable:"true",onDragstart:k=>o.onDragStart(k,n,"top-"+n.name),onDragend:k=>o.removeDragClass("top-"+n.name)},[n.hierarchies.length>1?(d(),h(b,{key:0,icon:"fas fa-sitemap",class:"p-button-text p-button-rounded p-button-plain",style:y(o.toolbarDescriptor.style.whiteColor),onClick:k=>o.$emit("showMultiHierarchy",n)},null,8,["style","onClick"])):v("",!0),E((d(),C("span",{class:N(["kn-flex kn-truncated",{"p-ml-2":n.hierarchies.length==1}])},[w(c(o.cutName(n.caption,0,n.hierarchies.length>1)),1)],2)),[[m,n.caption,void 0,{top:!0}]]),s("div",{id:"whitespace",style:y(o.toolbarDescriptor.style.whitespace)},null,4),a(b,{icon:"fas fa-filter",class:"p-button-text p-button-rounded p-button-plain",style:y(o.toolbarDescriptor.style.whiteColor),onClick:k=>o.openFilterDialog(n)},null,8,["style","onClick"])],44,gt),n.positionInAxis<o.columns.length-1?(d(),C("i",{key:0,class:"fas fa-arrows-alt-h p-as-center p-mx-2",style:{cursor:"pointer"},onClick:k=>o.$emit("switchPosition",n)},null,8,ft)):v("",!0)]))),128)),s("div",{ref:"axisDropzone",class:"kn-flex kn-truncated p-mx-1",style:y(o.toolbarDescriptor.style.topAxisDropzone)},c(o.$t("documentExecution.olap.filterToolbar.drop")),5)],4),o.showScroll?(d(),h(b,{key:1,icon:"fas fa-arrow-circle-right",class:"p-button-text p-button-rounded p-button-plain p-mr-1 p-as-center",style:y(o.toolbarDescriptor.style.whiteColor),onClick:o.scrollRight},null,8,["style","onClick"])):v("",!0),s("div",{id:"whitespace",style:y(o.toolbarDescriptor.style.whitespace)},null,4),a(b,{icon:"fas fa-bars",class:"p-button-text p-button-rounded p-button-plain",style:y(o.toolbarDescriptor.style.sidebarButton),onClick:e[1]||(e[1]=n=>o.$emit("openSidebar"))},null,8,["style"])],36)],4)}var vt=$(mt,[["render",ht],["__scopeId","data-v-22b9d7d2"]]);const wt=T({components:{},props:{olapProp:{type:Object,required:!0}},emits:["openSidebar","putFilterOnAxis","switchPosition","showMultiHierarchy","openFilterDialog"],computed:{showScroll(){return this.scrollContainerHeight<this.scrollContentHeight}},data(){return{toolbarDescriptor:to,columns:[],rows:[],cutArray:[12,11,10,9,6],scrollContainerHeight:0,scrollContentHeight:0}},watch:{olapProp(){this.loadData()}},setup(){return{store:S()}},created(){this.loadData(),window.addEventListener("resize",this.assignScrollValues),this.assignScrollValues()},methods:{loadData(){var o,e;this.columns=(o=this.olapProp)==null?void 0:o.columns,this.rows=(e=this.olapProp)==null?void 0:e.rows},cutName(o,e,t){var r=e;t&&(r=r+2),r=r+1;var p=this.cutArray[r];return o==null&&(o="..."),o.length<=p?o:o.substring(0,p)+"..."},onDragStart(o,e,t){var r;o.dataTransfer.setData("text",JSON.stringify(e)),o.dataTransfer.dropEffect="move",o.dataTransfer.effectAllowed="move",(r=this.$refs[`${t}`].classList)==null||r.add("filter-dragging")},removeDragClass(o){var e;(e=this.$refs[`${o}`].classList)==null||e.remove("filter-dragging")},displayDropzone(){var o;(o=this.$refs.axisDropzone.classList)==null||o.add("display-axis-dropzone")},hideDropzone(){var o;(o=this.$refs.axisDropzone.classList)==null||o.remove("display-axis-dropzone")},onDrop(o){var u;console.log("DROPPED _-----------------------"),(u=this.$refs.axisDropzone.classList)==null||u.remove("display-axis-dropzone");var e=JSON.parse(o.dataTransfer.getData("text/plain")),t=this.rows.length,r=this.columns.length,p;e!=null&&(p=e.axis,p!=1&&(e.axis===0&&r==1?this.store.setInfo({title:this.$t("common.toast.warning"),msg:this.$t("documentExecution.olap.filterToolbar.dragEmptyWarning")}):(e.positionInAxis=t,e.axis=1,this.$emit("putFilterOnAxis",p,e)))),setTimeout(()=>{this.assignScrollValues()},100)},scrollUp(){this.$refs.filterItemsContainer.scrollTop-=50},scrollDown(){this.$refs.filterItemsContainer.scrollTop+=50},assignScrollValues(){var o,e,t,r;console.log("CALLED ASSING VALUES --------------------------------"),this.scrollContainerHeight=(e=(o=this.$refs)==null?void 0:o.filterPanelContainer)==null?void 0:e.clientHeight,this.scrollContentHeight=(r=(t=this.$refs)==null?void 0:t.filterItemsContainer)==null?void 0:r.scrollHeight},openFilterDialog(o){this.$emit("openFilterDialog",{filter:o,type:"visible"})}}}),xt=["id","onDragstart","onDragend"],yt=["onClick"];function Ct(o,e,t,r,p,u){const b=l("Button"),m=P("tooltip");return d(),C("div",{id:"filterPanelContainer",style:y(o.toolbarDescriptor.style.leftToolbarContainer)},[s("div",{id:"leftaxis",ref:"filterPanelContainer",class:"p-d-flex p-flex-column p-ai-center",style:y(o.toolbarDescriptor.style.topAxis),onDrop:e[3]||(e[3]=n=>o.onDrop(n)),onDragover:e[4]||(e[4]=L(()=>{},["prevent"])),onDragenter:e[5]||(e[5]=(...n)=>o.displayDropzone&&o.displayDropzone(...n))},[o.showScroll?(d(),h(b,{key:0,icon:"fas fa-arrow-circle-up",class:"p-button-text p-button-rounded p-button-plain p-mb-1",style:y(o.toolbarDescriptor.style.whiteColor),onClick:o.scrollUp},null,8,["style","onClick"])):v("",!0),s("div",{ref:"filterItemsContainer",class:"p-d-flex p-flex-column p-ai-center kn-flex",style:y(o.toolbarDescriptor.style.scroll),onDragover:e[0]||(e[0]=L(()=>{},["prevent"])),onDragenter:e[1]||(e[1]=L(()=>{},["prevent"])),onDragleave:e[2]||(e[2]=(...n)=>o.hideDropzone&&o.hideDropzone(...n))},[(d(!0),C(V,null,U(o.rows,(n,g)=>(d(),C("div",{key:g,class:"p-d-flex p-flex-column p-ai-center"},[s("div",{id:"left-"+n.name,ref_for:!0,ref:"left-"+n.name,class:"p-d-flex p-flex-column p-ai-center",style:y(o.toolbarDescriptor.style.leftAxisCard),draggable:"true",onDragstart:k=>o.onDragStart(k,n,"left-"+n.name),onDragend:k=>o.removeDragClass("left-"+n.name)},[n.hierarchies.length>1?(d(),h(b,{key:0,icon:"fas fa-sitemap",class:"p-button-text p-button-rounded p-button-plain",style:y(o.toolbarDescriptor.style.whiteColor),onClick:k=>o.$emit("showMultiHierarchy",n)},null,8,["style","onClick"])):v("",!0),E((d(),C("div",{class:N(["olap-rotate-text kn-flex kn-truncated",{"p-mt-2":n.hierarchies.length==1}]),flex:""},[w(c(o.cutName(n.caption,0,n.hierarchies.length>1)),1)],2)),[[m,n.caption,void 0,{right:!0}]]),s("div",{id:"whitespace",class:"p-mt-auto",style:y(o.toolbarDescriptor.style.whitespaceLeft)},null,4),a(b,{icon:"fas fa-filter",class:"p-button-text p-button-rounded p-button-plain p-mt-auto p-m-0",style:y(o.toolbarDescriptor.style.whiteColor),onClick:k=>o.openFilterDialog(n)},null,8,["style","onClick"])],44,xt),n.positionInAxis<o.rows.length-1?(d(),C("i",{key:0,class:"fas fa-arrows-alt-v p-my-2",style:{cursor:"pointer"},onClick:k=>o.$emit("switchPosition",n)},null,8,yt)):v("",!0)]))),128)),s("div",{ref:"axisDropzone",class:"kn-flex kn-truncated olap-rotate-text p-my-1",style:y(o.toolbarDescriptor.style.leftAxisDropzone)},c(o.$t("documentExecution.olap.filterToolbar.drop")),5)],36),o.showScroll?(d(),h(b,{key:1,icon:"fas fa-arrow-circle-down",class:"p-button-text p-button-rounded p-button-plain p-mt-1",style:y(o.toolbarDescriptor.style.whiteColor),onClick:o.scrollDown},null,8,["style","onClick"])):v("",!0)],36)],4)}var Mt=$(wt,[["render",Ct],["__scopeId","data-v-324404c6"]]);const At=[{field:"name",label:"common.name"},{field:"type",label:"common.type"}],Et={style:{height:"60%","max-height":"60%","max-width":"60%","min-width":"60%"}},Dt={style:{"text-align":"end",width:"10%"}},zt={message:{"align-items":"center",display:"flex","justify-content":"center","text-align":"center"}},Tt=[{label:"From Cell",value:"From Cell"},{label:"From Member",value:"From Member"}];var W={columns:At,dialog:Et,iconColumn:Dt,styles:zt,typeList:Tt};const $t=T({name:"olap-cross-navigation-step-one",components:{Column:R,DataTable:F,Dropdown:B},props:{propParameters:{type:Array},addNewParameterVisible:{type:Boolean},propSelectedParameter:{type:Object}},emits:["parameterSelected","deleteParameter"],data(){return{olapCrossNavigationDefinitionDialogDescriptor:W,parameters:[],selectedParameter:{}}},watch:{propParameters(){this.loadParameters()},propSelectedParameter(){this.loadSelectedParameter()}},created(){this.loadParameters(),this.loadSelectedParameter()},methods:{loadParameters(){this.parameters=this.propParameters},loadSelectedParameter(){this.selectedParameter=this.propSelectedParameter},deleteParameterConfirm(o){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteConfirmTitle"),icon:"pi pi-exclamation-triangle",accept:async()=>this.$emit("deleteParameter",o)})}}}),It={class:"p-m-4"},Nt={key:0},St={for:"type",class:"kn-material-input-label"};function Ot(o,e,t,r,p,u){const b=l("Column"),m=l("Button"),n=l("DataTable"),g=l("Dropdown"),k=P("tooltip");return d(),C("div",It,[a(n,{value:o.parameters,class:"p-datatable-sm kn-table p-m-2",dataKey:"name",responsiveLayout:"stack",breakpoint:"600px",onRowClick:e[0]||(e[0]=x=>o.$emit("parameterSelected",x.data))},{empty:i(()=>[w(c(o.$t("common.info.noDataFound")),1)]),default:i(()=>[(d(!0),C(V,null,U(o.olapCrossNavigationDefinitionDialogDescriptor.columns,(x,f)=>(d(),h(b,{class:"kn-truncated",key:f,field:x.field,header:o.$t(x.label),sortable:!0},null,8,["field","header"]))),128)),a(b,{style:y(o.olapCrossNavigationDefinitionDialogDescriptor.iconColumn.style)},{body:i(x=>[E(a(m,{icon:"pi pi-trash",class:"p-button-link",onClick:f=>o.deleteParameterConfirm(x.data)},null,8,["onClick"]),[[k,o.$t("common.delete"),void 0,{top:!0}]])]),_:1},8,["style"])]),_:1},8,["value"]),o.addNewParameterVisible?(d(),C("div",Nt,[s("label",St,c(o.$t("documentExecution.olap.crossNavigationDefinition.crossNavigationType")),1),a(g,{id:"type",class:"kn-material-input",modelValue:o.selectedParameter.type,"onUpdate:modelValue":e[1]||(e[1]=x=>o.selectedParameter.type=x),options:o.olapCrossNavigationDefinitionDialogDescriptor.typeList,optionLabel:"label",optionValue:"value"},null,8,["modelValue","options"])])):v("",!0)])}var Vt=$($t,[["render",Ot]]);const Ut=T({name:"olap-cross-navigation-step-two",components:{Message:Q},props:{propSelectedParameter:{type:Object},cell:{type:Object}},emits:["selectFromTable"],data(){return{olapCrossNavigationDefinitionDialogDescriptor:W,selectedParameter:{},value:"",nameTouched:!1}},watch:{propSelectedParameter(){this.loadSelectedParameter()},cell(){this.loadValueFromCell()}},created(){this.loadSelectedParameter(),this.loadValueFromCell()},methods:{loadSelectedParameter(){var o;this.selectedParameter=(o=this.propSelectedParameter)!=null?o:{},this.selectedParameter.name?this.selectedParameter.value=this.selectedParameter.type==="From Cell"?`dimension=${this.selectedParameter.dimension} hierarchy=${this.selectedParameter.hierarchy} level=${this.selectedParameter.level}`:this.selectedParameter.uniqueName:this.selectedParameter.value=""},selectFromTable(){this.$emit("selectFromTable")},loadValueFromCell(){this.cell&&(this.selectedParameter.value=this.selectedParameter.type==="From Cell"?`dimension=${this.cell.dimensionuniquename} hierarchy=${this.cell.hierarchyuniquename} level=${this.cell.level}`:this.cell.level)}}}),Bt={class:"p-m-4"},Lt={class:"p-fluid p-col-12 p-md-12 p-mt-4"},Pt={class:"p-float-label"},Rt={for:"value",class:"kn-material-input-label"},Ft={class:"p-fluid p-col-12 p-md-12 p-mt-4"},Xt={class:"p-float-label"},jt={for:"name",class:"kn-material-input-label"},_t={key:0,class:"p-error"},Ht={class:"p-col-12"};function Qt(o,e,t,r,p,u){const b=l("Message"),m=l("InputText"),n=l("Button");return d(),C("div",Bt,[o.selectedParameter.type==="cell"?(d(),h(b,{key:0,class:"p-m-4",severity:"info",closable:!1,style:y(o.olapCrossNavigationDefinitionDialogDescriptor.styles.message)},{default:i(()=>[w(c(o.$t("documentExecution.olap.crossNavigationDefinition.hint")),1)]),_:1},8,["style"])):v("",!0),s("div",Lt,[s("span",Pt,[a(m,{id:"value",class:"kn-material-input",modelValue:o.selectedParameter.value,"onUpdate:modelValue":e[0]||(e[0]=g=>o.selectedParameter.value=g),modelModifiers:{trim:!0}},null,8,["modelValue"]),s("label",Rt,c(o.$t("common.value")),1)])]),a(n,{id:"olap-select-from-table-button",class:"kn-button kn-button--primary p-mt-4",onClick:o.selectFromTable},{default:i(()=>[w(c(o.$t("documentExecution.olap.crossNavigationDefinition.selectFromTable")),1)]),_:1},8,["onClick"]),s("div",Ft,[s("span",Xt,[a(m,{id:"name",class:N(["kn-material-input",{"p-invalid":!o.selectedParameter.name&&o.nameTouched}]),modelValue:o.selectedParameter.name,"onUpdate:modelValue":e[1]||(e[1]=g=>o.selectedParameter.name=g),modelModifiers:{trim:!0},onBlur:e[2]||(e[2]=g=>o.nameTouched=!0)},null,8,["modelValue","class"]),s("label",jt,c(o.$t("documentExecution.olap.crossNavigationDefinition.parameterName"))+" *",1)]),!o.selectedParameter.name&&o.nameTouched?(d(),C("div",_t,[s("small",Ht,c(o.$t("common.validation.required",{fieldName:o.$t("documentExecution.olap.crossNavigationDefinition.parameterName")})),1)])):v("",!0)])])}var Yt=$(Ut,[["render",Qt]]);const Wt=T({name:"olap-cross-naviagtion-definition-dialog",components:{Dialog:O,OlapCrossNavigationStepOne:Vt,OlapCrossNavigationStepTwo:Yt},props:{visible:{type:Boolean},sbiExecutionId:{type:String},selectedCell:{type:Object},propOlapDesigner:{type:Object}},emits:["selectFromTable","close","save"],data(){return{olapCrossNavigationDefinitionDialogDescriptor:W,parameters:[],selectedParameter:null,cell:null,olapDesigner:null,step:0,addNewParameterVisible:!1}},watch:{propOlapDesigner(){this.loadDesigner()},selectedCell(){this.loadCell()},visible(o){o&&this.loadDesigner()}},created(){this.loadDesigner(),this.loadCell()},methods:{loadDesigner(){this.olapDesigner=this.propOlapDesigner,this.olapDesigner&&this.loadCrossNavigationParameters()},loadCrossNavigationParameters(){var t,r,p,u,b,m,n,g,k,x,f;const o=(b=(u=(p=(r=(t=this.olapDesigner.template)==null?void 0:t.wrappedObject)==null?void 0:r.olap)==null?void 0:p.CROSS_NAVIGATION)==null?void 0:u.PARAMETERS)==null?void 0:b.PARAMETER,e=[];(f=(x=(k=(g=(n=(m=this.olapDesigner)==null?void 0:m.template)==null?void 0:n.wrappedObject)==null?void 0:g.olap)==null?void 0:k.MDXQUERY)==null?void 0:x.clickable)==null||f.forEach(D=>e.push({...D,name:D.clickParameter.name,type:"From Member"})),this.parameters=[],(o==null?void 0:o.length)>0&&(this.parameters=this.parameters.concat(o)),(e==null?void 0:e.length)>0&&(this.parameters=this.parameters.concat(e))},addNewParameter(){this.selectedParameter={},this.addNewParameterVisible=!0},onParameterSelect(o){this.selectedParameter=o,this.step=1},loadCell(){var o;this.cell=(o=this.selectedCell)==null?void 0:o.cell},deleteParameter(o){o.type==="From Cell"?this.removeCellParameter(o):this.removeMemberParameter(o),this.loadCrossNavigationParameters()},removeCellParameter(o){const e=this.olapDesigner.template.wrappedObject.olap.CROSS_NAVIGATION.PARAMETERS.PARAMETER,t=e.findIndex(r=>r.name===(o==null?void 0:o.name));t!==-1&&e.splice(t,1)},removeMemberParameter(o){const e=this.olapDesigner.template.wrappedObject.olap.MDXQUERY.clickable,t=e.findIndex(r=>r.clickParameter.name===o.name);t!==-1&&e.splice(t,1)},closeDialog(){this.$emit("close"),this.step=0,this.selectedParameter={},this.cell=null,this.addNewParameterVisible=!1},save(){this.selectedParameter&&(this.selectedParameter.type==="From Cell"?this.addFromCellParameter():this.addFromMemberParameter()),this.closeDialog()},addFromCellParameter(){var m,n,g;const o=(m=this.selectedParameter)==null?void 0:m.value,e=o==null?void 0:o.substring(o.indexOf("dimension"),o.indexOf("hierarchy")),t=o==null?void 0:o.substring(o.indexOf("hierarchy"),o.indexOf("level")),r=o==null?void 0:o.substring(o.indexOf("level")+1),p={dimension:e==null?void 0:e.substring(e.indexOf("=")+1).trim(),hierarchy:t==null?void 0:t.substring(t.indexOf("=")+1).trim(),level:r==null?void 0:r.substring(r.indexOf("=")+1).trim(),name:(n=this.selectedParameter)==null?void 0:n.name,type:(g=this.selectedParameter)==null?void 0:g.type};this.olapDesigner.template.wrappedObject.olap.CROSS_NAVIGATION||(this.olapDesigner.template.wrappedObject.olap.CROSS_NAVIGATION={PARAMETERS:{PARAMETER:[]}});const u=this.olapDesigner.template.wrappedObject.olap.CROSS_NAVIGATION.PARAMETERS.PARAMETER,b=u.findIndex(k=>{var x;return k.name===((x=this.selectedParameter)==null?void 0:x.name)});b!==-1?u[b]=p:u.push(p)},addFromMemberParameter(){if(!this.selectedParameter)return;this.olapDesigner.template.wrappedObject.olap.MDXQUERY.clickable||(this.olapDesigner.template.wrappedObject.olap.MDXQUERY.clickable=[]);const o=this.olapDesigner.template.wrappedObject.olap.MDXQUERY.clickable,e={clickParameter:{name:this.selectedParameter.name,value:"{0}"},name:this.selectedParameter.name,type:this.selectedParameter.type,uniqueName:this.selectedParameter.value},t=o.findIndex(r=>{var p;return r.clickParameter.name===((p=this.selectedParameter)==null?void 0:p.name)});t!==-1?o[t]=e:o.push(e)}}});function qt(o,e,t,r,p,u){const b=l("Button"),m=l("Toolbar"),n=l("OlapCrossNavigationStepOne"),g=l("OlapCrossNavigationStepTwo"),k=l("Dialog");return d(),h(k,{id:"olap-cross-naviagtion-definition-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.olapCrossNavigationDefinitionDialogDescriptor.dialog.style),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(m,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-2 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.crossNavigationDefinition.title")),1)]),end:i(()=>[o.step===0?(d(),h(b,{key:0,id:"olap-add-new-cross-navigation-button",class:"kn-button kn-button--primary",onClick:o.addNewParameter},{default:i(()=>[w(c(o.$t("common.addNew")),1)]),_:1},8,["onClick"])):v("",!0)]),_:1})]),footer:i(()=>[a(b,{class:"kn-button kn-button--primary",onClick:o.closeDialog},{default:i(()=>[w(c(o.$t("common.cancel")),1)]),_:1},8,["onClick"]),o.step===0?(d(),h(b,{key:0,class:"kn-button kn-button--primary",disabled:!o.selectedParameter||!o.selectedParameter.type,onClick:e[1]||(e[1]=x=>o.step=1)},{default:i(()=>[w(c(o.$t("common.next")),1)]),_:1},8,["disabled"])):(d(),h(b,{key:1,class:"kn-button kn-button--primary",disabled:!o.selectedParameter||!o.selectedParameter.name,onClick:o.save},{default:i(()=>[w(c(o.$t("common.save")),1)]),_:1},8,["disabled","onClick"]))]),default:i(()=>[o.step===0?(d(),h(n,{key:0,propParameters:o.parameters,addNewParameterVisible:o.addNewParameterVisible,propSelectedParameter:o.selectedParameter,onParameterSelected:o.onParameterSelect,onDeleteParameter:o.deleteParameter},null,8,["propParameters","addNewParameterVisible","propSelectedParameter","onParameterSelected","onDeleteParameter"])):(d(),h(g,{key:1,propSelectedParameter:o.selectedParameter,cell:o.cell,onSelectFromTable:e[0]||(e[0]=x=>{var f;return o.$emit("selectFromTable",(f=o.selectedParameter)==null?void 0:f.type)})},null,8,["propSelectedParameter","cell"]))]),_:1},8,["style","visible"])}var Jt=$(Wt,[["render",qt]]);const Gt={BUTTON_ALGORITHMS:"documentExecution.olap.sidebar.selectAlgorithm",BUTTON_CC:"documentExecution.olap.sidebar.calculatedField",BUTTON_CROSSNAV_WIZARD:"documentExecution.olap.sidebar.defineCrossNavigation",BUTTON_DRILL_THROUGH:"documentExecution.olap.sidebar.drillThrough",BUTTON_EDITABLE_EXCEL_EXPORT:"documentExecution.olap.sidebar.exportExcel",BUTTON_EXPORT_OUTPUT:"documentExecution.olap.sidebar.exportOutput",BUTTON_FATHER_MEMBERS:"documentExecution.olap.sidebar.showParentMembers",BUTTON_FLUSH_CACHE:"documentExecution.olap.sidebar.reloadSchema",BUTTON_HIDE_EMPTY:"documentExecution.olap.sidebar.suppressEmptyRowsColumns",BUTTON_HIDE_SPANS:"documentExecution.olap.sidebar.hideSpans",BUTTON_MDX:"documentExecution.olap.sidebar.mdxQuery",BUTTON_PAGINATION_WIZARD:"documentExecution.olap.sidebar.configureTablePagination",BUTTON_SAVE_NEW:"documentExecution.olap.sidebar.saveNewVersion",BUTTON_SAVE_SUBOBJECT:"documentExecution.olap.sidebar.saveCustomizedView",BUTTON_SCENARIO_WIZARD:"documentExecution.olap.sidebar.configureScenario",BUTTON_SHOW_PROPERTIES:"documentExecution.olap.sidebar.showProperties",BUTTON_SORTING_SETTINGS:"documentExecution.olap.sidebar.sortingSettings",BUTTON_UNDO:"documentExecution.olap.sidebar.undo",BUTTON_VERSION_MANAGER:"documentExecution.olap.sidebar.manageVersions",BUTTON_WIZARD:"documentExecution.olap.sidebar.configureButtonsVisiblity"},Kt={style:{height:"60%","max-height":"60%","max-width":"60%","min-width":"60%"}};var Zt={buttonLabels:Gt,dialog:Kt};const or=T({name:"olap-button-wizard-dialog",components:{Checkbox:Y,Column:R,DataTable:F,Dialog:O},props:{visible:{type:Boolean},sbiExecutionId:{type:String},propButtons:{type:Array},propOlapDesigner:{type:Object}},data(){return{olapButtonWizardDialogDescriptor:Zt,buttons:[],wizardButtons:[],selected:{},allVisibleSelected:!1,allClickedSelected:!1,olapDesigner:null}},watch:{propButtons(){this.loadButtons()},propOlapDesigner(){this.loadDesigner()},visible(o){o&&(this.loadButtons(),this.loadDesigner())}},created(){this.loadButtons(),this.loadDesigner()},methods:{loadButtons(){this.buttons=this.propButtons},loadDesigner(){this.olapDesigner=this.propOlapDesigner,this.olapDesigner&&this.loadWizardButtons()},loadWizardButtons(){var o;this.wizardButtons=this.buttons.filter(e=>e.category!=="OLAP_DESIGNER"),((o=this.olapDesigner)==null?void 0:o.ENGINE)==="knowageolapengine"&&(this.wizardButtons=this.wizardButtons.filter(e=>e.category!=="WHAT_IF")),this.checkIfAllSelected()},checkIfColumnSelected(o){let e=!0;for(let t=0;t<this.wizardButtons.length;t++)if((o==="visible"||o==="clicked"&&this.wizardButtons[t].clickable)&&!this.wizardButtons[t][o]){e=!1;break}return e},checkIfAllSelected(){this.allVisibleSelected=this.checkIfColumnSelected("visible"),this.allClickedSelected=this.checkIfColumnSelected("clicked")},setAllChecked(o){this.wizardButtons.forEach(e=>{o==="clicked"&&e.clickable?e.clicked=this.allClickedSelected:o==="visible"&&(e.visible=this.allVisibleSelected),this.changeCheckedValue(e,o)}),this.checkIfAllSelected()},setChecked(o,e){this.changeCheckedValue(o,e),this.checkIfAllSelected()},changeCheckedValue(o,e){e==="clicked"&&o.clicked?o.visible=!0:e==="visible"&&!o.visible&&(o.clicked=!1)},closeDialog(){this.$emit("close"),this.wizardButtons=[]},save(){this.olapDesigner.template.wrappedObject.olap.TOOLBAR||(this.olapDesigner.template.wrappedObject.olap.TOOLBAR={});const o=Object.keys(this.olapDesigner.template.wrappedObject.olap.TOOLBAR);this.wizardButtons.forEach(e=>{const t=o.indexOf(e.name);t>=0?(this.olapDesigner.template.wrappedObject.olap.TOOLBAR[o[t]].visible=e.visible,this.olapDesigner.template.wrappedObject.olap.TOOLBAR[o[t]].clicked=e.clicked):this.olapDesigner.template.wrappedObject.olap.TOOLBAR[e.name]={visible:e.visible,clicked:e.clicked}}),this.$emit("close")}}});function er(o,e,t,r,p,u){const b=l("Toolbar"),m=l("Column"),n=l("Checkbox"),g=l("DataTable"),k=l("Button"),x=l("Dialog");return d(),h(x,{id:"olap-button-wizard-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.olapButtonWizardDialogDescriptor.dialog.style),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-2 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.buttonsWizard.title")),1)]),_:1})]),footer:i(()=>[a(k,{class:"kn-button kn-button--primary",onClick:o.closeDialog},{default:i(()=>[w(c(o.$t("common.cancel")),1)]),_:1},8,["onClick"]),a(k,{class:"kn-button kn-button--primary",onClick:o.save},{default:i(()=>[w(c(o.$t("common.save")),1)]),_:1},8,["onClick"])]),default:i(()=>[a(g,{value:o.wizardButtons,class:"p-datatable-sm kn-table p-m-4",scrollable:!0,scrollHeight:"100%"},{empty:i(()=>[w(c(o.$t("common.info.noDataFound")),1)]),default:i(()=>[a(m,{header:o.$t("common.name")},{body:i(f=>[w(c(o.$t(o.olapButtonWizardDialogDescriptor.buttonLabels[f.data.name])),1)]),_:1},8,["header"]),a(m,{header:o.$t("common.visible")},{header:i(()=>[a(n,{class:"p-mr-2",modelValue:o.allVisibleSelected,"onUpdate:modelValue":e[0]||(e[0]=f=>o.allVisibleSelected=f),binary:!0,onChange:e[1]||(e[1]=f=>o.setAllChecked("visible"))},null,8,["modelValue"])]),body:i(f=>[a(n,{modelValue:f.data.visible,"onUpdate:modelValue":D=>f.data.visible=D,binary:!0,onChange:D=>o.setChecked(f.data,"visible")},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["header"]),a(m,{header:o.$t("common.clicked")},{header:i(()=>[a(n,{class:"p-mr-2",modelValue:o.allClickedSelected,"onUpdate:modelValue":e[2]||(e[2]=f=>o.allClickedSelected=f),binary:!0,onChange:e[3]||(e[3]=f=>o.setAllChecked("clicked"))},null,8,["modelValue"])]),body:i(f=>[a(n,{modelValue:f.data.clicked,"onUpdate:modelValue":D=>f.data.clicked=D,binary:!0,disabled:!f.data.clickable,onChange:D=>o.setChecked(f.data,"clicked")},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1},8,["header"])]),_:1},8,["value"])]),_:1},8,["style","visible"])}var tr=$(or,[["render",er]]);const rr=T({components:{Dialog:O,Dropdown:B},props:{selectedFilter:{type:Object,required:!0},multiHierUN:{type:String,required:!0}},emits:["save","updateHierarchy","setMultiHierUN"],data(){return{member:{},selecetedMultiHierUN:""}},watch:{selectedFilter(){this.loadData()}},created(){this.loadData()},methods:{loadData(){this.member=this.selectedFilter,this.selecetedMultiHierUN=this.multiHierUN}}}),ar={class:"p-m-3"},nr={class:"p-col-12"},ir={class:"p-float-label"},lr={for:"hier",class:"kn-material-input-label"};function dr(o,e,t,r,p,u){const b=l("Toolbar"),m=l("Dropdown"),n=l("Button"),g=l("Dialog");return d(),h(g,{id:"olap-sorting-dialog",class:"p-fluid kn-dialog--toolbar--primary",visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary"},{start:i(()=>[w(c(o.member.caption),1)]),_:1})]),footer:i(()=>[a(n,{class:"kn-button kn-button--secondary",onClick:e[2]||(e[2]=k=>o.$emit("close"))},{default:i(()=>[w(c(o.$t("common.cancel")),1)]),_:1}),a(n,{class:"kn-button kn-button--primary",onClick:e[3]||(e[3]=k=>o.$emit("updateHierarchy"))},{default:i(()=>[w(c(o.$t("common.save")),1)]),_:1})]),default:i(()=>[s("span",ar,[w(c(o.$t("documentExecution.olap.multiHierarchy.detail1"))+" ",1),s("b",null,c(o.member.hierarchies[o.member.selectedHierarchyPosition].caption)+".",1),w(" "+c(o.$t("documentExecution.olap.multiHierarchy.detail2")),1)]),s("div",nr,[s("span",ir,[a(m,{id:"hier",class:"kn-material-input",modelValue:o.selecetedMultiHierUN,"onUpdate:modelValue":e[0]||(e[0]=k=>o.selecetedMultiHierUN=k),options:o.member.hierarchies,optionLabel:"caption",optionValue:"uniqueName",onChange:e[1]||(e[1]=k=>o.$emit("setMultiHierUN",o.selecetedMultiHierUN))},null,8,["modelValue","options"]),s("label",lr,c(o.$t("documentExecution.olap.multiHierarchy.dropdownLabel")),1)])])]),_:1},8,["visible"])}var sr=$(rr,[["render",dr]]);const cr={dropdown:{"min-width":"130px"}};var pr={style:cr};const br=T({components:{Column:R,DataTable:F,Menu:yo,Checkbox:Y,Dropdown:B},props:{drillData:{type:Array,required:!0},tableColumns:{type:Array,required:!0},dtLevels:{type:Array,required:!0},menuTree:{type:Array,required:!0},dtMaxRows:{type:Number,required:!0}},emits:["close","applyCustomView","checkCheckboxes","clearLevels","drill","rowsChanged"],data(){return{dtDescriptor:pr,dtData:[],formattedColumns:[],dtAssociatedLevels:[],dtTree:[],menuButtons:[],filters:{global:[oo]},maxRowsOptions:[0,10,25,50,100,250,500,1e3],maxRows:0}},watch:{drillData(){this.dtData=this.drillData,this.maxRows=this.dtMaxRows},tableColumns(){this.formattedColumns=this.tableColumns},dtLevels(){this.dtAssociatedLevels=this.dtLevels},menuTree(){this.dtTree=this.menuTree}},setup(){return{store:S()}},created(){this.loadData()},methods:{loadData(){this.dtData=this.drillData,this.formattedColumns=this.tableColumns,this.dtAssociatedLevels=this.dtLevels,this.dtTree=this.menuTree},closeDialog(){this.$emit("close")},showMenu(o,e){this.createMenuItems(e.children),this.$refs.optionsMenu.toggle(o)},createMenuItems(o){this.menuButtons=[],o.forEach(e=>{this.menuButtons.push(e)})},clearLevels(){this.$emit("clearLevels"),this.dtTree.forEach(o=>{o.children.forEach(e=>{e.checked=!1})})},exportDrill(o,e,t){var r=typeof o!="object"?JSON.parse(o):o,p="";if(p+=e+`\r

`,t){var u="";for(var b in r[0])u+=b+",";u=u.slice(0,-1),p+=u+`\r
`}for(var m=0;m<r.length;m++){u="";for(b in r[m])u+='"'+r[m][b]+'",';u.slice(0,u.length-1),p+=u+`\r
`}if(p==""){this.store.setError({title:this.$t("common.toast.error"),msg:this.$t("documentExecution.olap.drillTru.invalidData")});return}var n="MyReport_";n+=e.replace(/ /g,"_");var g="data:text/csv;charset=utf-8,"+escape(p),k=document.createElement("a");k.href=g,k.style="visibility:hidden",k.download=n+".csv",document.body.appendChild(k),k.click(),document.body.removeChild(k)}}}),kr={class:"p-d-flex p-flex-column kn-width-full"},ur={class:"p-d-flex p-flex-row p-mt-2"},mr={class:"table-header p-d-flex p-ai-center"},gr={id:"search-container",class:"p-input-icon-left p-mr-3"},fr=s("i",{class:"pi pi-search"},null,-1),hr={class:"p-float-label p-as-end p-ml-auto"},vr={for:"rows",class:"kn-material-input-label"},wr={class:"p-mt-auto p-ml-auto p-mb-3 p-mr-3"},xr={class:"p-m-2"},yr={class:"p-ml-2"};function Cr(o,e,t,r,p,u){const b=l("Toolbar"),m=l("Button"),n=l("Card"),g=l("InputText"),k=l("Dropdown"),x=l("Column"),f=l("DataTable"),D=l("Checkbox"),z=l("Menu");return d(),C("div",kr,[a(b,{class:"kn-toolbar kn-toolbar--secondary p-col-12 kn-flex-0"},{start:i(()=>[w(c(o.$t("documentExecution.olap.drillTru.title")),1)]),_:1}),a(n,{class:"p-m-2"},{content:i(()=>[s("b",null,c(o.$t("documentExecution.olap.drillTru.selectLevels"))+":",1),s("div",ur,[(d(!0),C(V,null,U(o.dtTree,(M,I)=>(d(),C("div",{key:I,class:"p-d-flex p-flex-column"},[a(m,{class:"p-button-text p-button-plain",label:M.caption,onClick:_=>o.showMenu(_,M)},null,8,["label","onClick"])]))),128)),a(m,{class:"kn-button kn-button--primary p-ml-auto",label:o.$t("documentExecution.olap.drillTru.clearAll"),onClick:o.clearLevels},null,8,["label","onClick"])])]),_:1}),a(f,{value:o.dtData,id:"olap-custom-views-table",class:"p-datatable-sm kn-table p-m-2",filters:o.filters,"onUpdate:filters":e[3]||(e[3]=M=>o.filters=M),paginator:o.drillData.length>20,rows:18,responsiveLayout:"stack",breakpoint:"600px",stripedRows:"true",rowHover:"true"},{empty:i(()=>[w(c(o.$t("common.info.noDataFound")),1)]),header:i(()=>[s("div",mr,[s("span",gr,[fr,a(g,{class:"kn-material-input",modelValue:o.filters.global.value,"onUpdate:modelValue":e[0]||(e[0]=M=>o.filters.global.value=M),placeholder:o.$t("common.search")},null,8,["modelValue","placeholder"])]),s("span",hr,[a(k,{id:"rows",class:"kn-material-input",modelValue:o.maxRows,"onUpdate:modelValue":e[1]||(e[1]=M=>o.maxRows=M),options:o.maxRowsOptions,style:y(o.dtDescriptor.style.dropdown),onChange:e[2]||(e[2]=M=>o.$emit("rowsChanged",o.maxRows))},null,8,["modelValue","options","style"]),s("label",vr,c(o.$t("documentExecution.olap.drillTru.maxRows")),1)])])]),default:i(()=>[(d(!0),C(V,null,U(o.tableColumns,(M,I)=>(d(),h(x,{class:"kn-truncated",key:I,field:M.name,header:o.$t(M.label),sortable:!0},null,8,["field","header"]))),128))]),_:1},8,["value","filters","paginator"]),s("div",wr,[a(m,{class:"kn-button kn-button--secondary",label:o.$t("common.cancel"),onClick:o.closeDialog},null,8,["label","onClick"]),a(m,{class:"kn-button kn-button--primary p-mx-2",label:o.$t("common.export"),onClick:e[4]||(e[4]=M=>o.exportDrill(o.dtData,"DrillTrough Table",!0))},null,8,["label"]),a(m,{class:"kn-button kn-button--primary",label:o.$t("common.apply"),onClick:e[5]||(e[5]=M=>o.$emit("drill"))},null,8,["label"])]),a(z,{id:"optionsMenu",ref:"optionsMenu",model:o.menuButtons},{item:i(({item:M})=>[s("span",xr,[a(D,{modelValue:M.checked,"onUpdate:modelValue":I=>M.checked=I,binary:!0,onClick:I=>o.$emit("checkCheckboxes",M,o.dtAssociatedLevels)},null,8,["modelValue","onUpdate:modelValue","onClick"]),s("text",yr,c(M.caption),1)])]),_:1},8,["model"])])}var Mr=$(br,[["render",Cr]]);const Ar={dialog:{width:"60%"},spinner:{background:"rgb(0 0 0 / 25%)",height:"100%",position:"absolute",width:"100%","z-index":"9999"}};var Er={style:Ar};const Dr=T({name:"olap-custom-view-save-dialog",components:{Dialog:O,Dropdown:B,InlineMessage:X,RadioButton:Z,ProgressSpinner:mo},props:{olapVersionsProp:{type:Boolean,required:!0},sbiExecutionId:{type:String}},emits:["close"],computed:{saveDisabled(){return!(this.selectedType==="file"&&this.fieldDelimiter.length>0||this.selectedType==="table"&&this.tableName.length>0)}},data(){return{descriptor:Er,loading:!1,selectedVersion:null,selectedType:"file",tableName:"WHATIFOUTPUTTABLE",fieldDelimiter:"|"}},watch:{},setup(){return{store:S()}},created(){},methods:{saveRequest(){this.selectedType==="file"?(this.loading=!0,this.$http.get(`/knowagewhatifengine/restful-services/1.0/analysis/csv/${this.selectedVersion.id}/${this.fieldDelimiter}?SBI_EXECUTION_ID=${this.sbiExecutionId}`,{responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"}}).then(o=>{go(o),this.store.setInfo({title:this.$t("common.downloading"),msg:this.$t("managers.mondrianSchemasManagement.toast.downloadFile.downloaded")})}).catch(()=>{this.store.setError({title:this.$t("common.error.downloading"),msg:this.$t("common.error.downloading")})}).finally(()=>this.loading=!1)):(this.loading=!0,this.$http.get(`/knowagewhatifengine/restful-services/1.0/analysis/table/${this.selectedVersion.id}/${this.tableName}?SBI_EXECUTION_ID=${this.sbiExecutionId}`,{headers:{Accept:"application/json, text/plain, */*"}}).then(async()=>{this.store.setInfo({title:this.$t("common.information"),msg:this.$t("common.toast.updateSuccess")})}).catch(()=>{}).finally(()=>this.loading=!1))},resetFields(){this.tableName="WHATIFOUTPUTTABLE",this.fieldDelimiter="|",this.selectedVersion=null}}}),zr={class:"p-fluid p-formgrid p-grid p-m-1"},Tr={id:"type-container",class:"p-field p-d-flex p-ai-center p-m-2 p-col-11"},$r={class:"p-mx-2"},Ir={for:"fileType",class:"p-ml-1"},Nr={for:"tableType",class:"p-ml-1"},Sr={class:"p-field p-float-label p-col-6 p-mt-2"},Or={for:"version",class:"kn-material-input-label"},Vr={key:0,class:"p-field p-col-6 p-mt-2"},Ur={class:"p-float-label"},Br={for:"fieldDelimiter",class:"kn-material-input-label"},Lr={key:1,class:"p-field p-col-6 p-mt-2"},Pr={class:"p-float-label"},Rr={for:"tableName",class:"kn-material-input-label"};function Fr(o,e,t,r,p,u){const b=l("Toolbar"),m=l("ProgressSpinner"),n=l("InlineMessage"),g=l("RadioButton"),k=l("Dropdown"),x=l("InputText"),f=l("Button"),D=l("Dialog");return d(),h(D,{id:"olap-wizard-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.descriptor.style.dialog),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-2 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.outputWizard.title")),1)]),_:1})]),footer:i(()=>[a(f,{class:"kn-button kn-button--secondary",onClick:e[5]||(e[5]=z=>o.$emit("close"))},{default:i(()=>[w(c(o.$t("common.close")),1)]),_:1}),a(f,{class:"kn-button kn-button--primary",disabled:o.saveDisabled,onClick:o.saveRequest},{default:i(()=>[w(c(o.$t("common.save")),1)]),_:1},8,["disabled","onClick"])]),default:i(()=>[o.loading?(d(),h(m,{key:0,class:"wizard-overlay-spinner",style:y(o.descriptor.style.spinner)},null,8,["style"])):v("",!0),s("form",zr,[a(n,{class:"p-m-1",severity:"info",closable:"false"},{default:i(()=>[w(c(o.$t("documentExecution.olap.outputWizard.infoMsg")),1)]),_:1}),s("div",Tr,[s("span",null,c(o.$t("managers.workspaceManagement.dataPreparation.transformations.outputType"))+": ",1),s("div",$r,[a(g,{id:"fileType",name:"file",value:"file",modelValue:o.selectedType,"onUpdate:modelValue":e[0]||(e[0]=z=>o.selectedType=z)},null,8,["modelValue"]),s("label",Ir,c(o.$t("common.file")),1)]),s("div",null,[a(g,{id:"tableType",name:"table",value:"table",modelValue:o.selectedType,"onUpdate:modelValue":e[1]||(e[1]=z=>o.selectedType=z)},null,8,["modelValue"]),s("label",Nr,c(o.$t("common.table.table")),1)])]),s("div",Sr,[a(k,{id:"version",class:"kn-material-input",modelValue:o.selectedVersion,"onUpdate:modelValue":e[2]||(e[2]=z=>o.selectedVersion=z),options:o.olapVersionsProp,optionLabel:"name"},null,8,["modelValue","options"]),s("label",Or,c(o.$t("documentExecution.olap.outputWizard.version")),1)]),o.selectedType==="file"&&o.selectedVersion?(d(),C("div",Vr,[s("span",Ur,[a(x,{id:"fieldDelimiter",class:"kn-material-input",modelValue:o.fieldDelimiter,"onUpdate:modelValue":e[3]||(e[3]=z=>o.fieldDelimiter=z)},null,8,["modelValue"]),s("label",Br,c(o.$t("documentExecution.olap.outputWizard.fieldDelimiter")),1)]),s("small",null,c(o.$t("documentExecution.olap.outputWizard.fileInfo")),1)])):v("",!0),o.selectedType==="table"&&o.selectedVersion?(d(),C("div",Lr,[s("span",Pr,[a(x,{id:"tableName",class:"kn-material-input",modelValue:o.tableName,"onUpdate:modelValue":e[4]||(e[4]=z=>o.tableName=z)},null,8,["modelValue"]),s("label",Rr,c(o.$t("managers.datasetManagement.flatTableName")),1)]),s("small",null,c(o.$t("documentExecution.olap.outputWizard.tableInfo")),1)])):v("",!0)])]),_:1},8,["style","visible"])}var Xr=$(Dr,[["render",Fr]]);const jr={name:"",value:""},_r={MEASURE:[],VARIABLE:[],editCube:"",name:"scenario"},Hr={columnStyle:{height:"25px"},dialog:{width:"60%"},iconColumn:{"flex-basis":"15px","flex-grow":"0"},spinner:{background:"rgb(0 0 0 / 25%)",height:"100%",position:"absolute",width:"100%","z-index":"9999"}};var G={newVariable:jr,scenarioTemplate:_r,style:Hr};const Qr=T({name:"olap-scenario-wizard",components:{Dialog:O,InlineMessage:X,Dropdown:B,Card:fo,Column:R,DataTable:F},props:{artifactIdProp:{type:String},sbiExecutionId:{type:String},olapDesignerProp:{type:Object,required:!0}},emits:["close","saveScenario","deleteScenario"],computed:{saveButtonDisabled(){let o=!1;if(this.scenario.VARIABLE){for(let e=0;e<this.scenario.VARIABLE.length;++e)if(Object.keys(this.scenario.VARIABLE[e].name).length===0||Object.keys(this.scenario.VARIABLE[e].value).length===0){o=!0;break}}return this.scenario.MEASURE.length===0&&(o=!0),o}},data(){return{descriptor:G,showInfo:!1,loading:!1,expandParamsCard:!0,scenario:{},selectedCube:{name:""},cubes:[],measures:[]}},watch:{async visible(){await this.getAllCubes(),this.createScenario()}},created(){this.getAllCubes(),this.createScenario()},methods:{createScenario(){this.olapDesignerProp.template.wrappedObject.olap.SCENARIO?(this.scenario=H(this.olapDesignerProp.template.wrappedObject.olap.SCENARIO),this.selectedCube={name:this.olapDesignerProp.template.wrappedObject.olap.SCENARIO.editCube},this.getAllMeasures()):this.scenario=H(this.descriptor.scenarioTemplate)},async getAllCubes(){const o=this.artifactIdProp;await this.$http.get(`/knowagewhatifengine/restful-services/1.0/designer/cubes/${o}?SBI_EXECUTION_ID=${this.sbiExecutionId}`).then(e=>{this.cubes=e.data.map(t=>({name:t}))}).catch(()=>{}).finally(()=>this.loading=!1)},async getAllMeasures(){const o=this.artifactIdProp;await this.$http.get(`/knowagewhatifengine/restful-services/1.0/designer/measures/${o}/${this.selectedCube.name}?SBI_EXECUTION_ID=${this.sbiExecutionId}`).then(e=>{this.measures=e.data.map(t=>({XML_TAG_TEXT_CONTENT:t}))}).catch(()=>{}).finally(()=>this.loading=!1)},onCubeChange(){this.scenario.MEASURE=[],this.getAllMeasures()},addNewParam(){const o={...G.newVariable};this.scenario.VARIABLE.push(o)},removeAllParams(){this.$confirm.require({message:this.$t("documentExecution.olap.scenarioWizard.deleteAllMsg"),header:this.$t("documentExecution.olap.scenarioWizard.deleteAllTitle"),icon:"pi pi-exclamation-triangle",accept:()=>this.scenario.VARIABLE=[]})},removeParam(o){this.scenario.VARIABLE.splice(o.index,1)},resetScenarioData(){this.scenario=H(this.descriptor.scenarioTemplate),this.selectedCube={},this.$emit("deleteScenario")},saveScenario(){this.scenario.editCube=this.selectedCube.name,this.$emit("saveScenario",this.scenario,this.selectedCube)}}}),Yr={class:"p-d-flex p-flex-column"},Wr={class:"p-float-label p-col-12 p-mt-2"},qr={for:"selectedCube",class:"kn-material-input-label"};function Jr(o,e,t,r,p,u){const b=l("Button"),m=l("Toolbar"),n=l("InlineMessage"),g=l("Dropdown"),k=l("Column"),x=l("DataTable"),f=l("Card"),D=l("InputText"),z=l("Dialog");return d(),h(z,{id:"olap-scenario-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.descriptor.style.dialog),visible:o.visible,modal:!0,closable:!1,draggable:!1},{header:i(()=>[a(m,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-2 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.scenarioWizard.title")),1)]),end:i(()=>[a(b,{icon:"fas fa-info-circle",class:"p-button-text p-button-rounded p-button-plain",onClick:e[0]||(e[0]=M=>o.showInfo=!o.showInfo)})]),_:1})]),footer:i(()=>[a(b,{class:"kn-button",onClick:o.resetScenarioData},{default:i(()=>[w(c(o.$t("documentExecution.olap.scenarioWizard.clearData")),1)]),_:1},8,["onClick"]),a(b,{class:"kn-button kn-button--secondary",onClick:e[5]||(e[5]=M=>o.$emit("close"))},{default:i(()=>[w(c(o.$t("common.cancel")),1)]),_:1}),a(b,{class:"kn-button kn-button--primary",onClick:o.saveScenario,disabled:o.saveButtonDisabled},{default:i(()=>[w(c(o.$t("common.save")),1)]),_:1},8,["onClick","disabled"])]),default:i(()=>[s("div",Yr,[o.showInfo?(d(),h(n,{key:0,class:"p-m-2",severity:"info"},{default:i(()=>[w(c(o.$t("documentExecution.olap.scenarioWizard.longInfo")),1)]),_:1})):v("",!0),s("div",Wr,[a(g,{id:"selectedCube",class:"kn-material-input",modelValue:o.selectedCube,"onUpdate:modelValue":e[1]||(e[1]=M=>o.selectedCube=M),options:o.cubes,optionLabel:"name",onChange:o.onCubeChange},null,8,["modelValue","options","onChange"]),s("label",qr,c(o.$t("documentExecution.olap.scenarioWizard.selectedCube")),1)]),a(f,{class:"p-m-2"},{header:i(()=>[a(m,{class:"kn-toolbar kn-toolbar--secondary"},{start:i(()=>[w(c(o.$t("documentExecution.olap.scenarioWizard.editableMeasures")),1)]),_:1})]),content:i(()=>[a(x,{value:o.measures,selection:o.scenario.MEASURE,"onUpdate:selection":e[2]||(e[2]=M=>o.scenario.MEASURE=M),class:"p-datatable-sm kn-table",dataKey:"XML_TAG_TEXT_CONTENT",responsiveLayout:"stack",breakpoint:"960px",scrollable:!0,scrollHeight:"flex"},{empty:i(()=>[w(c(o.$t("common.info.noDataFound")),1)]),default:i(()=>[a(k,{class:"kn-column-checkbox",selectionMode:"multiple",dataKey:"XML_TAG_TEXT_CONTENT"}),a(k,{field:"XML_TAG_TEXT_CONTENT",header:o.$t("common.name")},null,8,["header"])]),_:1},8,["value","selection"])]),_:1}),a(m,{class:"kn-toolbar kn-toolbar--secondary p-mx-2"},{start:i(()=>[o.expandParamsCard?(d(),h(b,{key:1,icon:"fas fa-chevron-down",class:"p-button-text p-button-rounded p-button-plain",style:{color:"white"},onClick:e[4]||(e[4]=M=>o.expandParamsCard=!1)})):(d(),h(b,{key:0,icon:"fas fa-chevron-right",class:"p-button-text p-button-rounded p-button-plain",style:{color:"white"},onClick:e[3]||(e[3]=M=>o.expandParamsCard=!0)})),w(" "+c(o.$t("managers.datasetManagement.params")),1)]),end:i(()=>[a(b,{icon:"fas fa-plus",class:"p-button-text p-button-rounded p-button-plain",onClick:o.addNewParam},null,8,["onClick"]),a(b,{icon:"fas fa-eraser",class:"p-button-text p-button-rounded p-button-plain",disabled:o.disableDeleteAll,onClick:o.removeAllParams},null,8,["disabled","onClick"])]),_:1}),E(a(f,{class:"p-mx-2 p-mb-2"},{content:i(()=>[a(x,{class:"p-datatable-sm kn-table",editMode:"cell",value:o.scenario.VARIABLE,scrollable:!0,scrollHeight:"250px",responsiveLayout:"stack",breakpoint:"960px"},{empty:i(()=>[w(c(o.$t("managers.datasetManagement.tableEmpty")),1)]),default:i(()=>[a(k,{field:"name",header:o.$t("documentExecution.olap.scenarioWizard.parameterName")},{body:i(({data:M})=>[a(D,{class:"kn-material-input",modelValue:M.name,"onUpdate:modelValue":I=>M.name=I,style:y(o.descriptor.style.columnStyle)},null,8,["modelValue","onUpdate:modelValue","style"])]),_:1},8,["header"]),a(k,{field:"value",header:o.$t("documentExecution.olap.scenarioWizard.parameterValue")},{body:i(({data:M})=>[a(D,{class:"kn-material-input",modelValue:M.value,"onUpdate:modelValue":I=>M.value=I,style:y(o.descriptor.style.columnStyle)},null,8,["modelValue","onUpdate:modelValue","style"])]),_:1},8,["header"]),a(k,{onRowClick:M=>!1,style:y(o.descriptor.style.iconColumn)},{body:i(M=>[a(b,{icon:"pi pi-trash",class:"p-button-link",onClick:I=>o.removeParam(M)},null,8,["onClick"])]),_:1},8,["style"])]),_:1},8,["value"])]),_:1},512),[[j,o.expandParamsCard]])])]),_:1},8,["style","visible"])}var Gr=$(Qr,[["render",Jr]]);const Kr={"text-align":"center",width:"5%"},Zr={style:{padding:0}},oa=[{label:"documentExecution.olap.filterDialog.selectFields",value:"selectFields"},{label:"documentExecution.olap.filterDialog.filterUsingDrivers",value:"filterUsingDrivers"}],ea={dialog:{height:"80%",width:"80%"}},ta={message:{"align-items":"center",display:"flex","justify-content":"center","text-align":"center"}};var q={iconColumnStyle:Kr,node:Zr,selectButtonOptions:oa,style:ea,styles:ta};const ra=T({name:"olap-filter-tree",components:{Checkbox:Y,Message:Q,Tree:Co},props:{propFilter:{type:Object},id:{type:String},clearTrigger:{type:Boolean},treeLocked:{type:Boolean}},emits:["close","loading","filtersChanged","lockTree","rootNode"],data(){return{olapFilterDialogDescriptor:q,nodes:[],filter:null,filterType:"",selectedFilters:[],expandedKeys:{},searchWord:"",searchTimeout:null,searchWarningMessageVisible:!1,selectedAncestorsWarningVisible:!1,loading:!1}},watch:{propFilter(){this.loadFilter()},clearTrigger(){this.selectedFilters=[]},treeLocked(o){o||this.unlockTree()}},created(){this.loadFilter()},methods:{loadFilter(){var o,e;this.filter=this.propFilter?this.propFilter.filter:{},this.filterType=(o=this.propFilter)==null?void 0:o.type,this.selectedFilters=[],this.filterType==="slicer"&&((e=this.filter.hierarchies)==null||e.forEach(t=>{var r;(r=t.slicers)==null||r.forEach(p=>{this.selectedFilters.push(p.uniqueName)})})),this.selectedFilters.length>0&&this.$emit("lockTree"),this.$emit("filtersChanged",this.selectedFilters),this.loadNodes(null)},async loadNodes(o){if(this.$emit("loading",!0),this.loading=!0,!this.filter||o&&o.leaf||this.searchWord.length>2){this.$emit("loading",!1),this.loading=!1;return}let e="filtertree";o||(e=this.filterType==="slicer"?"slicerTree":"visibleMembers");const t=[];let r={};o?r={axis:this.filter.axis,hierarchy:this.filter.selectedHierarchyUniqueName,node:o.id}:this.filterType==="slicer"?r={hierarchyUniqueName:this.filter.selectedHierarchyUniqueName}:r={hierarchy:this.filter.selectedHierarchyUniqueName},await this.$http.post(`/knowagewhatifengine/restful-services/1.0/hierarchy/${e}?SBI_EXECUTION_ID=${this.id}`,r,{headers:{Accept:"application/json, text/plain, */*"}}).then(p=>{p.data.forEach(u=>{t.push(this.createNode(u))})}).catch(()=>{}),this.attachContentToTree(o,t),this.filterType==="visible"&&!o&&this.setSelectedFiltersForVisibleType(),this.$emit("rootNode",this.nodes[0]),this.$emit("loading",!1),this.loading=!1},createNode(o){var t;const e={key:ho({length:16,type:"base64"}),id:""+o.id,label:o.name,children:[],data:o,style:this.olapFilterDialogDescriptor.node.style,leaf:this.treeLocked?!0:o.leaf};if(e.children=(t=o.children)==null?void 0:t.map(r=>this.createNode(r)),(o.collapsed||this.searchWord.length>2)&&(this.expandedKeys[e.key]=!0),this.filterType!=="slicer"){const r=this.selectedFilters.findIndex(p=>e.id===p.id&&e.data.uniqueName===p.uniqueName);r!==-1&&(this.selectedFilters[r]={...e.data})}return e},attachContentToTree(o,e){o?(o.children=[],o.children=e):(this.nodes=[],this.nodes=e)},onFiltersSelected(){this.selectedAncestorsWarningVisible=this.filterType==="slicer"&&this.hasSelectedAncestorsAndDescendant(this.nodes[0],!1),this.$emit("filtersChanged",this.selectedFilters)},hasSelectedAncestorsAndDescendant(o,e){const t=this.nodeIsSelected(o);if(t&&e)return!0;if(o.children){for(let r=0;r<o.children.length;r++)if(this.hasSelectedAncestorsAndDescendant(o.children[r],t||e))return!0}return!1},nodeIsSelected(o){return this.selectedFilters.findIndex(t=>t===o.id)!==-1},unlockTree(){this.expandedKeys={};for(let o=0;o<this.nodes.length;o++)this.setNodeExpandable(this.nodes[o])},setNodeExpandable(o){if(o.leaf=o.data.leaf,o.children)for(let e=0;e<o.children.length;e++)this.setNodeExpandable(o.children[e])},searchTree(){clearTimeout(this.searchTimeout),this.searchWarningMessageVisible=this.searchWord.length>0&&this.searchWord.length<3,!this.searchWarningMessageVisible&&(this.searchTimeout=setTimeout(async()=>{if(this.searchWord.length>2){this.loading=!0;const o=[];await this.$http.post(`/knowagewhatifengine/restful-services/1.0/hierarchy/search?SBI_EXECUTION_ID=${this.id}`,{axis:this.filter.axis,hierarchy:this.filter.selectedHierarchyUniqueName,name:this.searchWord,showS:!1},{headers:{Accept:"application/json, text/plain, */*"}}).then(e=>{this.expandedKeys={},e.data.forEach(t=>{o.push(this.createNode(t))})}).catch(()=>{}),this.attachContentToTree(null,o),this.loading=!1}else this.loadNodes(null)},500))},setSelectedFiltersForVisibleType(){this.$emit("lockTree");for(let o=0;o<this.nodes.length;o++)this.setSelectedVisibleMembers(this.nodes[o])},setSelectedVisibleMembers(o){if(this.expandedKeys[o.key]=!0,o.data.visible&&this.selectedFilters.push(o.data),o.children)for(let e=0;e<o.children.length;e++)this.setSelectedVisibleMembers(o.children[e])}}}),aa={class:"p-p-4"};function na(o,e,t,r,p,u){const b=l("Message"),m=l("InputText"),n=l("Checkbox"),g=l("Tree"),k=P("tooltip");return d(),C("div",aa,[o.searchWarningMessageVisible?(d(),h(b,{key:0,class:"p-m-4",severity:"warn",closable:!1,style:y(o.olapFilterDialogDescriptor.styles.message)},{default:i(()=>[w(c(o.$t("documentExecution.olap.filterDialog.searchWarningMessage")),1)]),_:1},8,["style"])):v("",!0),o.selectedAncestorsWarningVisible?(d(),h(b,{key:1,class:"p-m-4",severity:"warn",closable:!1,style:y(o.olapFilterDialogDescriptor.styles.message)},{default:i(()=>[w(c(o.$t("documentExecution.olap.filterDialog.ancestorDescendantWarning")),1)]),_:1},8,["style"])):v("",!0),o.treeLocked?v("",!0):(d(),h(m,{key:2,id:"olap-filter-tree-search",class:"kn-material-input",modelValue:o.searchWord,"onUpdate:modelValue":e[0]||(e[0]=x=>o.searchWord=x),modelModifiers:{trim:!0},type:"text",placeholder:o.$t("common.search"),onInput:o.searchTree},null,8,["modelValue","placeholder","onInput"])),a(g,{id:"kn-parameter-tree",class:N({"olap-filter-tree-locked":o.treeLocked}),value:o.nodes,metaKeySelection:!1,expandedKeys:o.expandedKeys,loading:o.loading,onNodeExpand:e[3]||(e[3]=x=>o.loadNodes(x))},{default:i(x=>[E(a(n,{class:"p-ml-2",modelValue:o.selectedFilters,"onUpdate:modelValue":e[1]||(e[1]=f=>o.selectedFilters=f),value:o.filterType==="slicer"?x.node.id:x.node.data,disabled:o.treeLocked&&o.filterType!=="visible"&&!x.node.data.visible,onChange:e[2]||(e[2]=f=>o.onFiltersSelected())},null,8,["modelValue","value","disabled"]),[[k,{value:o.$t("documentExecution.olap.filterDialog.parentDisabledTooltip"),disabled:!o.treeLocked||x.node.data.visible||o.filterType==="visible"}]]),s("span",null,c(x.node.label),1)]),_:1},8,["class","value","expandedKeys","loading"])])}var ia=$(ra,[["render",na]]);const la=T({name:"olap-filter-table",components:{Column:R,DataTable:F,Dropdown:B},props:{propFilter:{type:Object},propLevels:{type:Object},parameters:{type:Array},profileAttributes:{type:Array}},data(){return{olapFilterDialogDescriptor:q,levels:[],options:[{label:"Drivers",items:[]},{label:"Profile Attributes",items:[]}]}},watch:{propLevels(){this.loadLevels()},parameters(){this.loadParameters()},profileAttributes(){this.loadProfileAttributes()}},created(){this.loadLevels(),this.loadParameters(),this.loadProfileAttributes(),this.removeEmptyOptions()},methods:{loadLevels(){this.levels=this.propLevels},loadParameters(){var o;this.options[0].items=(o=this.parameters)==null?void 0:o.map(e=>({...e,value:e.label,label:e.label,url:e.url,type:"driver"}))},loadProfileAttributes(){var o;this.options[1].items=(o=this.profileAttributes)==null?void 0:o.map(e=>({...e,value:e.attributeName,label:e.attributeName,type:"profileAttribute"}))},removeEmptyOptions(){this.options[1].items.length===0&&this.options.splice(1,1),this.options[0].items.length===0&&this.options.splice(0,1)},remove(o){o.value="",o.DRIVER=null,o.PROFILE_ATTRIBUTE=null},onLevelUpdate(o){var t;const e=(t=this.parameters)==null?void 0:t.findIndex(r=>r.label===o.value);e!==-1&&this.parameters?(o.DRIVER=o.value,o.PROFILE_ATTRIBUTE=null,o.url=this.parameters[e].url):(o.DRIVER=null,o.PROFILE_ATTRIBUTE=o.value,delete o.url)}}});function da(o,e,t,r,p,u){const b=l("Column"),m=l("Dropdown"),n=l("Button"),g=l("DataTable");return d(),h(g,{value:o.levels,class:"p-datatable-sm kn-table p-m-4",responsiveLayout:"stack",breakpoint:"960px"},{empty:i(()=>[w(c(o.$t("common.info.noDataFound")),1)]),default:i(()=>[a(b,{class:"kn-truncated",header:o.$t("documentExecution.olap.filterDialog.level"),style:y(o.olapFilterDialogDescriptor.iconColumnStyle)},{body:i(k=>[s("span",null,c(k.index+1),1)]),_:1},8,["header","style"]),(d(),h(b,{class:"kn-truncated",field:"LEVEL",header:o.$t("common.name"),key:"name"},null,8,["header"])),a(b,{field:"value",header:o.$t("documentExecution.olap.filterDialog.driverProfileAttribute"),key:"value"},{body:i(k=>[a(m,{class:"olap-filter-table-dropdown",modelValue:k.data[k.column.props.field],"onUpdate:modelValue":x=>k.data[k.column.props.field]=x,options:o.options,optionValue:"value",optionLabel:"label",optionGroupValue:"value",optionGroupLabel:"label",optionGroupChildren:"items",onChange:x=>o.onLevelUpdate(k.data)},{option:i(x=>[s("span",null,c(x.option.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1},8,["header"]),a(b,{style:y(o.olapFilterDialogDescriptor.iconColumnStyle)},{body:i(k=>[a(n,{icon:"pi pi-trash",class:"p-button-link",onClick:x=>o.remove(k.data)},null,8,["onClick"])]),_:1},8,["style"])]),_:1},8,["value"])}var sa=$(la,[["render",da],["__scopeId","data-v-9c83f6fa"]]);const ca=T({name:"olap-filter-dialog",components:{Dialog:O,Message:Q,OlapFilterTree:ia,OlapFilterTable:sa,SelectButton:K},props:{visible:{type:Boolean},propFilter:{type:Object},id:{type:String},olapDesignerMode:{type:Boolean},parameters:{type:Array},profileAttributes:{type:Array},olapDesigner:{type:Object}},emits:["close","applyFilters"],data(){return{olapFilterDialogDescriptor:q,filter:null,selectedFilters:[],clearTrigger:!1,treeLocked:!1,mode:"selectFields",levels:[],rootNode:null,loading:!1}},computed:{applyButtonDisabled(){var o;return((o=this.propFilter)==null?void 0:o.type)!=="slicer"&&this.selectedFilters.length===0}},watch:{propFilter(){this.loadFilter()}},created(){this.loadFilter()},methods:{loadFilter(){this.filter=this.propFilter,this.loadLevels()},loadLevels(){var o;this.levels=[],this.propFilter&&((o=this.propFilter.filter.hierarchies)==null||o.forEach(e=>{var t;(t=e.levelNames)==null||t.forEach(r=>{var p;r!=="(All)"&&this.levels.push({HIERARCHY:(p=this.propFilter)==null?void 0:p.filter.uniqueName,LEVEL:r,DRIVER:null,PROFILE_ATTRIBUTE:null,value:null})})})),this.loadLevelValues()},loadLevelValues(){var e,t,r,p;const o=(p=(r=(t=(e=this.olapDesigner)==null?void 0:e.template)==null?void 0:t.wrappedObject)==null?void 0:r.olap)==null?void 0:p.DYNAMIC_SLICER;o==null||o.forEach(u=>{const b=this.levels.findIndex(m=>m.LEVEL===u.LEVEL&&m.HIERARCHY===u.HIERARCHY);b!==-1&&(this.mode="filterUsingDrivers",u.DRIVER?(this.levels[b].value=u.DRIVER,this.levels[b].DRIVER=u.DRIVER):u.PROFILE_ATTRIBUTE&&(this.levels[b].value=u.PROFILE_ATTRIBUTE,this.levels[b].PROFILE_ATTRIBUTE=u.PROFILE_ATTRIBUTE))})},clear(){this.selectedFilters=[],this.treeLocked=!1,this.clearTrigger=!this.clearTrigger},closeDialog(){this.$emit("close"),this.filter=null,this.levels=[],this.treeLocked=!1,this.mode="selectFields"},apply(){var e,t,r,p;let o={};if(((e=this.propFilter)==null?void 0:e.type)==="slicer"){if(this.mode==="selectFields")this.levels=[];else{if(!this.checkIfLevelsAreValid())return this.store.setError({title:this.$t("common.toast.errorTitle"),msg:this.$t("documentExecution.olap.filterDialog.filterLevelsError")});this.selectedFilters=this.rootNode?[this.rootNode.id]:[]}o={hierarchy:(t=this.propFilter)==null?void 0:t.filter.selectedHierarchyUniqueName,members:this.selectedFilters,multi:!1,type:"slicer",filterUniqueName:(r=this.propFilter)==null?void 0:r.filter.uniqueName},this.mode!=="selectFields"&&(o.DYNAMIC_SLICER=this.levels,o.rootNode=this.rootNode)}else o={members:this.selectedFilters,type:"visible",axis:(p=this.propFilter)==null?void 0:p.filter.axis,levels:this.levels};this.$emit("applyFilters",o),this.mode="selectFields"},checkIfLevelsAreValid(){let o=!0,e=!1;for(let t=0;t<this.levels.length;t++)if(this.levels[t].value||(e=!0),e&&this.levels[t].value){o=!1;break}return o},onFiltersChange(o){this.selectedFilters=o},setRootNode(o){this.rootNode=o}}}),pa={key:0},ba={key:1},ka={class:"p-d-flex p-flex-row"};function ua(o,e,t,r,p,u){const b=l("Toolbar"),m=l("ProgressBar"),n=l("Message"),g=l("SelectButton"),k=l("OlapFilterTree"),x=l("OlapFilterTable"),f=l("Button"),D=l("Dialog");return d(),h(D,{id:"olap-filter-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.olapFilterDialogDescriptor.style.dialog),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-2 p-col-12"},{start:i(()=>{var z;return[w(c((z=o.propFilter)==null?void 0:z.filter.name),1)]}),_:1})]),footer:i(()=>[s("div",ka,[E(a(f,{class:"kn-button kn-button--primary",onClick:o.clear},{default:i(()=>[w(c(o.$t("common.clear")),1)]),_:1},8,["onClick"]),[[j,o.selectedFilters.length>0]]),E(a(f,{class:"kn-button kn-button--primary",onClick:e[3]||(e[3]=z=>o.treeLocked=!1)},{default:i(()=>[w(c(o.$t("common.add")),1)]),_:1},512),[[j,o.treeLocked]]),a(f,{class:"kn-button kn-button--primary p-ml-auto",onClick:o.closeDialog},{default:i(()=>[w(c(o.$t("common.cancel")),1)]),_:1},8,["onClick"]),a(f,{class:"kn-button kn-button--primary",disabled:o.applyButtonDisabled,onClick:o.apply},{default:i(()=>[w(c(o.$t("common.apply")),1)]),_:1},8,["disabled","onClick"])])]),default:i(()=>{var z;return[o.loading?(d(),h(m,{key:0,mode:"indeterminate",class:"kn-progress-bar"})):v("",!0),a(n,{class:"p-m-4",severity:"info",closable:!1,style:y(o.olapFilterDialogDescriptor.styles.message)},{default:i(()=>[o.treeLocked?(d(),C("div",pa,[s("span",null,c(o.$t("documentExecution.olap.filterDialog.treeLockedInfoMessage.partOne")),1),s("b",null,c(o.$t("documentExecution.olap.filterDialog.treeLockedInfoMessage.partTwo")),1),s("span",null,c(o.$t("documentExecution.olap.filterDialog.treeLockedInfoMessage.partThree")),1)])):(d(),C("span",ba,c(o.$t("documentExecution.olap.filterDialog.infoMessage")),1))]),_:1},8,["style"]),o.olapDesignerMode&&!o.loading&&((z=o.propFilter)==null?void 0:z.type)==="slicer"?(d(),h(g,{key:1,id:"olap-filter-select-buttons",class:"p-ml-auto p-mr-4",modelValue:o.mode,"onUpdate:modelValue":e[0]||(e[0]=M=>o.mode=M),options:o.olapFilterDialogDescriptor.selectButtonOptions,optionValue:"value"},{option:i(M=>[s("span",null,c(o.$t(M.option.label)),1)]),_:1},8,["modelValue","options"])):v("",!0),E(s("div",null,[o.mode==="selectFields"?(d(),h(k,{key:0,propFilter:o.filter,id:o.id,clearTrigger:o.clearTrigger,treeLocked:o.treeLocked,onLoading:e[1]||(e[1]=M=>o.loading=M),onFiltersChanged:o.onFiltersChange,onLockTree:e[2]||(e[2]=M=>o.treeLocked=!0),onRootNode:o.setRootNode},null,8,["propFilter","id","clearTrigger","treeLocked","onFiltersChanged","onRootNode"])):(d(),h(x,{key:1,propFilter:o.filter,propLevels:o.levels,parameters:o.parameters,profileAttributes:o.profileAttributes},null,8,["propFilter","propLevels","parameters","profileAttributes"]))],512),[[j,!o.loading]])]}),_:1},8,["style","visible"])}var ma=$(ca,[["render",ua]]);const ga={dialog:{width:"60%"}},fa={message:{"align-items":"center",display:"flex","justify-content":"center","text-align":"center"}};var ha={style:ga,styles:fa};const va=T({name:"olap-save-new-version-dialog",components:{Dialog:O,InlineMessage:X,Textarea:Mo},props:{visible:{type:Boolean},id:{type:String}},emits:["close","save","newVersionSaved"],computed:{},data(){return{olapSaveNewVersionDialogDescriptor:ha,version:{name:"",descr:""},loading:!1}},watch:{},setup(){return{store:S()}},created(){},methods:{close(){this.$emit("close"),this.version={name:"",descr:""}},async save(){this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/model/saveAs?SBI_EXECUTION_ID=${this.id}`,{name:this.version.name!==""?this.version.name:"sbiNoDescription",descr:this.version.descr!==""?this.version.descr:"sbiNoDescription"},{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8","X-Disable-Errors":"true"}}).then(o=>{this.store.setInfo({title:this.$t("common.toast.createTitle"),msg:this.$t("common.toast.success")}),this.$emit("newVersionSaved",o.data),this.close()}).catch(o=>this.store.setError({title:this.$t("common.error.generic"),msg:o==null?void 0:o.localizedMessage})),this.loading=!1}}}),wa={key:1,class:"p-fluid p-formgrid p-grid p-m-1"},xa={class:"p-field p-float-label p-col-12 p-mt-2"},ya={class:"kn-material-input-label"},Ca={class:"p-field p-col-12 p-mt-2"},Ma={class:"p-float-label"},Aa={class:"kn-material-input-label"};function Ea(o,e,t,r,p,u){const b=l("Toolbar"),m=l("ProgressBar"),n=l("InlineMessage"),g=l("InputText"),k=l("Textarea"),x=l("Button"),f=l("Dialog");return d(),h(f,{id:"olap-save-new-version-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.olapSaveNewVersionDialogDescriptor.style.dialog),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-0 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.saveVersion.title")),1)]),_:1})]),footer:i(()=>[a(x,{class:"kn-button kn-button--secondary",disabled:o.loading,onClick:o.close},{default:i(()=>[w(c(o.$t("common.close")),1)]),_:1},8,["disabled","onClick"]),a(x,{class:"kn-button kn-button--primary",disabled:o.loading,onClick:o.save},{default:i(()=>[w(c(o.$t("common.save")),1)]),_:1},8,["disabled","onClick"])]),default:i(()=>[o.loading?(d(),h(m,{key:0,mode:"indeterminate",class:"kn-progress-bar"})):v("",!0),o.loading?v("",!0):(d(),C("form",wa,[o.loading?v("",!0):(d(),h(n,{key:0,class:"p-m-1 kn-width-full",severity:"info",closable:"false"},{default:i(()=>[w(c(o.$t("documentExecution.olap.saveVersion.infoMessage")),1)]),_:1})),s("div",xa,[a(g,{class:"kn-material-input",modelValue:o.version.name,"onUpdate:modelValue":e[0]||(e[0]=D=>o.version.name=D),modelModifiers:{trim:!0}},null,8,["modelValue"]),s("label",ya,c(o.$t("documentExecution.olap.saveVersion.versionName")),1)]),s("div",Ca,[s("span",Ma,[a(k,{class:"kn-material-input",modelValue:o.version.descr,"onUpdate:modelValue":e[1]||(e[1]=D=>o.version.descr=D),modelModifiers:{trim:!0},rows:"3",autoResize:!0},null,8,["modelValue"]),s("label",Aa,c(o.$t("documentExecution.olap.saveVersion.versionDescription")),1)])])]))]),_:1},8,["style","visible"])}var Da=$(va,[["render",Ea]]);const za={dialog:{width:"60%"}};var Ta={style:za};const $a=T({name:"olap-algorithm",components:{Dialog:O,Dropdown:B,InlineMessage:X},props:{sbiExecutionId:{type:String}},emits:["close"],data(){return{descriptor:Ta,selectedAlgorithm:{},availableAlgorithms:[]}},setup(){return{store:S()}},created(){this.getAvailableAlgorithms()},methods:{async getAvailableAlgorithms(){await this.$http.get(`/knowagewhatifengine/restful-services/1.0/allocationalgorithm/?SBI_EXECUTION_ID=${this.sbiExecutionId}`,{headers:{Accept:"application/json, text/plain, */*"}}).then(o=>{this.availableAlgorithms=o.data}).catch(()=>{})},async changeAlgorithm(){await this.$http.post(`/knowagewhatifengine/restful-services/1.0/allocationalgorithm/${this.selectedAlgorithm.className}/?SBI_EXECUTION_ID=${this.sbiExecutionId}`,null,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(async()=>{this.store.setInfo({title:this.$t("common.toast.updateTitle"),msg:this.$t("common.toast.updateSuccess")})}).catch(()=>{})}}}),Ia={class:"p-fluid p-formgrid p-grid p-m-1"},Na={class:"p-field p-float-label p-col-12 p-mt-2"},Sa={for:"availableAlg",class:"kn-material-input-label"};function Oa(o,e,t,r,p,u){const b=l("Toolbar"),m=l("InlineMessage"),n=l("Dropdown"),g=l("Button"),k=l("Dialog");return d(),h(k,{id:"olap-wizard-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.descriptor.style.dialog),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-2 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.alDialog.title")),1)]),_:1})]),footer:i(()=>[a(g,{class:"kn-button kn-button--secondary",onClick:e[1]||(e[1]=x=>o.$emit("close"))},{default:i(()=>[w(c(o.$t("common.close")),1)]),_:1}),a(g,{class:"kn-button kn-button--primary",disabled:!o.selectedAlgorithm,onClick:o.changeAlgorithm},{default:i(()=>[w(c(o.$t("common.save")),1)]),_:1},8,["disabled","onClick"])]),default:i(()=>[s("form",Ia,[a(m,{class:"p-m-1 p-col-12",severity:"info",closable:"false"},{default:i(()=>[w(c(o.$t("documentExecution.olap.alDialog.infoMsg")),1)]),_:1}),s("div",Na,[a(n,{id:"availableAlg",class:"kn-material-input",modelValue:o.selectedAlgorithm,"onUpdate:modelValue":e[0]||(e[0]=x=>o.selectedAlgorithm=x),options:o.availableAlgorithms,optionLabel:"name"},null,8,["modelValue","options"]),s("label",Sa,c(o.$t("documentExecution.olap.alDialog.availableAlg")),1)])])]),_:1},8,["style","visible"])}var Va=$($a,[["render",Oa]]);const Ua=[{field:"id",header:"documentExecution.olap.deleteVersion.id",style:""},{field:"name",header:"common.name",style:"width: 40%"},{field:"description",header:"common.description",style:"width: 40%"}],Ba="width: 3em",La={dialog:{height:"60%",width:"60%"}};var Pa={columns:Ua,selectColumnStyle:Ba,style:La};const Ra=T({name:"olap-delete-versions-dialog",components:{Column:R,DataTable:F,Dialog:O},props:{visible:{type:Boolean},id:{type:String},propOlapVersions:{type:Array},olap:{type:Object}},emits:["close"],computed:{},data(){return{olapDeleteVersionsDialogDescriptor:Pa,versions:[],selectedVersions:[],loading:!1}},watch:{propOlapVersions(){this.loadVersions()}},setup(){return{store:S()}},created(){this.loadVersions()},methods:{loadVersions(){this.versions=this.propOlapVersions?[...this.propOlapVersions]:[]},close(){this.$emit("close"),this.selectedVersions=[]},async deleteVersions(){var e;if(this.loading=!0,this.checkIfActiveVersionIsSelected()){this.store.setError({title:this.$t("common.toast.errorTitle"),msg:this.$t("documentExecution.olap.deleteVersion.errorMessage")}),this.loading=!1;return}const o=(e=this.selectedVersions)==null?void 0:e.map(t=>t.id).join(",");!o||o.length===0||(await this.$http.post(`/knowagewhatifengine/restful-services/1.0/version/delete/${o}?SBI_EXECUTION_ID=${this.id}`,{},{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8","X-Disable-Errors":"true"}}).then(()=>{this.store.setInfo({title:this.$t("common.toast.deleteTitle"),msg:this.$t("common.toast.success")}),this.close()}).catch(t=>this.store.setError({title:this.$t("common.error.generic"),msg:t==null?void 0:t.localizedMessage})),this.loading=!1)},checkIfActiveVersionIsSelected(){if(!this.olap)return;let o=!1,e=[];for(let t=0;t<this.olap.filters.length;t++)if(this.olap.filters[t].name==="Version"){e=this.olap.filters[t].hierarchies[0].slicers;break}for(let t=0;t<this.selectedVersions.length;t++)if(e.findIndex(p=>p.name===this.selectedVersions[t].name)!==-1){o=!0;break}return o}}});function Fa(o,e,t,r,p,u){const b=l("Toolbar"),m=l("ProgressBar"),n=l("Column"),g=l("DataTable"),k=l("Button"),x=l("Dialog");return d(),h(x,{id:"olap-delete-versions-dialog",class:"p-fluid kn-dialog--toolbar--primary",style:y(o.olapDeleteVersionsDialogDescriptor.style.dialog),visible:o.visible,modal:!0,closable:!1},{header:i(()=>[a(b,{class:"kn-toolbar kn-toolbar--primary p-p-0 p-m-0 p-col-12"},{start:i(()=>[w(c(o.$t("documentExecution.olap.deleteVersion.title")),1)]),_:1})]),footer:i(()=>[a(k,{class:"kn-button kn-button--secondary",onClick:o.close},{default:i(()=>[w(c(o.$t("common.close")),1)]),_:1},8,["onClick"]),a(k,{class:"kn-button kn-button--primary",onClick:o.deleteVersions},{default:i(()=>[w(c(o.$t("common.delete")),1)]),_:1},8,["onClick"])]),default:i(()=>[o.loading?(d(),h(m,{key:0,mode:"indeterminate",class:"kn-progress-bar"})):v("",!0),o.loading?v("",!0):(d(),h(g,{key:1,class:"p-datatable-sm kn-table p-m-4",selection:o.selectedVersions,"onUpdate:selection":e[0]||(e[0]=f=>o.selectedVersions=f),value:o.versions,dataKey:"id"},{empty:i(()=>[w(c(o.$t("common.info.noDataFound")),1)]),default:i(()=>[a(n,{selectionMode:"multiple",headerStyle:o.olapDeleteVersionsDialogDescriptor.selectColumnStyle},null,8,["headerStyle"]),(d(!0),C(V,null,U(o.olapDeleteVersionsDialogDescriptor.columns,f=>(d(),h(n,{key:f.header,header:o.$t(f.header),field:f.field,style:y(f.style),sortable:!0},null,8,["header","field","style"]))),128))]),_:1},8,["selection","value"]))]),_:1},8,["style","visible"])}var Xa=$(Ra,[["render",Fa]]);const ja=T({name:"olap",components:{OutputWizard:Xr,OlapSidebar:ue,DrillTruDialog:Mr,OlapCustomViewTable:Oe,OlapCustomViewSaveDialog:Ke,KnOverlaySpinnerPanel:vo,OlapSortingDialog:Ce,FilterPanel:kt,FilterTopToolbar:vt,FilterLeftToolbar:Mt,OlapMDXQueryDialog:rt,OlapCrossNavigationDefinitionDialog:Jt,OlapButtonWizardDialog:tr,MultiHierarchyDialog:sr,OlapFilterDialog:ma,ScenarioWizard:Gr,OlapSaveNewVersionDialog:Da,AlgorithmDialog:Va,OlapDeleteVersionsDialog:Xa},props:{id:{type:String},olapId:{type:String},olapName:{type:String},reloadTrigger:{type:Boolean},olapCustomViewVisible:{type:Boolean},hiddenFormDataProp:{type:Object,required:!0}},emits:["closeOlapCustomView","applyCustomView","executeCrossNavigation"],data(){return{olapDescriptor:Eo,documentId:null,documentName:null,olap:{},olapSidebarVisible:!1,customViewVisible:!1,olapCustomViews:[],customViewSaveDialogVisible:!1,sortingDialogVisible:!1,mdxQueryDialogVisible:!1,crossNavigationDefinitionDialogVisible:!1,buttonsWizardDialogVisible:!1,multiHierarchyDialogVisible:!1,drillTruDialogVisible:!1,outputWizardVisible:!1,scenarioWizardVisible:!1,algorithmDialogVisible:!1,multiHierFilter:{},selecetedMultiHierUN:"",sort:null,mode:"view",selectedCell:null,buttons:[],olapDesigner:null,olapDesignerMode:!1,loading:!1,dtData:[],dtColumns:[],formattedColumns:[],dtAssociatedLevels:[],dtTree:[],olapVersions:[],dtMaxRows:0,usedOrdinal:0,selectedFilter:null,filterDialogVisible:!1,parameters:[],profileAttributes:[],saveVersionDialogVisible:!1,deleteVersionDialogVisible:!1,whatifInputNewValue:0,whatifInputOldValue:0,whatifInputOrdinal:0,noTemplate:"",reference:"",olapEngine:"",documentLabel:null,filterLevels:{},artifactId:""}},setup(){return{store:S()}},async created(){this.documentId=this.olapId,this.documentName=this.olapName,this.$route.name==="olap-designer"&&(this.olapDesignerMode=!0),await this.loadPage()},computed:{olapHasScenario(){var o,e,t,r;return!!((r=(t=(e=(o=this.olapDesigner)==null?void 0:o.template)==null?void 0:e.wrappedObject)==null?void 0:t.olap)!=null&&r.SCENARIO)},whatIfMode(){var o;return((o=this.olapDesigner)==null?void 0:o.ENGINE)==="knowagewhatifengine"}},watch:{async id(){await this.loadPage()},async reloadTrigger(){await this.loadPage()},olapCustomViewVisible(){this.loadCustomView()}},methods:{async loadPage(){this.loading=!0,this.$route.name==="olap-designer"&&(this.documentId=this.$route.query.olapId,this.documentName=this.$route.query.olapName,this.documentLabel=this.$route.query.olapLabel),await this.loadOlapModel(),this.loadCustomView(),this.loading=!1},async loadOlapDesigner(){await this.$http.get(`/knowage/restful-services/olap/designer/${this.documentId}`,{headers:{Accept:"application/json, text/plain, */*"}}).then(async o=>{this.olapDesigner=o.data}).catch(()=>{})},async loadCustomView(){this.customViewVisible=this.olapCustomViewVisible,this.customViewVisible&&await this.loadOlapCustomViews()},async loadOlapCustomViews(){this.loading=!0,await this.$http.get(`/knowage/restful-services//1.0/olapsubobjects/getSubObjects?idObj=${this.documentId}`).then(async o=>this.olapCustomViews=o.data.results).catch(()=>{}),this.loading=!1},async loadOlapButtons(){this.loading=!0,await this.$http.get("/knowagewhatifengine/restful-services/1.0/buttons").then(async o=>{this.buttons=o.data,this.buttons.splice(this.buttons.findIndex(e=>e.name==="BUTTON_CC"),1)}).catch(()=>{}),this.loading=!1},async loadOlapModel(){this.noTemplate=this.$route.query.noTemplate,this.reference=this.$route.query.reference,this.olapEngine=this.$route.query.engine,this.artifactId=this.$route.query.artifactId,this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/model/?SBI_EXECUTION_ID=${this.id}`,null,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(async o=>{this.olap=o.data,this.noTemplate==="true"?(this.olapDesigner={ENGINE:this.olapEngine,template:{wrappedObject:{olap:{cube:{reference:this.reference},MDXMondrianQuery:{XML_TAG_TEXT_CONTENT:this.olap.MDXWITHOUTCF},MDXQUERY:{XML_TAG_TEXT_CONTENT:this.olap.MDXWITHOUTCF,parameter:[]},JSONTEMPLATE:{XML_TAG_TEXT_CONTENT:""},calculated_fields:{calculated_field:[]}}}}},this.olapDesigner.template.wrappedObject.olap.JSONTEMPLATE.XML_TAG_TEXT_CONTENT=JSON.stringify(this.olapDesigner.template.wrappedObject)):await this.loadOlapDesigner(),this.olapDesigner&&(await this.loadParameters(),await this.loadProfileAttributes()),await this.loadOlapButtons(),this.setClickedButtons(),await this.loadModelConfig(),await this.loadVersions()}).catch(()=>{}),this.loading=!1},setClickedButtons(){var o,e,t,r,p,u,b;if(this.olapDesigner&&((t=(e=(o=this.olapDesigner.template)==null?void 0:o.wrappedObject)==null?void 0:e.olap)==null?void 0:t.TOOLBAR)){const m=Object.keys((u=(p=(r=this.olapDesigner.template)==null?void 0:r.wrappedObject)==null?void 0:p.olap)==null?void 0:u.TOOLBAR);this.buttons.forEach(n=>{const g=m.indexOf(n.name);g>=0&&(n.visible=this.olapDesigner.template.wrappedObject.olap.TOOLBAR[m[g]].visible,n.clicked=this.olapDesigner.template.wrappedObject.olap.TOOLBAR[m[g]].clicked)}),(b=this.olap.modelConfig.toolbarClickedButtons)==null||b.forEach(n=>{switch(n){case"BUTTON_DRILL_THROUGH":this.olap.modelConfig.enableDrillThrough=!0;break;case"BUTTON_FATHER_MEMBERS":this.olap.modelConfig.showParentMembers=!0;break;case"BUTTON_HIDE_SPANS":this.olap.modelConfig.hideSpans=!0;break;case"BUTTON_SHOW_PROPERTIES":this.olap.modelConfig.showProperties=!0;break;case"BUTTON_HIDE_EMPTY":this.olap.modelConfig.suppressEmpty=!0;break}})}},async loadModelConfig(){this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/modelconfig?SBI_EXECUTION_ID=${this.id}&NOLOADING=undefined`,this.olap.modelConfig,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(o=>this.olap=o.data).catch(()=>{}),this.formatOlapTable(),this.loading=!1},async loadVersions(){this.loading=!0,await this.$http.get(`/knowagewhatifengine/restful-services/1.0/version?SBI_EXECUTION_ID=${this.id}`).then(o=>this.olapVersions=o.data).catch(()=>{}),this.loading=!1},formatOlapTable(){var o;(o=this.olap)!=null&&o.table&&(this.olap.table=this.olap.table.replaceAll("</drillup>",' <div class="drill-up"></div></drillup> '),this.olap.table=this.olap.table.replaceAll("</drilldown>",'<div class="drill-down"></div> </drilldown> '),this.olap.table=this.olap.table.replaceAll("../../../../knowage/themes/commons/img/olap/nodrill.png",""),this.olap.table=this.olap.table.replaceAll('src="../../../../knowage/themes/commons/img/olap/arrow-up.png"',' <div class="drill-up-replace"></div '),this.olap.table=this.olap.table.replaceAll('src="../../../../knowage/themes/commons/img/olap/noSortRows.png"',' <div class="sort-basic"></div '),this.olap.table=this.olap.table.replaceAll('src="../../../../knowage/themes/commons/img/olap/ASC-rows.png"',' <div class="sort-asc"></div '),this.olap.table=this.olap.table.replaceAll('src="../../../../knowage/themes/commons/img/olap/DESC-rows.png"',' <div class="sort-desc"></div '),this.olap.table=this.olap.table.replaceAll('<a href="#" onClick="parent.execExternal','<a href="#" class="external-cross-navigation" crossParams="parent.execExternal'),this.olap.table=this.olap.table.replaceAll('src="../../../../knowage/themes/commons/img/olap/cross-navigation.png"',' <div class="cell-cross-navigation"></div '),this.olap.table=this.olap.table.replaceAll('src="../../../../knowage/themes/commons/img/olap/ico_search.gif"',' <div class="drillthrough"></div '))},async drillDown(o){this.loading=!0;const e=o.target.parentNode.getAttribute("axis"),t=o.target.parentNode.getAttribute("position"),r=o.target.parentNode.getAttribute("memberordinal"),p=JSON.stringify({memberUniqueName:o.target.parentNode.getAttribute("uniquename"),positionUniqueName:o.target.parentNode.getAttribute("positionuniquename")});await this.$http.post(`/knowagewhatifengine/restful-services/1.0/member/drilldown/${e}/${t}/${r}/?SBI_EXECUTION_ID=${this.id}`,p,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(u=>this.olap=u.data).catch(()=>{}),this.formatOlapTable(),this.loading=!1},async drillUp(o,e){this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/member/drillup?SBI_EXECUTION_ID=${this.id}`,this.formatDrillUpPostData(o,e),{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(t=>this.olap=t.data).catch(()=>{}),this.formatOlapTable(),this.loading=!1},formatDrillUpPostData(o,e){let t=[];if(e){const p=o.target.attributes[0].textContent,u=p.substring(p.indexOf("(")+1,p.lastIndexOf(")"));t=u==null?void 0:u.split(",")}return JSON.stringify({axis:e?+t[0]:o.target.parentNode.getAttribute("axis"),memberPosition:e?+t[2]:o.target.parentNode.getAttribute("memberordinal"),memberUniqueName:e?t[3].trim().substring(1,t[3].length-1):o.target.parentNode.getAttribute("uniquename"),position:e?+t[1]:o.target.parentNode.getAttribute("position"),positionUniqueName:e?t[4].trim().substring(1,t[4].length-2):o.target.parentNode.getAttribute("positionuniquename")})},async onDrillTypeChanged(o){this.olap.modelConfig.drillType=o,await this.loadModelConfig()},async onShowParentMemberChanged(o){this.olap.modelConfig.showParentMembers=o,await this.loadModelConfig()},async onHideSpansChanged(o){this.olap.modelConfig.hideSpans=o,await this.loadModelConfig()},async onSuppressEmptyChanged(o){this.olap.modelConfig.suppressEmpty=o,await this.loadModelConfig()},async onDrillThroughChanged(o){this.olap.modelConfig.enableDrillThrough=o,await this.loadModelConfig()},async onShowPropertiesChanged(o){this.olap.modelConfig.showProperties=o,await this.loadModelConfig()},onSortingSelect(o){var e;this.sort=o,(this.sort.sortingMode==="no sorting"&&((e=this.olap)==null?void 0:e.modelConfig.sortingEnabled)||this.sort.sortingMode!=="no sorting"&&!this.olap.modelConfig.sortingEnabled)&&this.enableSorting(),this.sortingDialogVisible=!1},async enableSorting(){this.loading=!0,await this.$http.get(`/knowagewhatifengine/restful-services/1.0/member/sort/disable?SBI_EXECUTION_ID=${this.id}`,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(o=>this.olap=o.data).catch(()=>{}),this.formatOlapTable(),this.loading=!1},async sortOlap(o){this.loading=!0;const e=o.target.attributes[0].textContent,t=e.substring(e.indexOf("(")+1,e.indexOf(")")),r=t==null?void 0:t.split(","),p=r.splice(2).join(","),u={axisToSort:+r[0],axis:+r[1],positionUniqueName:p.substring(p.indexOf("'")+1,p.lastIndexOf("'")),sortMode:this.sort.sortingMode,topBottomCount:this.sort.sortingCount};await this.$http.post(`/knowagewhatifengine/restful-services/1.0/member/sort/?SBI_EXECUTION_ID=${this.id}`,u).then(b=>this.olap=b.data).catch(()=>{}),this.formatOlapTable(),this.loading=!1},async reloadOlap(){this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/cache/?SBI_EXECUTION_ID=${this.id}`,null,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(o=>this.olap=o.data).catch(()=>{}),this.formatOlapTable(),this.loading=!1},async putFilterOnAxis(o,e){o===-1&&this.removeFilterLevels(e);var t={fromAxis:o,hierarchy:e.selectedHierarchyUniqueName,toAxis:e.axis};this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/axis/moveDimensionToOtherAxis?SBI_EXECUTION_ID=${this.id}`,t,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(r=>{this.olap=r.data,this.olapDesigner&&this.olapDesigner.template&&(this.olapDesigner.template.wrappedObject.olap.MDXMondrianQuery.XML_TAG_TEXT_CONTENT=this.olap.MDXWITHOUTCF,this.olapDesigner.template.wrappedObject.olap.MDXQUERY.XML_TAG_TEXT_CONTENT=this.olap.MDXWITHOUTCF)}).catch(()=>this.store.setError({title:this.$t("common.toast.error"),msg:this.$t("documentExecution.olap.filterToolbar.putFilterOnAxisError")})),this.formatOlapTable(),this.loading=!1},async swapAxis(){this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/axis/swap?SBI_EXECUTION_ID=${this.id}`,null,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(o=>this.olap=o.data).catch(()=>this.store.setError({title:this.$t("common.toast.error"),msg:this.$t("documentExecution.olap.filterToolbar.swapAxisError")})),this.formatOlapTable(),this.loading=!1},async moveHierarchies(o){var e={axis:o.axis,hierarchy:o.selectedHierarchyUniqueName,newPosition:o.positionInAxis+1,direction:1};this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/axis/moveHierarchy?SBI_EXECUTION_ID=${this.id}`,e,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(t=>{this.olap=t.data}).catch(()=>this.store.setError({title:this.$t("common.toast.error"),msg:this.$t("documentExecution.olap.filterToolbar.hierarchyMoveError")})),this.formatOlapTable(),this.loading=!1},setMultiHierUN(o){this.selecetedMultiHierUN=o},showMultiHierarchy(o){this.multiHierFilter=o,this.selecetedMultiHierUN=this.multiHierFilter.hierarchies[this.multiHierFilter.selectedHierarchyPosition].uniqueName,this.multiHierarchyDialogVisible=!0},async updateHierarchy(){var o=this.multiHierFilter.hierarchies[this.multiHierFilter.selectedHierarchyPosition].uniqueName,e=this.selecetedMultiHierUN;if(o!=e){var t={axis:this.multiHierFilter.axis,oldHierarchyUniqueName:o,newHierarchyUniqueName:e,hierarchyPosition:this.multiHierFilter.positionInAxis};this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/axis/updateHierarchyOnDimension?SBI_EXECUTION_ID=${this.id}`,t,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(r=>this.olap=r.data).catch(()=>this.store.setError({title:this.$t("common.toast.error"),msg:this.$t("documentExecution.olap.filterToolbar.hierarchyUpdateError")})).finally(()=>{this.formatOlapTable(),this.loading=!1,this.multiHierarchyDialogVisible=!1})}},execExternalCrossNavigation(o){if(this.olapDesignerMode)return;const e=o.target.attributes[2].value,r=e.substring(e.indexOf("(")+2,e.lastIndexOf(")")-1).split(","),p={};r==null||r.forEach(u=>{p[u.substring(0,u.indexOf(":"))]=u.substring(u.indexOf(":")+2,u.length-1)}),this.$emit("executeCrossNavigation",p)},async enableCrossNaivigation(o){this.loading=!0,this.olap.modelConfig.crossNavigation.buttonClicked=o,await this.$http.get(`/knowagewhatifengine/restful-services/1.0/crossnavigation/initialize/?SBI_EXECUTION_ID=${this.id}`,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(e=>this.olap=e.data).catch(()=>{}),this.formatOlapTable(),this.loading=!1},async getCrossNavigationURL(o){var u;if(this.olapDesignerMode)return;this.loading=!0;const e=o.target.attributes[1].textContent,t=e.substring(e.indexOf("(")+1,e.indexOf(")")),r=(u=t==null?void 0:t.substring(1,t.length-1))==null?void 0:u.split(",");let p=null;await this.$http.post(`/knowagewhatifengine/restful-services/1.0/crossnavigation/getCrossNavigationUrl/${r[0]},${r[1]}?SBI_EXECUTION_ID=${this.id}`,null,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(b=>p=b.data).catch(()=>{}),await this.executeCrossnavigationFromCell(p),this.loading=!1},async executeCrossnavigationFromCell(o){const e=o==null?void 0:o.substring(o.indexOf("(")+1,o.indexOf(")"));e==null||e.split(",");const t=e?JSON.parse(e):{};this.$emit("executeCrossNavigation",t)},enterSelectMode(o){this.mode=o,this.olapSidebarVisible=!1,this.crossNavigationDefinitionDialogVisible=!1},selectCell(o){const e=o.target.attributes;if(e[0].localName!=="axisordinal")return;const t={};for(let r=0;r<e.length;r++)t[e[r].nodeName]=e[r].value;this.selectedCell&&(this.selectedCell.event.target.style.border="none"),this.selectedCell={cell:t,event:o},o.target.style.border="2px solid red"},cellSelected(){this.olapSidebarVisible=!0,this.crossNavigationDefinitionDialogVisible=!0,this.mode="view",this.selectedCell.event.target.style.border="none"},async saveOlapDesigner(){this.loading=!0,await this.$http.post(`/knowage/restful-services/1.0/documents/${this.documentName}/saveOlapTemplate`,{olap:{...this.olapDesigner.template.wrappedObject.olap,JSONTEMPLATE:{XML_TAG_TEXT_CONTENT:JSON.stringify(this.olapDesigner.template.wrappedObject)}}},{headers:{Accept:"application/json, text/plain, */*"}}).then(async()=>{this.store.setInfo({title:this.$t("common.toast.updateTitle"),msg:this.$t("common.toast.updateSuccess")}),await this.loadOlapDesigner()}).catch(()=>{}),this.loading=!1},closeDrillTruDialog(){this.drillTruDialogVisible=!1,this.dtData=[],this.dtColumns=[],this.dtTree=[],this.dtAssociatedLevels=[]},async drillThrough(o){if(o&&(this.usedOrdinal=this.getOrdinalFromEvent(o)),this.store.setInfo({title:this.$t("documentExecution.olap.drillTru.loadingTitle"),msg:this.$t("documentExecution.olap.drillTru.loadingMsg")}),this.loading=!0,this.dtAssociatedLevels.length==0&&this.dtMaxRows==0){let e={};e.ordinal=this.usedOrdinal,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/member/drilltrough?SBI_EXECUTION_ID=${this.id}`,e,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(t=>{this.dtData=[],this.dtColumns=[],this.dtData=t.data;for(var r in t.data[0])this.dtColumns.push(r);this.formattedColumns=this.formatColumns(this.dtColumns),this.getCollections(),this.drillTruDialogVisible=!0}).catch(()=>{this.store.setError({title:this.$t("common.toast.error"),msg:this.$t("documentExecution.olap.drillTru.drillTruError")}),this.loading=!1}).finally(()=>this.loading=!1)}else{let e={};e.ordinal=this.usedOrdinal,e.levels=JSON.stringify(this.dtAssociatedLevels),e.max=this.dtMaxRows,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/member/drilltrough/full?SBI_EXECUTION_ID=${this.id}`,e,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(t=>{this.dtData=[],this.dtColumns=[],this.dtData=t.data;for(var r in t.data[0])this.dtColumns.push(r);this.formattedColumns=this.formatColumns(this.dtColumns)}).catch(()=>{this.store.setError({title:this.$t("common.toast.error"),msg:this.$t("documentExecution.olap.drillTru.drillTruError")}),this.loading=!1}).finally(()=>this.loading=!1)}},getOrdinalFromEvent(o){const e=o.target.attributes[1].textContent;return parseInt(e.substring(e.indexOf("(")+1,e.indexOf(")")))},formatColumns(o){let e=[];for(var t=0;t<o.length;t++){var r={};r.label=o[t].toUpperCase(),r.name=o[t],r.size="100px",e.push(r)}return e},async getCollections(){var o={};o.filters=JSON.stringify(this.olap.filters),await this.$http.post(`/knowagewhatifengine/restful-services/1.0/member/drilltrough/levels/?SBI_EXECUTION_ID=${this.id}`,o,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(e=>{this.dtTree=e.data,setTimeout(()=>{this.checkDtLevels()},500)}).catch(()=>{this.store.setError({title:this.$t("common.toast.error"),msg:this.$t("documentExecution.olap.drillTru.drillLevelsError")})})},checkDtLevels(){var o=[];if(this.dtTree!=null&&this.formattedColumns!=null)for(var e=0;e<this.dtTree.length;e++)for(var t=0;t<this.dtTree[e].children.length;t++)for(var r=0;r<this.formattedColumns.length;r++)this.formattedColumns[r].label==this.dtTree[e].children[t].caption.toUpperCase()?(this.dtTree[e].children[t].checked=!0,o.push(this.dtTree[e].children[t])):this.dtTree[e].children[t].checked=!1;else this.store.setError({title:this.$t("common.toast.error"),msg:this.$t("documentExecution.olap.drillTru.checkingLevelsError")});for(e=0;e<o.length;e++)this.checkCheckboxes(o[e],this.dtAssociatedLevels)},checkCheckboxes(o,e){if(o.hasOwnProperty("caption")){var t=this.indexInList(o,e);t!=-1?this.dtAssociatedLevels.splice(t,1):this.dtAssociatedLevels.push(o)}},indexInList(o,e){if(o.hasOwnProperty("caption"))for(var t=0;t<e.length;t++){var r=e[t];if(r.caption==o.caption)return t}return-1},async handleTableClick(o){const e=o.target;if(this.mode!=="view"&&e.tagName==="TH"&&this.selectCell(o),e)switch(e.className){case"drill-up":await this.drillUp(o,!1);break;case"drill-down":await this.drillDown(o);break;case"drill-up-replace":await this.drillUp(o,!0);break;case"sort-basic":case"sort-asc":case"sort-desc":await this.sortOlap(o);break;case"external-cross-navigation":this.execExternalCrossNavigation(o);break;case"cell-cross-navigation":await this.getCrossNavigationURL(o);break;case"drillthrough":await this.drillThrough(o);break}},openFilterDialog(o){this.selectedFilter=o,this.filterDialogVisible=!0},closeFilterDialog(){this.filterDialogVisible=!1,this.selectedFilter=null},async applyFilters(o){this.filterDialogVisible=!1,this.loading=!0,o.type==="slicer"?(delete o.type,this.olapDesignerMode&&this.updateDynamicSlicer(o),await this.sliceOLAP(o),this.olapDesignerMode&&o.DYNAMIC_SLICER?(this.filterLevels[o.hierarchy]=o,this.updateOlapDesignerMDXQueryParameters()):delete this.filterLevels[o.hierarchy]):(await this.placeMembersOnAxis(o),this.updateOlapDesignerMDXQueryParameters()),this.formatOlapTable(),this.olapDesigner.template&&(this.olapDesigner.template.wrappedObject.olap.MDXMondrianQuery.XML_TAG_TEXT_CONTENT=this.olap.MDXWITHOUTCF),this.loading=!1},updateOlapDesignerMDXQueryParameters(){if(!this.olapDesigner||!this.olapDesigner.template)return;let o=this.olap.MDXWITHOUTCF;this.olapDesigner.template.wrappedObject.olap.MDXMondrianQuery.XML_TAG_TEXT_CONTENT=o,this.olapDesigner.template.wrappedObject.olap.MDXQUERY.parameter=[],Object.keys(this.filterLevels).forEach(e=>{var u;const t=this.filterLevels[e],r=(u=t.rootNode)==null?void 0:u.id;let p="";for(let b=0;b<t.DYNAMIC_SLICER.length;b++){const m=t.DYNAMIC_SLICER[b];if(!m.value)break;const n=m.url?"$P{"+m.value+"}":"${"+m.value+"}";b===0&&(p=t.hierarchy),p+=`.[${n}]`,m.url&&this.olapDesigner.template.wrappedObject.olap.MDXQUERY.parameter.push({name:m.url,as:m.url})}o=o.replaceAll(r,p)}),this.olapDesigner.template.wrappedObject.olap.MDXQUERY.XML_TAG_TEXT_CONTENT=o},async sliceOLAP(o){await this.$http.post(`/knowagewhatifengine/restful-services/1.0/hierarchy/slice?SBI_EXECUTION_ID=${this.id}`,o,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(e=>this.olap=e.data).catch(()=>{})},async placeMembersOnAxis(o){var t;const e=(t=o.members)==null?void 0:t.map(r=>({id:r.id,leaf:r.leaf,name:r.name,uniqueName:r.uniqueName,visible:r.visible}));await this.$http.post(`/knowagewhatifengine/restful-services/1.0/axis/${o.axis}/placeMembersOnAxis?SBI_EXECUTION_ID=${this.id}`,e,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(r=>this.olap=r.data).catch(()=>{})},async loadParameters(){var e;const o=(e=this.olapDesigner.DOCUMENT_LABEL)!=null?e:this.documentLabel;await this.$http.get(`/knowage/restful-services/1.0/documents/${o}/parameters`).then(t=>this.parameters=t.data?t.data.results:[]).catch(()=>{})},async loadProfileAttributes(){await this.$http.get("/knowage/restful-services/2.0/attributes").then(o=>this.profileAttributes=o.data).catch(()=>{})},async undo(){this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/model/undo/?SBI_EXECUTION_ID=${this.id}`,null,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8","X-Disable-Errors":"true"}}).then(o=>{this.store.setInfo({title:this.$t("common.toast.updateTitle"),msg:this.$t("common.toast.success")}),this.olap=o.data,this.formatOlapTable()}).catch(o=>this.store.setError({title:this.$t("common.error.generic"),msg:o==null?void 0:o.localizedMessage})),this.loading=!1},saveScenario(o){this.olapDesigner.template.wrappedObject.olap.SCENARIO=o,this.scenarioWizardVisible=!1,this.store.setInfo({title:this.$t("common.toast.updateTitle"),msg:this.$t("documentExecution.olap.scenarioWizard.scenarioUpdated")})},deleteScenario(){delete this.olapDesigner.template.wrappedObject.olap.SCENARIO,this.scenarioWizardVisible=!1},updateDynamicSlicer(o){var t;this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER||(this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER=[]);const e=(t=o.DYNAMIC_SLICER)==null?void 0:t.filter(r=>r.DRIVER||r.PROFILE_ATTRIBUTE).map(r=>({HIERARCHY:r.HIERARCHY,LEVEL:r.LEVEL,DRIVER:r.DRIVER,PROFILE_ATTRIBUTE:r.PROFILE_ATTRIBUTE}));if(!e||e.length===0)for(let r=this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER.length-1;r>=0;r--)this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER[r].HIERARCHY===o.filterUniqueName&&this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER.splice(r,1);else e==null||e.forEach(r=>{const p=this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER.findIndex(u=>u.HIERARCHY===r.HIERARCHY&&u.LEVEL===r.LEVEL);p!==-1?this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER[p]=r:this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER.push(r)});(!this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER||this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER.length===0)&&delete this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER},exportExcel(){if(this.checkIfVersionIsSet())this.loading=!0,this.$http.get(`/knowagewhatifengine/restful-services/1.0/model/exceledit?SBI_EXECUTION_ID=${this.id}`,{headers:{Accept:"application/json, text/plain, */*"},responseType:"blob"}).then(o=>{let e=o.headers["content-disposition"].split('filename="')[1].split('"')[0];wo(o.data,e,o.headers["content-type"])}).catch(()=>{}).finally(()=>this.loading=!1);else return this.store.setError({title:this.$t("common.toast.errorTitle"),msg:this.$t("documentExecution.olap.sliceVersionError")})},removeFilterLevels(o){if(this.olapDesigner&&this.olapDesigner.template&&this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER)for(let e=this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER.length-1;e>=0;e--)this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER[e].HIERARCHY===o.uniqueName&&this.olapDesigner.template.wrappedObject.olap.DYNAMIC_SLICER.splice(e,1)},handleTableDoubleClick(o){if(!this.olapHasScenario||!o.target.attributes.cell)return;let e=o.target.getBoundingClientRect();if(this.checkIfVersionIsSet()){if(this.checkIfModelIsLocked())return this.store.setError({title:this.$t("common.toast.errorTitle"),msg:this.$t("documentExecution.olap.editErrorLocked")});if(this.checkIfMeasureIsEditable(o.target.getAttribute("measurename"))){this.$refs.whatifInput.style.top=`${e.top}px`,this.$refs.whatifInput.style.left=`${e.left}px`,this.$refs.whatifInput.style.display="flex";let r=localStorage.getItem("locale").split("_");this.whatifInputNewValue=this.parseLocaleNumber(o.target.attributes.value.value,r[0]),this.whatifInputOldValue=o.target.attributes.value.value,this.whatifInputOrdinal=o.target.attributes.ordinal.value}else return this.store.setError({title:this.$t("common.toast.errorTitle"),msg:this.$t("documentExecution.olap.notEditable")})}else return this.store.setError({title:this.$t("common.toast.errorTitle"),msg:this.$t("documentExecution.olap.sliceVersionError")})},parseLocaleNumber(o,e){let t=123456.789,r=new Intl.NumberFormat(e),p=r.formatToParts(t),u="";return p.forEach(function(b){switch(b.type){case"group":u=b.value;break}}),o.replace(new RegExp("\\"+u,"g"),"")},checkIfVersionIsSet(){let o=!1;for(let e=0;e<this.olap.filters.length;e++)this.olap.filters[e].uniqueName==="[Version]"&&(o=this.olap.filters[e].hierarchies[0].slicers.length>0);return o},checkIfModelIsLocked(){return this.olap.modelConfig.status=="locked_by_other"||this.olap.modelConfig.status=="unlocked"},checkIfMeasureIsEditable(o){if(this.olap.modelConfig&&this.olap.modelConfig.writeBackConf){if(this.olap.modelConfig.writeBackConf.editableMeasures==null||this.olap.modelConfig.writeBackConf.editableMeasures.length==0)return!0;for(var e=this.olap.modelConfig.writeBackConf.editableMeasures,t=0;t<e.length;t++)if(e[t]===o)return!0;return!1}},closeWhatifInput(){this.$refs.whatifInput.style.display="none"},async onWhatifInput(){if(this.whatifInputNewValue!=this.whatifInputOldValue){let o={expression:this.whatifInputNewValue};this.loading=!0,await this.$http.post(`/knowagewhatifengine/restful-services/1.0/model/setValue/${this.whatifInputOrdinal}?SBI_EXECUTION_ID=${this.id}`,o,{headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"}}).then(e=>{this.olap=e.data,this.closeWhatifInput(),this.formatOlapTable()}).catch(()=>{}).finally(()=>this.loading=!1)}this.closeWhatifInput()},onNewVersionSaved(o){this.olap=o,this.formatOlapTable(),this.loadVersions(),this.saveVersionDialogVisible=!1}}}),_a={class:"p-d-flex p-flex-column kn-flex kn-height-full"},Ha={id:"left-and-table-container",class:"p-d-flex p-flex-row kn-flex"},Qa=["innerHTML"],Ya={class:"p-d-flex p-flex-column"},Wa={class:"p-text-center p-d-flex p-flex-row p-ai-center"},qa={class:"p-ml-2"},Ja={id:"whatif-input",ref:"whatifInput",class:"p-inputgroup"};function Ga(o,e,t,r,p,u){var J;const b=l("ProgressSpinner"),m=l("OlapCustomViewTable"),n=l("DrillTruDialog"),g=l("FilterPanel"),k=l("FilterTopToolbar"),x=l("FilterLeftToolbar"),f=l("Button"),D=l("OlapSidebar"),z=l("InputText"),M=l("OlapCustomViewSaveDialog"),I=l("OlapSortingDialog"),_=l("OlapMDXQueryDialog"),ro=l("OlapCrossNavigationDefinitionDialog"),ao=l("OlapButtonWizardDialog"),no=l("MultiHierarchyDialog"),io=l("KnOverlaySpinnerPanel"),lo=l("OutputWizard"),so=l("ScenarioWizard"),co=l("AlgorithmDialog"),po=l("OlapFilterDialog"),bo=l("OlapSaveNewVersionDialog"),ko=l("OlapDeleteVersionsDialog");return d(),C(V,null,[s("div",_a,[o.loading?(d(),h(b,{key:0,class:"kn-progress-spinner"})):v("",!0),o.customViewVisible?(d(),h(m,{key:1,class:"olap-overlay-dialog",olapCustomViews:o.olapCustomViews,onClose:e[0]||(e[0]=A=>o.$emit("closeOlapCustomView")),onApplyCustomView:e[1]||(e[1]=A=>o.$emit("applyCustomView",A))},null,8,["olapCustomViews"])):v("",!0),o.drillTruDialogVisible?(d(),h(n,{key:2,drillData:o.dtData,tableColumns:o.formattedColumns,dtLevels:o.dtAssociatedLevels,menuTree:o.dtTree,dtMaxRows:o.dtMaxRows,class:"olap-overlay-dialog",onClose:o.closeDrillTruDialog,onCheckCheckboxes:o.checkCheckboxes,onClearLevels:e[2]||(e[2]=A=>o.dtAssociatedLevels.length=0),onRowsChanged:e[3]||(e[3]=A=>o.dtMaxRows=A),onDrill:o.drillThrough},null,8,["drillData","tableColumns","dtLevels","menuTree","dtMaxRows","onClose","onCheckCheckboxes","onDrill"])):v("",!0),a(g,{olapProp:o.olap,olapDesigner:o.olapDesigner,onPutFilterOnAxis:o.putFilterOnAxis,onShowMultiHierarchy:o.showMultiHierarchy,onOpenFilterDialog:o.openFilterDialog},null,8,["olapProp","olapDesigner","onPutFilterOnAxis","onShowMultiHierarchy","onOpenFilterDialog"]),a(k,{olapProp:o.olap,onOpenSidebar:e[4]||(e[4]=A=>o.olapSidebarVisible=!0),onPutFilterOnAxis:o.putFilterOnAxis,onSwapAxis:o.swapAxis,onSwitchPosition:o.moveHierarchies,onShowMultiHierarchy:o.showMultiHierarchy,onOpenFilterDialog:o.openFilterDialog},null,8,["olapProp","onPutFilterOnAxis","onSwapAxis","onSwitchPosition","onShowMultiHierarchy","onOpenFilterDialog"]),s("div",Ha,[a(x,{olapProp:o.olap,onOpenSidebar:e[5]||(e[5]=A=>o.olapSidebarVisible=!0),onPutFilterOnAxis:o.putFilterOnAxis,onSwitchPosition:o.moveHierarchies,onShowMultiHierarchy:o.showMultiHierarchy,onOpenFilterDialog:o.openFilterDialog},null,8,["olapProp","onPutFilterOnAxis","onSwitchPosition","onShowMultiHierarchy","onOpenFilterDialog"]),s("div",{id:"table-container",class:"kn-flex",style:y(o.olapDescriptor.style.tableContainer)},[s("div",{id:"olap-table",class:"kn-flex kn-olap-table",ref:"olap-table",innerHTML:o.olap.table,onClick:e[6]||(e[6]=(...A)=>o.handleTableClick&&o.handleTableClick(...A)),onDblclick:e[7]||(e[7]=(...A)=>o.handleTableDoubleClick&&o.handleTableDoubleClick(...A))},null,40,Qa)],4)]),o.mode==="From Cell"||o.mode==="From Member"?(d(),C("div",{key:3,id:"custom-toast",style:y(o.olapDescriptor.style.customToastContainer)},[s("div",{id:"custom-toast-content",style:y(o.olapDescriptor.style.customToastContent)},[s("div",Ya,[s("div",Wa,[s("i",{class:"pi pi-info-circle p-ml-2",style:y(o.olapDescriptor.style.toastIcon)},null,4),s("h4",qa,c(o.$t("documentExecution.olap.crossNavigationDefinition.finishSelection")),1),a(f,{class:"p-jc-center",style:y(o.olapDescriptor.style.toastButton),label:"OK",onClick:o.cellSelected},null,8,["style","onClick"])])])],4)],4)):v("",!0),o.olapSidebarVisible?(d(),C("div",{key:4,id:"olap-backdrop",onClick:e[8]||(e[8]=A=>o.olapSidebarVisible=!1)})):v("",!0),o.olapSidebarVisible?(d(),h(D,{key:5,class:"olap-sidebar kn-overflow-y",olap:o.olap,olapDesignerMode:o.olapDesignerMode,propButtons:o.buttons,whatIfMode:o.whatIfMode,olapHasScenario:o.olapHasScenario,onOpenCustomViewDialog:e[9]||(e[9]=A=>o.customViewSaveDialogVisible=!0),onDrillTypeChanged:o.onDrillTypeChanged,onShowParentMemberChanged:o.onShowParentMemberChanged,onHideSpansChanged:o.onHideSpansChanged,onSuppressEmptyChanged:o.onSuppressEmptyChanged,onDrillThroughChanged:o.onDrillThroughChanged,onShowPropertiesChanged:o.onShowPropertiesChanged,onOpenSortingDialog:e[10]||(e[10]=A=>o.sortingDialogVisible=!0),onOpenMdxQueryDialog:e[11]||(e[11]=A=>o.mdxQueryDialogVisible=!0),onReloadSchema:o.reloadOlap,onEnableCrossNavigation:o.enableCrossNaivigation,onOpenCrossNavigationDefinitionDialog:e[12]||(e[12]=A=>o.crossNavigationDefinitionDialogVisible=!0),onOpenButtonWizardDialog:e[13]||(e[13]=A=>o.buttonsWizardDialogVisible=!0),onSaveOlapDesigner:o.saveOlapDesigner,onShowOutputWizard:e[14]||(e[14]=A=>o.outputWizardVisible=!0),onShowScenarioWizard:e[15]||(e[15]=A=>o.scenarioWizardVisible=!0),onShowSaveAsNewVersion:e[16]||(e[16]=A=>o.saveVersionDialogVisible=!0),onShowAlgorithmDialog:e[17]||(e[17]=A=>o.algorithmDialogVisible=!0),onUndo:o.undo,onShowDeleteVersions:e[18]||(e[18]=A=>o.deleteVersionDialogVisible=!0),onExportExcel:o.exportExcel,onLoading:e[19]||(e[19]=A=>o.loading=A)},null,8,["olap","olapDesignerMode","propButtons","whatIfMode","olapHasScenario","onDrillTypeChanged","onShowParentMemberChanged","onHideSpansChanged","onSuppressEmptyChanged","onDrillThroughChanged","onShowPropertiesChanged","onReloadSchema","onEnableCrossNavigation","onSaveOlapDesigner","onUndo","onExportExcel"])):v("",!0)]),s("div",Ja,[a(z,{modelValue:o.whatifInputNewValue,"onUpdate:modelValue":e[20]||(e[20]=A=>o.whatifInputNewValue=A),onKeyup:xo(o.onWhatifInput,["enter"])},null,8,["modelValue","onKeyup"]),a(z,{modelValue:o.whatifInputOldValue,"onUpdate:modelValue":e[21]||(e[21]=A=>o.whatifInputOldValue=A),disabled:!0},null,8,["modelValue"]),a(f,{icon:"pi pi-times",class:"kn-button--secondary",onClick:o.closeWhatifInput},null,8,["onClick"])],512),a(M,{visible:o.customViewSaveDialogVisible,sbiExecutionId:o.id,onClose:e[22]||(e[22]=A=>o.customViewSaveDialogVisible=!1)},null,8,["visible","sbiExecutionId"]),a(I,{visible:o.sortingDialogVisible,olap:o.olap,onSave:o.onSortingSelect},null,8,["visible","olap","onSave"]),a(_,{visible:o.mdxQueryDialogVisible,mdxQuery:(J=o.olap)==null?void 0:J.MDXWITHOUTCF,onClose:e[23]||(e[23]=A=>o.mdxQueryDialogVisible=!1)},null,8,["visible","mdxQuery"]),a(ro,{visible:o.crossNavigationDefinitionDialogVisible,propOlapDesigner:o.olapDesigner,selectedCell:o.selectedCell,onClose:e[24]||(e[24]=A=>o.crossNavigationDefinitionDialogVisible=!1),onSelectFromTable:e[25]||(e[25]=A=>o.enterSelectMode(A))},null,8,["visible","propOlapDesigner","selectedCell"]),a(ao,{visible:o.buttonsWizardDialogVisible,propButtons:o.buttons,propOlapDesigner:o.olapDesigner,onClose:e[26]||(e[26]=A=>o.buttonsWizardDialogVisible=!1)},null,8,["visible","propButtons","propOlapDesigner"]),a(no,{selectedFilter:o.multiHierFilter,multiHierUN:o.selecetedMultiHierUN,visible:o.multiHierarchyDialogVisible,onSetMultiHierUN:o.setMultiHierUN,onUpdateHierarchy:o.updateHierarchy,onClose:e[27]||(e[27]=A=>o.multiHierarchyDialogVisible=!1)},null,8,["selectedFilter","multiHierUN","visible","onSetMultiHierUN","onUpdateHierarchy"]),a(io,{visibility:o.loading},null,8,["visibility"]),o.outputWizardVisible?(d(),h(lo,{key:0,visible:o.outputWizardVisible,olapVersionsProp:o.olapVersions,sbiExecutionId:o.id,onClose:e[28]||(e[28]=A=>o.outputWizardVisible=!1)},null,8,["visible","olapVersionsProp","sbiExecutionId"])):v("",!0),o.scenarioWizardVisible?(d(),h(so,{key:1,visible:o.scenarioWizardVisible,artifactIdProp:o.artifactId,sbiExecutionId:o.id,olapDesignerProp:o.olapDesigner,onSaveScenario:o.saveScenario,onDeleteScenario:o.deleteScenario,onClose:e[29]||(e[29]=A=>o.scenarioWizardVisible=!1)},null,8,["visible","artifactIdProp","sbiExecutionId","olapDesignerProp","onSaveScenario","onDeleteScenario"])):v("",!0),o.algorithmDialogVisible?(d(),h(co,{key:2,visible:o.algorithmDialogVisible,sbiExecutionId:o.id,onClose:e[30]||(e[30]=A=>o.algorithmDialogVisible=!1)},null,8,["visible","sbiExecutionId"])):v("",!0),a(po,{visible:o.filterDialogVisible,propFilter:o.selectedFilter,id:o.id,olapDesignerMode:o.olapDesignerMode,parameters:o.parameters,profileAttributes:o.profileAttributes,olapDesigner:o.olapDesigner,onClose:o.closeFilterDialog,onApplyFilters:o.applyFilters},null,8,["visible","propFilter","id","olapDesignerMode","parameters","profileAttributes","olapDesigner","onClose","onApplyFilters"]),a(bo,{visible:o.saveVersionDialogVisible,id:o.id,onClose:e[31]||(e[31]=A=>o.saveVersionDialogVisible=!1),onNewVersionSaved:o.onNewVersionSaved},null,8,["visible","id","onNewVersionSaved"]),a(ko,{visible:o.deleteVersionDialogVisible,id:o.id,propOlapVersions:o.olapVersions,olap:o.olap,onClose:e[32]||(e[32]=A=>o.deleteVersionDialogVisible=!1)},null,8,["visible","id","propOlapVersions","olap"])],64)}var dn=$(ja,[["render",Ga]]);export{dn as default};
//# sourceMappingURL=Olap-345cdd86.js.map
