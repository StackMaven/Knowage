{"version":3,"file":"KnCalculatedField-ab0b2f81.js","sources":["../../../../components/functionalities/KnCalculatedField/KnCalculatedField.vue"],"sourcesContent":["<template>\r\n    <Dialog class=\"kn-dialog--toolbar--primary calculatedFieldDialogClass\" v-bind:visible=\"visibility\" :header=\"$t('components.knCalculatedField.title')\" :closable=\"false\" modal :breakpoints=\"{ '960px': '75vw', '640px': '100vw' }\">\r\n        <Message severity=\"info\" :closable=\"false\">{{ $t('components.knCalculatedField.description') }}</Message>\r\n\r\n        <div class=\"p-fluid p-grid\">\r\n            <div class=\"p-col\">\r\n                <span class=\"p-float-label p-field kn-flex\">\r\n                    <InputText\r\n                        ref=\"colName\"\r\n                        type=\"text\"\r\n                        :disabled=\"readOnly\"\r\n                        class=\"kn-material-input\"\r\n                        id=\"colName\"\r\n                        v-model=\"v$.cf.colName.$model\"\r\n                        :class=\"{\r\n                            'p-invalid': v$.cf.colName.$invalid\r\n                        }\"\r\n                        @blur=\"v$.cf.colName.$touch()\"\r\n                    />\r\n                    <label class=\"kn-material-input-label\"> {{ $t('components.knCalculatedField.columnName') }} </label>\r\n                </span>\r\n            </div>\r\n            <slot name=\"additionalInputs\"> </slot>\r\n        </div>\r\n\r\n        <Card class=\"card-0-padding\">\r\n            <template #content>\r\n                <div class=\"p-fluid p-grid\">\r\n                    <div class=\"p-col-4\">\r\n                        <h5 class=\"p-float-label p-text-uppercase p-m-2\">{{ $t('components.knCalculatedField.fields') }}</h5>\r\n\r\n                        <ScrollPanel class=\"kn-list knListBox kn-flex kn-list-no-border-right\" style=\"height: 200px !important; border: 1px\">\r\n                            <div v-for=\"(field, index) in fields\" v-bind:key=\"index\" class=\"kn-list-item p-d-flex p-ai-center fieldType kn-truncated p-ml-2\" draggable=\"true\" @dragstart=\"dragElement($event, field, 'field')\" v-tooltip.bottom=\"source === 'QBE' ? field.fieldLabel : field.fieldAlias\">\r\n                                <div><i class=\"fa fa-solid fa-bars\"></i></div>\r\n                                <div v-if=\"source === 'QBE'\" class=\"p-ml-2\">{{ field.fieldLabel }}</div>\r\n                                <div v-else class=\"p-ml-2\">{{ field.fieldAlias }}</div>\r\n                            </div>\r\n                        </ScrollPanel>\r\n                    </div>\r\n                    <div class=\"p-col-4\">\r\n                        <span class=\"p-float-label p-m-2\">\r\n                            <Dropdown id=\"category\" v-model=\"selectedCategory\" :options=\"availableCategories\" class=\"kn-material-input\" optionLabel=\"name\" optionValue=\"code\" @change=\"filterFunctions\" />\r\n                            <label for=\"category\" class=\"kn-material-input-label\"> {{ $t(descriptor.category.label) }} </label>\r\n                        </span>\r\n\r\n                        <h5 class=\"p-float-label p-text-uppercase p-m-2\">{{ $t('components.knCalculatedField.functions') }}</h5>\r\n                        <ScrollPanel class=\"kn-list knListBox kn-flex kn-list-no-border-right\" style=\"height: 150px !important; border: 1px\">\r\n                            <div\r\n                                v-for=\"(af, index) in availableFunctions\"\r\n                                v-bind:key=\"index\"\r\n                                class=\"kn-list-item p-d-flex p-ai-center formulaType kn-truncated p-ml-2\"\r\n                                :class=\"{ selected: af.formula === selectedFunction.formula }\"\r\n                                draggable=\"true\"\r\n                                @dragstart=\"dragElement($event, af, 'function')\"\r\n                                v-tooltip.bottom=\"af.formula\"\r\n                                @click=\"handleClick(af)\"\r\n                            >\r\n                                <div><i class=\"fa fa-solid fa-bars\"></i></div>\r\n                                <div class=\"p-ml-2\">{{ af.formula }}</div>\r\n                            </div>\r\n                        </ScrollPanel>\r\n                    </div>\r\n                    <div class=\"p-col-4\">\r\n                        <span v-if=\"showHelpPanel\" class=\"kn-flex p-d-flex p-flex-column p-jc-between helpCol p-m-2\">\r\n                            <h5 class=\"p-float-label p-text-uppercase p-m-2\">\r\n                                {{ selectedFunction.label }}\r\n                            </h5>\r\n\r\n                            <ScrollPanel class=\"helpScrollPanel custombar1\"> <div v-html=\"$t(selectedFunction.help)\"></div></ScrollPanel>\r\n\r\n                            <div v-if=\"selectedFunction.officialDocumentationLink\" class=\"helpClass\">\r\n                                <a :href=\"selectedFunction.officialDocumentationLink\" target=\"_blank\"> {{ $t('components.knCalculatedField.officialDocumentation', { function: selectedFunction.label }) }}</a>\r\n                            </div>\r\n                        </span>\r\n                        <span class=\"p-m-2\" v-else>\r\n                            <KnHint class=\"kn-hint-sm\" :title=\"'components.knCalculatedField.title'\" :hint=\"$t(descriptor.hint)\" data-test=\"hint\"></KnHint>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </template>\r\n        </Card>\r\n\r\n        <VCodeMirror :class=\"['p-mt-2 codeMirrorClass', this.readOnly ? 'readOnly' : '', v$.cf.formula.$invalid ? 'p-invalid' : '']\" ref=\"codeMirror\" v-model:value=\"cf.formula\" :options=\"scriptOptions\" @drop=\"drop\" v-model=\"v$.cf.formula.$model\" />\r\n\r\n        <template #footer>\r\n            <Button :class=\"readOnly ? 'kn-button kn-button--primary' : 'kn-button kn-button--secondary'\" :label=\"$t('common.cancel')\" @click=\"cancel\" />\r\n            <Button v-if=\"!readOnly\" class=\"kn-button kn-button--primary\" v-t=\"'common.apply'\" @click=\"apply\" :disabled=\"saveButtonDisabled\" />\r\n        </template>\r\n    </Dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { PropType } from 'vue'\r\nimport { AxiosResponse } from 'axios'\r\nimport { createValidations } from '@/helpers/commons/validationHelper'\r\nimport { defineComponent } from 'vue'\r\nimport { IKnCalculatedField, IKnCalculatedFieldFunction } from '@/components/functionalities/KnCalculatedField/KnCalculatedField'\r\nimport VCodeMirror, { CodeMirror } from 'codemirror-editor-vue3'\r\nimport Dropdown from 'primevue/dropdown'\r\nimport Dialog from 'primevue/dialog'\r\nimport KnHint from '@/components/UI/KnHint.vue'\r\nimport Message from 'primevue/message'\r\nimport ScrollPanel from 'primevue/scrollpanel'\r\nimport useValidate from '@vuelidate/core'\r\nexport default defineComponent({\r\n    name: 'calculated-field',\r\n    components: { Dialog, Dropdown, KnHint, Message, ScrollPanel, VCodeMirror },\r\n    props: {\r\n        fields: Array,\r\n        visibility: Boolean,\r\n        readOnly: Boolean,\r\n        descriptor: Object,\r\n        template: {} as any,\r\n        valid: Boolean,\r\n        source: String,\r\n        propCalcFieldFunctions: { type: Array as PropType<IKnCalculatedFieldFunction[]>, required: true }\r\n    },\r\n    data() {\r\n        return {\r\n            cf: { formula: '' } as IKnCalculatedField,\r\n            allCategories: { name: 'ALL', code: 'ALL' },\r\n            selectedFunction: {},\r\n            selectedCategory: '',\r\n            availableCategories: [] as any,\r\n            codeMirror: null as any,\r\n            availableFunctions: [] as any,\r\n            scriptOptions: {\r\n                mode: 'text/x-mathematica',\r\n                indentWithTabs: true,\r\n                smartIndent: true,\r\n                lineWrapping: true,\r\n                matchBrackets: true,\r\n                autofocus: true,\r\n                theme: 'eclipse',\r\n                lineNumbers: true,\r\n                readOnly: this.readOnly\r\n            },\r\n            v$: useValidate() as any,\r\n            formulaValidationInterval: {} as any,\r\n            isValidFormula: false,\r\n            calcFieldFunctions: [] as IKnCalculatedFieldFunction[],\r\n            showHelpPanel: false\r\n        }\r\n    },\r\n    emits: ['save', 'cancel', 'update:readOnly'],\r\n    created() {\r\n        this.calcFieldFunctions = [...this.propCalcFieldFunctions]\r\n        this.availableFunctions = [...this.calcFieldFunctions].sort((a, b) => {\r\n            return a.name.localeCompare(b.name)\r\n        })\r\n        this.availableFunctions.forEach((x) => {\r\n            x.category = x.category.toUpperCase()\r\n        })\r\n        this.cf = { formula: '' } as IKnCalculatedField\r\n        if (!this.readOnly && this.template && !this.template.parameters && this.source === 'QBE') {\r\n\r\n            this.cf = { colName: this.template.alias, formula: this.template.expression } as IKnCalculatedField\r\n        }\r\n        if (!this.readOnly && this.template && !this.template.parameters && this.source === 'dashboard') {\r\n            this.cf = { colName: this.template.alias, formula: this.template.formula } as IKnCalculatedField\r\n        }\r\n        this.handleCategories()\r\n    },\r\n    updated() {\r\n        this.setupCodeMirror()\r\n        if (!this.cf.formula) this.cf.formula = ''\r\n        if (this.readOnly && this.template && this.template.parameters) {\r\n            this.cf = {} as IKnCalculatedField\r\n            for (var i = 0; i < this.template.parameters.length; i++) {\r\n                if (this.template.parameters[i]['name'] == 'formula') this.cf.formula = this.template.parameters[i]['value']\r\n                else if (this.template.parameters[i]['name'] == 'colName') this.cf.colName = this.template.parameters[i]['value']\r\n            }\r\n        }\r\n        if (!this.readOnly && this.template && !this.template.parameters && this.source === 'QBE') {\r\n            this.cf = { colName: this.template.alias, formula: this.template.expression } as IKnCalculatedField\r\n        }\r\n        if (!this.readOnly && this.template && !this.template.parameters && this.source === 'dashboard') {\r\n            this.cf = { colName: this.template.alias, formula: this.template.formula } as IKnCalculatedField\r\n        }\r\n    },\r\n    validations() {\r\n        if (this.descriptor) {\r\n            return { cf: createValidations('cf', this.descriptor.validations) }\r\n        }\r\n        return {}\r\n    },\r\n    methods: {\r\n        handleClick(af) {\r\n            if (JSON.stringify(this.selectedFunction) === JSON.stringify(af)) {\r\n                this.selectedFunction = {}\r\n            } else {\r\n                this.selectedFunction = af\r\n            }\r\n        },\r\n        setupCodeMirror() {\r\n            CodeMirror.Pos(0, 0)\r\n            const interval = setInterval(() => {\r\n                if (!this.$refs.codeMirror) return\r\n                this.codeMirror = (this.$refs.codeMirror as any).cminstance as any\r\n                setTimeout(() => {\r\n                    this.codeMirror.refresh()\r\n                }, 0)\r\n                clearInterval(interval)\r\n            }, 200)\r\n        },\r\n        apply(): void {\r\n            this.$emit('save', this.cf)\r\n            this.clearForm()\r\n        },\r\n        cancel(): void {\r\n            this.$emit('update:readOnly', false)\r\n            this.$emit('cancel', this.cf)\r\n            this.clearForm()\r\n        },\r\n        clearForm(): void {\r\n            this.cf = { formula: '' } as IKnCalculatedField\r\n            this.selectedFunction = {}\r\n            this.selectedCategory = ''\r\n        },\r\n        filterFunctions() {\r\n            let tmp = [...this.calcFieldFunctions].sort((a, b) => {\r\n                return a.name.localeCompare(b.name)\r\n            })\r\n            tmp.forEach((x) => {\r\n                x.category = x.category.toUpperCase()\r\n            })\r\n            this.availableFunctions = tmp\r\n            if (this.selectedCategory && this.selectedCategory !== this.allCategories.name) {\r\n                let cat = this.selectedCategory as any\r\n                this.availableFunctions = tmp.filter((x) => x.category.toUpperCase() === cat.toUpperCase())\r\n            }\r\n        },\r\n        handleCategories() {\r\n            let tmp = [] as any\r\n            this.calcFieldFunctions\r\n                .sort((a, b) => {\r\n                    return a.name.localeCompare(b.name)\r\n                })\r\n                .map((x) => ({ name: x.category, code: x.category.toUpperCase() }))\r\n                .forEach((element) => {\r\n                    if (tmp.filter((y) => y.code === element.code).length == 0) tmp.push({ name: element.name, code: element.code })\r\n                })\r\n            if (tmp.filter((x) => x.name === this.allCategories.name).length == 0) tmp = [this.allCategories, ...tmp]\r\n            this.availableCategories = tmp\r\n        },\r\n        allowDrop(ev) {\r\n            ev.preventDefault()\r\n        },\r\n        clearCodemirror(cursor, data) {\r\n            if (this.codeMirror.somethingSelected()) {\r\n                let selections = this.codeMirror.getSelections()\r\n                for (var sel of selections) {\r\n                    this.codeMirror.replaceRange('', { line: cursor.line, ch: cursor.ch - JSON.stringify(data).length }, { line: cursor.line, ch: cursor.ch - JSON.stringify(data).length + sel.length })\r\n                }\r\n            }\r\n        },\r\n        dragElement(ev, item, elementType: String) {\r\n            if (this.readOnly) return\r\n            if (elementType === 'function') {\r\n                ev.dataTransfer.setData('myItem', JSON.stringify({ item: item.formula, elementType: elementType }))\r\n            } else if (elementType === 'field') {\r\n                ev.dataTransfer.setData('myItem', JSON.stringify({ item: item, elementType: elementType }))\r\n            }\r\n            ev.dataTransfer.effectAllowed = 'copy'\r\n        },\r\n        drop(cm, ev) {\r\n            if (this.readOnly) return\r\n            ev.stopPropagation()\r\n            ev.preventDefault()\r\n            var data = JSON.parse(ev.dataTransfer.getData('myItem'))\r\n            var cursor = cm.coordsChar({\r\n                left: ev.x,\r\n                top: ev.y\r\n            })\r\n            this.clearCodemirror(cursor, data)\r\n            this.codeMirror.clearHistory()\r\n            let start = -1\r\n            let end = -1\r\n            if (cm.getLine(cursor.line).length == cursor.ch) {\r\n                start = cursor.ch\r\n                end = cursor.ch\r\n            } else {\r\n                start = this.codeMirror.findWordAt(cursor).anchor.ch\r\n                end = this.codeMirror.findWordAt(cursor).head.ch\r\n            }\r\n            let from = { line: cursor.line, ch: start }\r\n            let to = { line: cursor.line, ch: end }\r\n            let range = this.codeMirror.getDoc().getRange(from, to)\r\n            let fieldAlias = this.source !== 'QBE' ? '$F{' + data.item.fieldAlias + '}' : data.item.fieldAlias\r\n            let spContent = data.elementType === 'function' ? data.item : fieldAlias\r\n            if (range.match(/\\(|\\)|,|\\./g)) {\r\n                this.codeMirror.getDoc().replaceSelection(spContent, cursor)\r\n            } else {\r\n                this.codeMirror.getDoc().replaceRange(spContent, from, to)\r\n            }\r\n            let lines = document.querySelector('.CodeMirror-line')\r\n            if (lines) {\r\n                let textEl = lines.querySelector('div span') as any\r\n                if (textEl) this.cf.formula = textEl.innerText\r\n            }\r\n            this.codeMirror.refresh()\r\n        },\r\n        applyValidationResultsToFormula() {\r\n            let from = { line: this.codeMirror.getDoc().firstLine(), ch: 0 }\r\n            let to = { line: this.codeMirror.getDoc().lastLine(), ch: this.codeMirror.getDoc().getLine(this.codeMirror.getDoc().lastLine()).length }\r\n            if (!this.isValidFormula) {\r\n                this.codeMirror.getDoc().markText(from, to, { className: 'syntax-error' })\r\n            } else {\r\n                this.codeMirror.getDoc().markText(from, to, { className: 'no-syntax-error' })\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        selectedFunction(newValue, oldValue) {\r\n            if (newValue && oldValue !== newValue && newValue.label) {\r\n                this.showHelpPanel = true\r\n            } else {\r\n                this.showHelpPanel = false\r\n            }\r\n        },\r\n        readOnly(value) {\r\n            this.scriptOptions.readOnly = value\r\n        },\r\n        visibility(newV, oldV) {\r\n            if (newV && newV !== oldV) {\r\n                if (!this.selectedCategory) {\r\n                    if (this.descriptor?.defaultSelectedCategory) this.selectedCategory = this.descriptor?.defaultSelectedCategory\r\n                    else this.selectedCategory = this.allCategories.name\r\n                }\r\n            }\r\n        },\r\n        cf: {\r\n            handler() {\r\n                if (this.cf.formula) {\r\n                    if (this.descriptor?.validationServiceUrl) {\r\n                        this.formulaValidationInterval = setInterval(() => {\r\n                            this.$http.get(this.descriptor?.validationServiceUrl).then((response: AxiosResponse<any>) => {\r\n                                this.isValidFormula = response.data[0]\r\n                                this.applyValidationResultsToFormula()\r\n                            })\r\n                            clearInterval(this.formulaValidationInterval)\r\n                            this.formulaValidationInterval = null\r\n                        }, 2500)\r\n                    } else {\r\n                        this.isValidFormula = true\r\n                    }\r\n                }\r\n            },\r\n            deep: true\r\n        }\r\n    },\r\n    computed: {\r\n        saveButtonDisabled(): any {\r\n            if (typeof this.valid === 'undefined') return this.v$.$invalid || !this.isValidFormula\r\n            else return this.v$.$invalid || !this.isValidFormula || !this.valid\r\n        }\r\n    }\r\n})\r\n</script>\r\n<style lang=\"scss\">\r\n.calculatedFieldDialogClass {\r\n    min-width: 600px;\r\n    width: 60%;\r\n    max-width: 1200px;\r\n}\r\n.codeMirrorClass {\r\n    height: 80px !important;\r\n    max-height: 80px !important;\r\n    border: 1px solid var(--kn-color-borders);\r\n    .CodeMirror-scroll {\r\n        overflow-x: hidden !important;\r\n        overflow-y: auto !important;\r\n    }\r\n}\r\n.readOnly {\r\n    .CodeMirror-scroll {\r\n        background-color: var(--kn-color-disabled);\r\n        cursor: default;\r\n        .CodeMirror-lines {\r\n            cursor: default !important;\r\n        }\r\n    }\r\n}\r\n.field-header {\r\n    font-weight: bold;\r\n}\r\n.kn-remove-card-padding .data-condition-list {\r\n    border: 1px solid var(--kn-color-borders);\r\n    border-top: none;\r\n}\r\n.p-listbox-item {\r\n    height: 24px;\r\n    .kn-list-item {\r\n        height: 24px;\r\n    }\r\n}\r\n.card-0-padding .p-card-body,\r\n.card-0-padding .p-card-content {\r\n    padding: 0.25rem;\r\n}\r\n.helpCol {\r\n    height: 100%;\r\n    width: 100%;\r\n    .helpScrollPanel {\r\n        font-size: 0.75em !important;\r\n        height: 140px !important;\r\n    }\r\n}\r\n::v-deep(.p-scrollpanel) {\r\n    p {\r\n        padding: 0.5rem;\r\n        line-height: 1.5;\r\n        margin: 0;\r\n    }\r\n    &.custombar1 {\r\n        .p-scrollpanel-wrapper {\r\n            border-right: 9px solid var(--surface-ground);\r\n        }\r\n        .p-scrollpanel-bar {\r\n            background-color: var(--primary-color);\r\n            opacity: 1;\r\n            transition: background-color 0.2s;\r\n            &:hover {\r\n                background-color: #007ad9;\r\n            }\r\n        }\r\n    }\r\n}\r\n.syntax-error {\r\n    text-decoration: underline;\r\n    text-decoration-style: wavy;\r\n    text-decoration-color: red;\r\n}\r\n.no-syntax-error {\r\n    text-decoration: none;\r\n}\r\n.helpClass {\r\n    font-size: 0.75em;\r\n}\r\n.fieldType,\r\n.formulaType {\r\n    font-size: 0.75em;\r\n    height: 25px !important;\r\n    border-bottom: 1px solid var(--kn-list-border-color);\r\n    cursor: -webkit-grab;\r\n    cursor: grab;\r\n    &.selected {\r\n        background-color: var(--kn-list-item-selected-background-color) !important;\r\n    }\r\n    &:hover {\r\n        background-color: var(--kn-list-item-hover-background-color);\r\n    }\r\n}\r\n</style>"],"names":["Dialog","Dropdown","Message","ScrollPanel","VCodeMirror","useValidate","_createElementVNode","_openBlock","_createBlock","_withCtx","_createVNode","_normalizeClass","_withDirectives","_toDisplayString","_renderSlot","_createElementBlock","_Fragment","_renderList"],"mappings":"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"}