import{d as f,_ as v,r as s,o as u,h as m,w as g,a as l,t as h,z as x,Y as w,f as b,V as p}from"./index-1e676509.js";import{s as y}from"./tree.esm-837306a6.js";const M={style:{padding:"0"}};var A={node:M};const C=f({name:"workspace-document-tree",components:{Tree:y},props:{propFolders:{type:Array},mode:{type:String},selectedBreadcrumb:{type:Object}},emits:["folderSelected","delete","createFolder"],data(){return{workspaceDocumentTreeDescriptor:A,folders:[],nodes:[],selectedFolderKey:{},selectedFolder:null,buttonsVisible:[]}},watch:{propFolders(){this.loadTree()},selectedBreadcrumb(){this.onBreadcrumbSelected()}},created(){this.loadTree()},methods:{loadTree(){this.loadFolders(),this.createNodeTree()},loadFolders(){this.folders=this.propFolders},createNodeTree(){var a;this.nodes=[];const e=[];(a=this.folders)==null||a.forEach(t=>{const r={key:t.name,icon:"pi pi-folder",id:t.functId,parentId:t.parentFunct,label:t.name,path:t.path,prog:t.prog,children:[],data:{name:t.name,hasDocuments:!1},style:this.workspaceDocumentTreeDescriptor.node.style};r.children=e.filter(n=>r.id===n.parentId),this.attachFolderToTree(r,e)})},attachFolderToTree(e,a){var t,r;if(e.parentId){let n=null;for(let d=0;d<a.length;d++)if(e.parentId===a[d].id){e.data.parentFolder=a[d],(t=a[d].children)==null||t.push(e);break}for(let d=0;d<this.nodes.length;d++)if(n=this.findParentFolder(e,this.nodes[d]),n){e.data.parentFolder=n,(r=n.children)==null||r.push(e);break}n||a.push(e)}else this.nodes.push(e)},findParentFolder(e,a){if(e.parentId===a.id)return a;{let t=null;if(a.children)for(let r=0;r<a.children.length&&(t=this.findParentFolder(e,a.children[r]),!t);r++);return t}},setOpenFolderIcon(e){e.icon="pi pi-folder-open"},setClosedFolderIcon(e){e.icon="pi pi-folder"},setSelectedFolder(e){this.selectedFolder=e,this.$emit("folderSelected",this.selectedFolder)},removeSelectedFolder(){this.selectedFolder=null,this.$emit("folderSelected",this.selectedFolder)},createFolder(e){this.$emit("createFolder",e)},deleteFolderConfirm(e){this.$confirm.require({message:this.$t("common.toast.deleteMessage"),header:this.$t("common.toast.deleteTitle"),icon:"pi pi-exclamation-triangle",accept:()=>this.$emit("delete",e)})},onBreadcrumbSelected(){var e;this.selectedFolder=(e=this.selectedBreadcrumb)==null?void 0:e.node,this.selectedFolderKey={},this.selectedFolderKey[this.selectedFolder.key]=!0}}}),F=["onMouseover","onMouseleave"],E={class:"p-ml-2"};function z(e,a,t,r,n,d){const c=s("Button"),k=s("Tree");return u(),m(k,{id:"folders-tree",value:e.nodes,selectionMode:"single",selectionKeys:e.selectedFolderKey,"onUpdate:selectionKeys":a[0]||(a[0]=o=>e.selectedFolderKey=o),onNodeSelect:a[1]||(a[1]=o=>e.setSelectedFolder(o)),onNodeUnselect:e.removeSelectedFolder,onNodeExpand:a[2]||(a[2]=o=>e.setOpenFolderIcon(o)),onNodeCollapse:a[3]||(a[3]=o=>e.setClosedFolderIcon(o))},{default:g(o=>[l("div",{class:"p-d-flex p-flex-row p-ai-center",onMouseover:i=>e.buttonsVisible[o.node.id]=!0,onMouseleave:i=>e.buttonsVisible[o.node.id]=!1},[l("span",null,h(o.node.label),1),x(l("div",E,[b(c,{icon:"fa fa-plus",class:"p-button-link p-button-sm p-p-0",onClick:p(i=>e.createFolder(o.node),["stop"])},null,8,["onClick"]),b(c,{icon:"far fa-trash-alt",class:"p-button-link p-button-sm p-p-0",onClick:p(i=>e.deleteFolderConfirm(o.node),["stop"])},null,8,["onClick"])],512),[[w,e.mode==="select"&&e.buttonsVisible[o.node.id]]])],40,F)]),_:1},8,["value","selectionKeys","onNodeUnselect"])}var S=v(C,[["render",z],["__scopeId","data-v-269fed73"]]);export{S as W};
//# sourceMappingURL=WorkspaceDocumentTree-9d70941c.js.map
