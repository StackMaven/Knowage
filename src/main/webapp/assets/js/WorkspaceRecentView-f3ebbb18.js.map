{"version":3,"file":"WorkspaceRecentView-f3ebbb18.js","sources":["../../../../modules/workspace/views/recentView/WorkspaceRecentView.vue"],"sourcesContent":["<template>\r\n    <Toolbar class=\"kn-toolbar kn-toolbar--secondary\">\r\n        <template #start>\r\n            <Button id=\"showSidenavIcon\" icon=\"fas fa-bars\" class=\"p-button-text p-button-rounded p-button-plain\" @click=\"$emit('showMenu')\" />\r\n            {{ $t('workspace.menuLabels.recentDocuments') }}\r\n        </template>\r\n        <template #end>\r\n            <Button v-if=\"toggleCardDisplay\" icon=\"fas fa-list\" class=\"p-button-text p-button-rounded p-button-plain\" @click=\"toggleDisplayView\" />\r\n            <Button v-if=\"!toggleCardDisplay\" icon=\"fas fa-th-large\" class=\"p-button-text p-button-rounded p-button-plain\" @click=\"toggleDisplayView\" />\r\n        </template>\r\n    </Toolbar>\r\n    <InputText class=\"kn-material-input p-m-2\" :style=\"mainDescriptor.style.filterInput\" v-model=\"searchWord\" type=\"text\" :placeholder=\"$t('common.search')\" @input=\"searchItems\" data-test=\"search-input\" />\r\n    <div class=\"kn-overflow\">\r\n        <DataTable v-if=\"!toggleCardDisplay\" class=\"p-datatable-sm kn-table p-mx-2\" :value=\"filteredDocuments\" :loading=\"loading\" dataKey=\"objId\" responsiveLayout=\"stack\" breakpoint=\"600px\" data-test=\"recent-table\">\r\n            <template #empty>\r\n                {{ $t('common.info.noDataFound') }}\r\n            </template>\r\n            <Column field=\"documentType\" :header=\"$t('importExport.gallery.column.type')\" :sortable=\"true\" />\r\n            <Column field=\"documentName\" :header=\"$t('importExport.gallery.column.name')\" :sortable=\"true\" />\r\n            <Column field=\"requestTime\" :header=\"$t('managers.functionalitiesManagement.execution')\" :sortable=\"true\">\r\n                <template #body=\"{ data }\">\r\n                    {{ formatDate(data.requestTime) }}\r\n                </template>\r\n            </Column>\r\n            <Column :style=\"mainDescriptor.style.iconColumn\">\r\n                <template #header> &ensp; </template>\r\n                <template #body=\"slotProps\">\r\n                    <Button icon=\"fas fa-info-circle\" class=\"p-button-link\" v-tooltip.left=\"$t('workspace.myModels.showInfo')\" @click.stop=\"showSidebar(slotProps.data)\" :data-test=\"'info-button-' + slotProps.data.documentName\" />\r\n                    <Button icon=\"fas fa-play-circle\" class=\"p-button-link\" @click=\"executeRecent(slotProps.data)\" />\r\n                </template>\r\n            </Column>\r\n        </DataTable>\r\n        <div v-if=\"toggleCardDisplay\" class=\"p-grid p-m-2\" data-test=\"card-container\">\r\n            <Message v-if=\"filteredDocuments.length === 0\" class=\"kn-flex p-m-2\" severity=\"info\" :closable=\"false\" :style=\"mainDescriptor.style.message\">\r\n                {{ $t('common.info.noDataFound') }}\r\n            </Message>\r\n            <template v-else>\r\n                <WorkspaceCard v-for=\"(document, index) of filteredDocuments\" :key=\"index\" :viewType=\"'recent'\" :document=\"document\" @executeRecent=\"executeRecent\" @openSidebar=\"showSidebar\" />\r\n            </template>\r\n        </div>\r\n    </div>\r\n\r\n    <DetailSidebar :visible=\"showDetailSidebar\" :viewType=\"'recent'\" :document=\"selectedDocument\" @executeRecent=\"executeRecent\" @close=\"showDetailSidebar = false\" data-test=\"detail-sidebar\" />\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport { IDocument } from '@/modules/workspace/Workspace'\r\nimport { AxiosResponse } from 'axios'\r\nimport DetailSidebar from '@/modules/workspace/genericComponents/DetailSidebar.vue'\r\nimport Message from 'primevue/message'\r\nimport WorkspaceCard from '@/modules/workspace/genericComponents/WorkspaceCard.vue'\r\nimport mainDescriptor from '@/modules/workspace/WorkspaceDescriptor.json'\r\nimport DataTable from 'primevue/datatable'\r\nimport Column from 'primevue/column'\r\nimport { formatDateWithLocale } from '@/helpers/commons/localeHelper'\r\nimport mainStore from '../../../../App.store'\r\n\r\nexport default defineComponent({\r\n    components: { DataTable, Column, DetailSidebar, WorkspaceCard, Message },\r\n    emits: ['showMenu', 'toggleDisplayView', 'execute'],\r\n    props: { toggleCardDisplay: { type: Boolean } },\r\n    data() {\r\n        return {\r\n            mainDescriptor,\r\n            loading: false,\r\n            showDetailSidebar: false,\r\n            recentDocumentsList: [] as IDocument[],\r\n            filteredDocuments: [] as IDocument[],\r\n            selectedDocument: {} as IDocument,\r\n            searchWord: '' as string\r\n        }\r\n    },\r\n    setup() {\r\n        const store = mainStore()\r\n        return { store }\r\n    },\r\n    created() {\r\n        this.getRecentDocuments()\r\n    },\r\n    methods: {\r\n        getRecentDocuments() {\r\n            this.loading = true\r\n            return this.$http\r\n                .get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `2.0/recents`)\r\n                .then((response: AxiosResponse<any>) => {\r\n                    this.recentDocumentsList = [...response.data]\r\n                    this.filteredDocuments = [...this.recentDocumentsList]\r\n                })\r\n                .finally(() => (this.loading = false))\r\n        },\r\n        formatDate(date) {\r\n            return formatDateWithLocale(date, { dateStyle: 'short', timeStyle: 'short' })\r\n        },\r\n        executeRecent(document: any) {\r\n            this.$emit('execute', document)\r\n        },\r\n        toggleDisplayView() {\r\n            this.$emit('toggleDisplayView')\r\n        },\r\n        showSidebar(clickedDocument) {\r\n            this.selectedDocument = clickedDocument\r\n            this.showDetailSidebar = true\r\n        },\r\n        searchItems() {\r\n            setTimeout(() => {\r\n                if (!this.searchWord.trim().length) {\r\n                    this.filteredDocuments = [...this.recentDocumentsList] as any[]\r\n                } else {\r\n                    this.filteredDocuments = this.recentDocumentsList.filter((el: any) => {\r\n                        return el.documentType?.toLowerCase().includes(this.searchWord.toLowerCase()) || el.documentName?.toLowerCase().includes(this.searchWord.toLowerCase())\r\n                    })\r\n                }\r\n            }, 250)\r\n        }\r\n    }\r\n})\r\n</script>\r\n"],"names":["DataTable","Column","Message","mainStore","_openBlock","_Fragment","_createVNode","_withCtx","_createBlock","_createCommentVNode","_normalizeStyle","_createElementVNode","_withDirectives","_withModifiers","_createElementBlock","_renderList"],"mappings":"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"}