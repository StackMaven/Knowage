{"version":3,"file":"Scorecards-300f23cb.js","sources":["../../../../modules/managers/scorecards/Scorecards.vue"],"sourcesContent":["<template>\r\n    <div class=\"kn-page\">\r\n        <Toolbar class=\"kn-toolbar kn-toolbar--primary\">\r\n            <template #start>\r\n                {{ $t('managers.scorecards.title') }}\r\n            </template>\r\n            <template #end>\r\n                <KnFabButton icon=\"fas fa-plus\" @click=\"openScorecardDetail()\"></KnFabButton>\r\n            </template>\r\n        </Toolbar>\r\n\r\n        <div class=\"kn-page-content p-grid p-m-0\">\r\n            <div class=\"p-col\">\r\n                <DataTable\r\n                    :value=\"scorecards\"\r\n                    :paginator=\"scorecards.length > 20\"\r\n                    :rows=\"20\"\r\n                    class=\"p-datatable-sm kn-table\"\r\n                    dataKey=\"id\"\r\n                    v-model:filters=\"filters\"\r\n                    :globalFilterFields=\"scorecardsDescriptor.globalFilterFields\"\r\n                    responsiveLayout=\"stack\"\r\n                    breakpoint=\"960px\"\r\n                    @rowClick=\"openScorecardDetail($event.data)\"\r\n                >\r\n                    <template #header>\r\n                        <div class=\"table-header\">\r\n                            <span class=\"p-input-icon-left\">\r\n                                <i class=\"pi pi-search\" />\r\n                                <InputText class=\"kn-material-input\" v-model=\"filters['global'].value\" :placeholder=\"$t('common.search')\" />\r\n                            </span>\r\n                        </div>\r\n                    </template>\r\n                    <template #empty>\r\n                        {{ $t('common.info.noDataFound') }}\r\n                    </template>\r\n                    <Column class=\"kn-truncated\" field=\"name\" :header=\"$t('common.name')\" :sortable=\"true\"></Column>\r\n                    <Column class=\"kn-truncated\" field=\"creationDate\" :header=\"$t('common.creationDate')\" :sortable=\"true\">\r\n                        <template #body=\"slotProps\">\r\n                            <span>{{ getFormattedDate(slotProps.data.creationDate) }}</span>\r\n                        </template>\r\n                    </Column>\r\n                    <Column class=\"kn-truncated\" field=\"author\" :header=\"$t('common.author')\" :sortable=\"true\"></Column>\r\n                    <Column :style=\"scorecardsDescriptor.iconColumnStyle\">\r\n                        <template #body=\"slotProps\">\r\n                            <Button icon=\"pi pi-trash\" class=\"p-button-link\" @click=\"deleteScorecardConfirm(slotProps.data)\" />\r\n                        </template>\r\n                    </Column>\r\n                </DataTable>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport { iScorecard } from './Scorecards'\r\nimport { AxiosResponse } from 'axios'\r\nimport { filterDefault } from '@/helpers/commons/filterHelper'\r\nimport { formatDate } from '@/helpers/commons/localeHelper'\r\nimport Column from 'primevue/column'\r\nimport DataTable from 'primevue/datatable'\r\nimport KnFabButton from '@/components/UI/KnFabButton.vue'\r\nimport moment from 'moment'\r\nimport scorecardsDescriptor from './ScorecardsDescriptor.json'\r\nimport mainStore from '../../../App.store'\r\n\r\nexport default defineComponent({\r\n    name: 'scorecards',\r\n    components: { Column, DataTable, KnFabButton },\r\n    data() {\r\n        return {\r\n            scorecardsDescriptor,\r\n            scorecards: [] as iScorecard[],\r\n            filters: { global: [filterDefault] }\r\n        }\r\n    },\r\n    computed: {},\r\n    setup() {\r\n        const store = mainStore()\r\n        return { store }\r\n    },\r\n    async created() {\r\n        await this.loadScorecards()\r\n    },\r\n    methods: {\r\n        async loadScorecards() {\r\n            this.store.setLoading(true)\r\n            await this.$http.get(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `1.0/kpiee/listScorecard`).then((response: AxiosResponse<any>) => (this.scorecards = response.data))\r\n            this.store.setLoading(false)\r\n        },\r\n        getFormattedDate(date: number) {\r\n            const tempDate = moment(date).format('DD/MM/YYYY')\r\n            return formatDate(tempDate, '', 'DD/MM/YYYY')\r\n        },\r\n        openScorecardDetail(scorecard: iScorecard | null = null) {\r\n            const path = scorecard ? `/scorecards/${scorecard.id}` : '/scorecards/new-scorecard'\r\n            this.$router.push(path)\r\n        },\r\n        deleteScorecardConfirm(scorecard: iScorecard) {\r\n            this.$confirm.require({\r\n                message: this.$t('common.toast.deleteMessage'),\r\n                header: this.$t('common.toast.deleteConfirmTitle'),\r\n                icon: 'pi pi-exclamation-triangle',\r\n                accept: () => this.deleteScorecard(scorecard)\r\n            })\r\n        },\r\n        async deleteScorecard(scorecard: iScorecard) {\r\n            await this.$http\r\n                .delete(import.meta.env.VITE_RESTFUL_SERVICES_PATH + `1.0/kpiee/${scorecard.id}/deleteScorecard`)\r\n                .then(() => {\r\n                    this.store.setInfo({\r\n                        title: this.$t('common.toast.deleteTitle'),\r\n                        msg: this.$t('common.toast.deleteSuccess')\r\n                    })\r\n                    this.removeScorecard(scorecard)\r\n                })\r\n                .catch(() => {})\r\n        },\r\n        removeScorecard(scorecard: iScorecard) {\r\n            const index = this.scorecards.findIndex((tempScorecard: iScorecard) => tempScorecard.id === scorecard.id)\r\n            if (index !== -1) this.scorecards.splice(index, 1)\r\n        }\r\n    }\r\n})\r\n</script>\r\n"],"names":["Column","DataTable","scorecardsDescriptor","mainStore","moment","_openBlock","_createVNode","_withCtx","_createElementVNode","_toDisplayString","_normalizeStyle"],"mappings":"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"}